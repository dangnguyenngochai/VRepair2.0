static grub_err_t read_foo ( struct grub_disk * disk , grub_disk_addr_t sector , grub_size_t size , char * buf ) { //<S2SV> if ( ! disk ) { //<S2SV> eprintf ( "oops.<S2SV_blank>no<S2SV_blank>disk\\n" ) ; //<S2SV> return 1 ; //<S2SV> } //<S2SV> const int blocksize = 512 ; //<S2SV> RIOBind * iob = disk -> data ; //<S2SV> if ( bio ) { //<S2SV> iob = bio ; //<S2SV> } //<S2SV> if ( iob -> read_at ( iob -> io , delta + ( blocksize * sector ) , ( ut8 * ) buf , size * blocksize ) == - 1 ) { //<S2SV> return 1 ; //<S2SV> } //<S2SV> return 0 ; //<S2SV> } //<S2SV> 