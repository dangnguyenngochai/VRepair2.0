static int mpeg4video_probe ( AVProbeData * probe_packet ) //<S2SV> { //<S2SV> uint32_t temp_buffer = - 1 ; //<S2SV> int VO = 0 , VOL = 0 , VOP = 0 , VISO = 0 , res = 0 ; //<S2SV> int i ; //<S2SV> for ( i = 0 ; i < probe_packet -> buf_size ; i ++ ) { //<S2SV> temp_buffer = ( temp_buffer << 8 ) + probe_packet -> buf [ i ] ; //<S2SV> if ( temp_buffer & 0xfffffe00 ) //<S2SV> continue ; //<S2SV> if ( temp_buffer < 2 ) //<S2SV> continue ; //<S2SV> if ( temp_buffer == VOP_START_CODE ) //<S2SV> VOP ++ ; //<S2SV> else if ( temp_buffer == VISUAL_OBJECT_START_CODE ) //<S2SV> VISO ++ ; //<S2SV> else if ( temp_buffer >= 0x100 && temp_buffer < 0x120 ) //<S2SV> VO ++ ; //<S2SV> else if ( temp_buffer >= 0x120 && temp_buffer < 0x130 ) //<S2SV> VOL ++ ; //<S2SV> else if ( ! ( 0x1AF < temp_buffer && temp_buffer < 0x1B7 ) && //<S2SV> ! ( 0x1B9 < temp_buffer && temp_buffer < 0x1C4 ) ) //<S2SV> res ++ ; //<S2SV> } //<S2SV> if ( VOP >= VISO && VOP >= VOL && VO >= VOL && VOL > 0 && res == 0 ) //<S2SV> return AVPROBE_SCORE_EXTENSION ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> 