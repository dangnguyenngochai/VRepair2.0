long FS_FOpenFileRead ( const char * filename , fileHandle_t * file , qboolean uniqueFILE ) //<S2SV> { //<S2SV> searchpath_t * search ; //<S2SV> long len ; //<S2SV> qboolean isLocalConfig ; //<S2SV> if ( ! fs_searchpaths ) //<S2SV> Com_Error ( ERR_FATAL , "Filesystem<S2SV_blank>call<S2SV_blank>made<S2SV_blank>without<S2SV_blank>initialization" ) ; //<S2SV> isLocalConfig = ! strcmp ( filename , "autoexec.cfg" ) || ! strcmp ( filename , Q3CONFIG_CFG ) ; //<S2SV> for ( search = fs_searchpaths ; search ; search = search -> next ) //<S2SV> { //<S2SV> if ( isLocalConfig && search -> pack ) //<S2SV> continue ; //<S2SV> len = FS_FOpenFileReadDir ( filename , search , file , uniqueFILE , qfalse ) ; //<S2SV> if ( file == NULL ) //<S2SV> { //<S2SV> if ( len > 0 ) //<S2SV> return len ; //<S2SV> } //<S2SV> else //<S2SV> { //<S2SV> if ( len >= 0 && * file ) //<S2SV> return len ; //<S2SV> } //<S2SV> } //<S2SV> # ifdef FS_MISSING //<S2SV> if ( missingFiles ) //<S2SV> fprintf ( missingFiles , "%s\\n" , filename ) ; //<S2SV> # endif //<S2SV> if ( file ) //<S2SV> { //<S2SV> * file = 0 ; //<S2SV> return - 1 ; //<S2SV> } //<S2SV> else //<S2SV> { //<S2SV> return 0 ; //<S2SV> } //<S2SV> } //<S2SV> 