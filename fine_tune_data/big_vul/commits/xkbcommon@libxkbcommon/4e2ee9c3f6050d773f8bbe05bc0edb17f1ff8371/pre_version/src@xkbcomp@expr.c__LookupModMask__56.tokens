static bool //<S2SV> LookupModMask ( struct xkb_context * ctx , const void * priv , xkb_atom_t field , //<S2SV> enum expr_value_type type , xkb_mod_mask_t * val_rtrn ) //<S2SV> { //<S2SV> const char * str ; //<S2SV> xkb_mod_index_t ndx ; //<S2SV> const LookupModMaskPriv * arg = priv ; //<S2SV> const struct xkb_mod_set * mods = arg -> mods ; //<S2SV> enum mod_type mod_type = arg -> mod_type ; //<S2SV> if ( type != EXPR_TYPE_INT ) //<S2SV> return false ; //<S2SV> str = xkb_atom_text ( ctx , field ) ; //<S2SV> if ( istreq ( str , "all" ) ) { //<S2SV> * val_rtrn = MOD_REAL_MASK_ALL ; //<S2SV> return true ; //<S2SV> } //<S2SV> if ( istreq ( str , "none" ) ) { //<S2SV> * val_rtrn = 0 ; //<S2SV> return true ; //<S2SV> } //<S2SV> ndx = XkbModNameToIndex ( mods , field , mod_type ) ; //<S2SV> if ( ndx == XKB_MOD_INVALID ) //<S2SV> return false ; //<S2SV> * val_rtrn = ( 1u << ndx ) ; //<S2SV> return true ; //<S2SV> } //<S2SV> 