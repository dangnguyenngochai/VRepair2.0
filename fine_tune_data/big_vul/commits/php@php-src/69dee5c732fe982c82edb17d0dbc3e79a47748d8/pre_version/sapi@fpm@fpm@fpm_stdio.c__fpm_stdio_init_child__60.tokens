int fpm_stdio_init_child ( struct fpm_worker_pool_s * wp ) //<S2SV> { //<S2SV> # ifdef HAVE_SYSLOG_H //<S2SV> if ( fpm_globals . error_log_fd == ZLOG_SYSLOG ) { //<S2SV> closelog ( ) ; //<S2SV> } else //<S2SV> # endif //<S2SV> if ( fpm_globals . error_log_fd > 0 ) { //<S2SV> close ( fpm_globals . error_log_fd ) ; //<S2SV> } //<S2SV> fpm_globals . error_log_fd = - 1 ; //<S2SV> zlog_set_fd ( - 1 ) ; //<S2SV> if ( wp -> listening_socket != STDIN_FILENO ) { //<S2SV> if ( 0 > dup2 ( wp -> listening_socket , STDIN_FILENO ) ) { //<S2SV> zlog ( ZLOG_SYSERROR , "failed<S2SV_blank>to<S2SV_blank>init<S2SV_blank>child<S2SV_blank>stdio:<S2SV_blank>dup2()" ) ; //<S2SV> return - 1 ; //<S2SV> } //<S2SV> } //<S2SV> return 0 ; //<S2SV> } //<S2SV> 