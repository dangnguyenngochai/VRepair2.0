PHPAPI PHP_FUNCTION ( fread ) //<S2SV> { //<S2SV> zval * arg1 ; //<S2SV> long len ; //<S2SV> php_stream * stream ; //<S2SV> if ( zend_parse_parameters ( ZEND_NUM_ARGS ( ) TSRMLS_CC , "rl" , & arg1 , & len ) == FAILURE ) { //<S2SV> RETURN_FALSE ; //<S2SV> } //<S2SV> PHP_STREAM_TO_ZVAL ( stream , & arg1 ) ; //<S2SV> if ( len <= 0 ) { //<S2SV> php_error_docref ( NULL TSRMLS_CC , E_WARNING , "Length<S2SV_blank>parameter<S2SV_blank>must<S2SV_blank>be<S2SV_blank>greater<S2SV_blank>than<S2SV_blank>0" ) ; //<S2SV> RETURN_FALSE ; //<S2SV> } //<S2SV> Z_STRVAL_P ( return_value ) = emalloc ( len + 1 ) ; //<S2SV> Z_STRLEN_P ( return_value ) = php_stream_read ( stream , Z_STRVAL_P ( return_value ) , len ) ; //<S2SV> Z_STRVAL_P ( return_value ) [ Z_STRLEN_P ( return_value ) ] = 0 ; //<S2SV> Z_TYPE_P ( return_value ) = IS_STRING ; //<S2SV> } //<S2SV> 