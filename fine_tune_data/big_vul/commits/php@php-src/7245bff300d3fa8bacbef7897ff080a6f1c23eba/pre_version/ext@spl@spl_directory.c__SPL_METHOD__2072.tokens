SPL_METHOD ( SplFileObject , fread ) //<S2SV> { //<S2SV> spl_filesystem_object * intern = ( spl_filesystem_object * ) zend_object_store_get_object ( getThis ( ) TSRMLS_CC ) ; //<S2SV> long length = 0 ; //<S2SV> if ( zend_parse_parameters ( ZEND_NUM_ARGS ( ) TSRMLS_CC , "l" , & length ) == FAILURE ) { //<S2SV> return ; //<S2SV> } //<S2SV> if ( length <= 0 ) { //<S2SV> php_error_docref ( NULL TSRMLS_CC , E_WARNING , "Length<S2SV_blank>parameter<S2SV_blank>must<S2SV_blank>be<S2SV_blank>greater<S2SV_blank>than<S2SV_blank>0" ) ; //<S2SV> RETURN_FALSE ; //<S2SV> } //<S2SV> Z_STRVAL_P ( return_value ) = emalloc ( length + 1 ) ; //<S2SV> Z_STRLEN_P ( return_value ) = php_stream_read ( intern -> u . file . stream , Z_STRVAL_P ( return_value ) , length ) ; //<S2SV> Z_STRVAL_P ( return_value ) [ Z_STRLEN_P ( return_value ) ] = 0 ; //<S2SV> Z_TYPE_P ( return_value ) = IS_STRING ; //<S2SV> } //<S2SV> 