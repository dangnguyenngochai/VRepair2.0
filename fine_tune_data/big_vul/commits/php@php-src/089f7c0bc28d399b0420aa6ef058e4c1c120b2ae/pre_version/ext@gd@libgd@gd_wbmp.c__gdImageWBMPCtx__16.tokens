void gdImageWBMPCtx ( gdImagePtr image , int fg , gdIOCtx * out ) //<S2SV> { //<S2SV> int x , y , pos ; //<S2SV> Wbmp * wbmp ; //<S2SV> if ( ( wbmp = createwbmp ( gdImageSX ( image ) , gdImageSY ( image ) , WBMP_WHITE ) ) == NULL ) { //<S2SV> gd_error ( "Could<S2SV_blank>not<S2SV_blank>create<S2SV_blank>WBMP" ) ; //<S2SV> return ; //<S2SV> } //<S2SV> pos = 0 ; //<S2SV> for ( y = 0 ; y < gdImageSY ( image ) ; y ++ ) { //<S2SV> for ( x = 0 ; x < gdImageSX ( image ) ; x ++ ) { //<S2SV> if ( gdImageGetPixel ( image , x , y ) == fg ) { //<S2SV> wbmp -> bitmap [ pos ] = WBMP_BLACK ; //<S2SV> } //<S2SV> pos ++ ; //<S2SV> } //<S2SV> } //<S2SV> if ( writewbmp ( wbmp , & gd_putout , out ) ) { //<S2SV> gd_error ( "Could<S2SV_blank>not<S2SV_blank>save<S2SV_blank>WBMP" ) ; //<S2SV> } //<S2SV> freewbmp ( wbmp ) ; //<S2SV> } //<S2SV> 