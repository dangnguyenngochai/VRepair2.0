void gdImageGifCtx ( gdImagePtr im , gdIOCtxPtr out ) //<S2SV> { //<S2SV> gdImagePtr pim = 0 , tim = im ; //<S2SV> int interlace , BitsPerPixel ; //<S2SV> interlace = im -> interlace ; //<S2SV> if ( im -> trueColor ) { //<S2SV> pim = gdImageCreatePaletteFromTrueColor ( im , 1 , 256 ) ; //<S2SV> if ( ! pim ) { //<S2SV> return ; //<S2SV> } //<S2SV> tim = pim ; //<S2SV> } //<S2SV> BitsPerPixel = colorstobpp ( tim -> colorsTotal ) ; //<S2SV> GIFEncode ( //<S2SV> out , tim -> sx , tim -> sy , tim -> interlace , 0 , tim -> transparent , BitsPerPixel , //<S2SV> tim -> red , tim -> green , tim -> blue , tim ) ; //<S2SV> if ( pim ) { //<S2SV> gdImageDestroy ( pim ) ; //<S2SV> } //<S2SV> } //<S2SV> 