char * _multi_string_alloc_and_copy ( LPCWSTR in ) //<S2SV> { //<S2SV> char * chr ; //<S2SV> int len = 0 ; //<S2SV> if ( ! in ) //<S2SV> { //<S2SV> return NULL ; //<S2SV> } //<S2SV> while ( in [ len ] != 0 || in [ len + 1 ] != 0 ) //<S2SV> { //<S2SV> len ++ ; //<S2SV> } //<S2SV> chr = malloc ( len + 2 ) ; //<S2SV> len = 0 ; //<S2SV> while ( in [ len ] != 0 || in [ len + 1 ] != 0 ) //<S2SV> { //<S2SV> chr [ len ] = 0xFF & in [ len ] ; //<S2SV> len ++ ; //<S2SV> } //<S2SV> chr [ len ++ ] = '\\0' ; //<S2SV> chr [ len ++ ] = '\\0' ; //<S2SV> return chr ; //<S2SV> } //<S2SV> 