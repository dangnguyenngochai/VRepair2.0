void mp_encode_lua_table_as_array ( lua_State * L , mp_buf * buf , int level ) { //<S2SV> # if LUA_VERSION_NUM < 502 //<S2SV> size_t len = lua_objlen ( L , - 1 ) , j ; //<S2SV> # else //<S2SV> size_t len = lua_rawlen ( L , - 1 ) , j ; //<S2SV> # endif //<S2SV> mp_encode_array ( L , buf , len ) ; //<S2SV> luaL_checkstack ( L , 1 , "in<S2SV_blank>function<S2SV_blank>mp_encode_lua_table_as_array" ) ; //<S2SV> for ( j = 1 ; j <= len ; j ++ ) { //<S2SV> lua_pushnumber ( L , j ) ; //<S2SV> lua_gettable ( L , - 2 ) ; //<S2SV> mp_encode_lua_type ( L , buf , level + 1 ) ; //<S2SV> } //<S2SV> } //<S2SV> 