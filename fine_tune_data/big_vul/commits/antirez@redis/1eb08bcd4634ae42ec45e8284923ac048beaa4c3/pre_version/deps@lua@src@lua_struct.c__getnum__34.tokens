static int getnum ( lua_State * L , const char * * fmt , int df ) { //<S2SV> if ( ! isdigit ( * * fmt ) ) //<S2SV> return df ; //<S2SV> else { //<S2SV> int a = 0 ; //<S2SV> do { //<S2SV> if ( a > ( INT_MAX / 10 ) || a * 10 > ( INT_MAX - ( * * fmt - '0' ) ) ) //<S2SV> luaL_error ( L , "integral<S2SV_blank>size<S2SV_blank>overflow" ) ; //<S2SV> a = a * 10 + * ( ( * fmt ) ++ ) - '0' ; //<S2SV> } while ( isdigit ( * * fmt ) ) ; //<S2SV> return a ; //<S2SV> } //<S2SV> } //<S2SV> 