ut32 armass_assemble ( const char * str , ut64 off , int thumb ) { //<S2SV> int i , j ; //<S2SV> char buf [ 128 ] ; //<S2SV> ArmOpcode aop = { . off = off } ; //<S2SV> for ( i = j = 0 ; i < sizeof ( buf ) - 1 && str [ i ] ; i ++ , j ++ ) { //<S2SV> if ( str [ j ] == '#' ) { //<S2SV> i -- ; continue ; //<S2SV> } //<S2SV> buf [ i ] = tolower ( ( const ut8 ) str [ j ] ) ; //<S2SV> } //<S2SV> buf [ i ] = 0 ; //<S2SV> arm_opcode_parse ( & aop , buf ) ; //<S2SV> aop . off = off ; //<S2SV> if ( thumb < 0 || thumb > 1 ) { //<S2SV> return - 1 ; //<S2SV> } //<S2SV> if ( ! assemble [ thumb ] ( & aop , off , buf ) ) { //<S2SV> return - 1 ; //<S2SV> } //<S2SV> return aop . o ; //<S2SV> } //<S2SV> 