IMPEG2D_ERROR_CODES_T impeg2d_init_video_state ( dec_state_t * ps_dec , e_video_type_t e_video_type ) //<S2SV> { //<S2SV> if ( e_video_type == MPEG_1_VIDEO ) //<S2SV> { //<S2SV> ps_dec -> u2_is_mpeg2 = 0 ; //<S2SV> ps_dec -> u2_progressive_sequence = 1 ; //<S2SV> ps_dec -> u2_intra_dc_precision = 0 ; //<S2SV> ps_dec -> u2_picture_structure = FRAME_PICTURE ; //<S2SV> ps_dec -> u2_frame_pred_frame_dct = 1 ; //<S2SV> ps_dec -> u2_concealment_motion_vectors = 0 ; //<S2SV> ps_dec -> u2_q_scale_type = 0 ; //<S2SV> ps_dec -> u2_intra_vlc_format = 0 ; //<S2SV> ps_dec -> u2_alternate_scan = 0 ; //<S2SV> ps_dec -> u2_repeat_first_field = 0 ; //<S2SV> ps_dec -> u2_progressive_frame = 1 ; //<S2SV> ps_dec -> u2_frame_rate_extension_n = 0 ; //<S2SV> ps_dec -> u2_frame_rate_extension_d = 0 ; //<S2SV> ps_dec -> pf_vld_inv_quant = impeg2d_vld_inv_quant_mpeg1 ; //<S2SV> } //<S2SV> else //<S2SV> { //<S2SV> ps_dec -> u2_is_mpeg2 = 1 ; //<S2SV> ps_dec -> u2_full_pel_forw_vector = 0 ; //<S2SV> ps_dec -> u2_forw_f_code = 7 ; //<S2SV> ps_dec -> u2_full_pel_back_vector = 0 ; //<S2SV> ps_dec -> u2_back_f_code = 7 ; //<S2SV> ps_dec -> pf_vld_inv_quant = impeg2d_vld_inv_quant_mpeg2 ; //<S2SV> } //<S2SV> impeg2d_init_function_ptr ( ps_dec ) ; //<S2SV> ps_dec -> u2_frame_height = ALIGN16 ( ps_dec -> u2_vertical_size ) ; //<S2SV> ps_dec -> u2_frame_width = ALIGN16 ( ps_dec -> u2_horizontal_size ) ; //<S2SV> ps_dec -> u2_num_horiz_mb = ( ps_dec -> u2_horizontal_size + 15 ) >> 4 ; //<S2SV> if ( ps_dec -> u2_frame_height > ps_dec -> u2_create_max_height || ps_dec -> u2_frame_width > ps_dec -> u2_create_max_width ) //<S2SV> { //<S2SV> return IMPEG2D_PIC_SIZE_NOT_SUPPORTED ; //<S2SV> } //<S2SV> ps_dec -> u2_num_flds_decoded = 0 ; //<S2SV> { //<S2SV> UWORD32 numer ; //<S2SV> UWORD32 denom ; //<S2SV> numer = ( UWORD32 ) gau2_impeg2_frm_rate_code [ ps_dec -> u2_frame_rate_code ] [ 1 ] * //<S2SV> ( UWORD32 ) ( ps_dec -> u2_frame_rate_extension_d + 1 ) ; //<S2SV> denom = ( UWORD32 ) gau2_impeg2_frm_rate_code [ ps_dec -> u2_frame_rate_code ] [ 0 ] * //<S2SV> ( UWORD32 ) ( ps_dec -> u2_frame_rate_extension_n + 1 ) ; //<S2SV> ps_dec -> u2_framePeriod = ( numer * 1000 * 100 ) / denom ; //<S2SV> } //<S2SV> if ( VERTICAL_SCAN == ps_dec -> u2_alternate_scan ) //<S2SV> { //<S2SV> ps_dec -> pu1_inv_scan_matrix = ( UWORD8 * ) gau1_impeg2_inv_scan_vertical ; //<S2SV> } //<S2SV> else //<S2SV> { //<S2SV> ps_dec -> pu1_inv_scan_matrix = ( UWORD8 * ) gau1_impeg2_inv_scan_zig_zag ; //<S2SV> } //<S2SV> return ( IMPEG2D_ERROR_CODES_T ) IVD_ERROR_NONE ; //<S2SV> } //<S2SV> 