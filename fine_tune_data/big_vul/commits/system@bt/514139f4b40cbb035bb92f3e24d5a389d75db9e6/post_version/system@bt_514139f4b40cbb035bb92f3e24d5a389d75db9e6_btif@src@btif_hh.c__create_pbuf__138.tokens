static BT_HDR * create_pbuf ( UINT16 len , UINT8 * data ) //<S2SV> { //<S2SV> UINT16 buflen = ( UINT16 ) ( len + BTA_HH_MIN_OFFSET + sizeof ( BT_HDR ) ) ; //<S2SV> if ( buflen < len ) { //<S2SV> android_errorWriteWithInfoLog ( 0x534e4554 , "28672558" , - 1 , NULL , 0 ) ; //<S2SV> return NULL ; //<S2SV> } //<S2SV> BT_HDR * p_buf = GKI_getbuf ( buflen ) ; //<S2SV> if ( p_buf ) { //<S2SV> UINT8 * pbuf_data ; //<S2SV> p_buf -> len = len ; //<S2SV> p_buf -> offset = BTA_HH_MIN_OFFSET ; //<S2SV> pbuf_data = ( UINT8 * ) ( p_buf + 1 ) + p_buf -> offset ; //<S2SV> memcpy ( pbuf_data , data , len ) ; //<S2SV> } //<S2SV> return p_buf ; //<S2SV> } //<S2SV> 