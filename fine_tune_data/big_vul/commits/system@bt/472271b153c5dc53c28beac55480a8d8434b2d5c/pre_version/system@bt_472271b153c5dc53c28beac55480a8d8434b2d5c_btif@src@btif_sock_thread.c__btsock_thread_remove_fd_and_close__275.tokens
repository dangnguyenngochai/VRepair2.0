bool btsock_thread_remove_fd_and_close ( int thread_handle , int fd ) //<S2SV> { //<S2SV> if ( thread_handle < 0 || thread_handle >= MAX_THREAD ) //<S2SV> { //<S2SV> APPL_TRACE_ERROR ( "%s<S2SV_blank>invalid<S2SV_blank>thread<S2SV_blank>handle:<S2SV_blank>%d" , __func__ , thread_handle ) ; //<S2SV> return false ; //<S2SV> } //<S2SV> if ( fd == - 1 ) //<S2SV> { //<S2SV> APPL_TRACE_ERROR ( "%s<S2SV_blank>invalid<S2SV_blank>file<S2SV_blank>descriptor." , __func__ ) ; //<S2SV> return false ; //<S2SV> } //<S2SV> sock_cmd_t cmd = { CMD_REMOVE_FD , fd , 0 , 0 , 0 } ; //<S2SV> return send ( ts [ thread_handle ] . cmd_fdw , & cmd , sizeof ( cmd ) , 0 ) == sizeof ( cmd ) ; //<S2SV> } //<S2SV> 