socket_t * socket_accept ( const socket_t * socket ) { //<S2SV> assert ( socket != NULL ) ; //<S2SV> int fd = accept ( socket -> fd , NULL , NULL ) ; //<S2SV> if ( fd == INVALID_FD ) { //<S2SV> LOG_ERROR ( "%s<S2SV_blank>unable<S2SV_blank>to<S2SV_blank>accept<S2SV_blank>socket:<S2SV_blank>%s" , __func__ , strerror ( errno ) ) ; //<S2SV> return NULL ; //<S2SV> } //<S2SV> socket_t * ret = ( socket_t * ) osi_calloc ( sizeof ( socket_t ) ) ; //<S2SV> if ( ! ret ) { //<S2SV> close ( fd ) ; //<S2SV> LOG_ERROR ( "%s<S2SV_blank>unable<S2SV_blank>to<S2SV_blank>allocate<S2SV_blank>memory<S2SV_blank>for<S2SV_blank>socket." , __func__ ) ; //<S2SV> return NULL ; //<S2SV> } //<S2SV> ret -> fd = fd ; //<S2SV> return ret ; //<S2SV> } //<S2SV> 