int sock_send_all ( int sock_fd , const uint8_t * buf , int len ) //<S2SV> { //<S2SV> int s = len ; //<S2SV> int ret ; //<S2SV> while ( s ) //<S2SV> { //<S2SV> do ret = send ( sock_fd , buf , s , 0 ) ; //<S2SV> while ( ret < 0 && errno == EINTR ) ; //<S2SV> if ( ret <= 0 ) //<S2SV> { //<S2SV> BTIF_TRACE_ERROR ( "sock<S2SV_blank>fd:%d<S2SV_blank>send<S2SV_blank>errno:%d,<S2SV_blank>ret:%d" , sock_fd , errno , ret ) ; //<S2SV> return - 1 ; //<S2SV> } //<S2SV> buf += ret ; //<S2SV> s -= ret ; //<S2SV> } //<S2SV> return len ; //<S2SV> } //<S2SV> 