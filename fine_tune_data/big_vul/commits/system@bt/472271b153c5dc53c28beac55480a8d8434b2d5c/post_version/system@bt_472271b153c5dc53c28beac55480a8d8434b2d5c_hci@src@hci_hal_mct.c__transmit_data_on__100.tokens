static uint16_t transmit_data_on ( int fd , uint8_t * data , uint16_t length ) { //<S2SV> assert ( data != NULL ) ; //<S2SV> assert ( length > 0 ) ; //<S2SV> uint16_t transmitted_length = 0 ; //<S2SV> while ( length > 0 ) { //<S2SV> ssize_t ret = TEMP_FAILURE_RETRY ( write ( fd , data + transmitted_length , length ) ) ; //<S2SV> switch ( ret ) { //<S2SV> case - 1 : //<S2SV> LOG_ERROR ( "In<S2SV_blank>%s,<S2SV_blank>error<S2SV_blank>writing<S2SV_blank>to<S2SV_blank>the<S2SV_blank>serial<S2SV_blank>port<S2SV_blank>with<S2SV_blank>fd<S2SV_blank>%d:<S2SV_blank>%s" , __func__ , fd , strerror ( errno ) ) ; //<S2SV> return transmitted_length ; //<S2SV> case 0 : //<S2SV> return transmitted_length ; //<S2SV> default : //<S2SV> transmitted_length += ret ; //<S2SV> length -= ret ; //<S2SV> break ; //<S2SV> } //<S2SV> } //<S2SV> return transmitted_length ; //<S2SV> } //<S2SV> 