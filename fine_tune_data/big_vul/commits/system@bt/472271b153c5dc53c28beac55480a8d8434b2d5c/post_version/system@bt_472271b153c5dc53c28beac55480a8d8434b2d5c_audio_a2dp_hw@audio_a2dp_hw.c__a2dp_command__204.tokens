static int a2dp_command ( struct a2dp_stream_common * common , char cmd ) //<S2SV> { //<S2SV> char ack ; //<S2SV> DEBUG ( "A2DP<S2SV_blank>COMMAND<S2SV_blank>%s" , dump_a2dp_ctrl_event ( cmd ) ) ; //<S2SV> if ( TEMP_FAILURE_RETRY ( send ( common -> ctrl_fd , & cmd , 1 , MSG_NOSIGNAL ) ) == - 1 ) //<S2SV> { //<S2SV> ERROR ( "cmd<S2SV_blank>failed<S2SV_blank>(%s)" , strerror ( errno ) ) ; //<S2SV> skt_disconnect ( common -> ctrl_fd ) ; //<S2SV> common -> ctrl_fd = AUDIO_SKT_DISCONNECTED ; //<S2SV> return - 1 ; //<S2SV> } //<S2SV> if ( a2dp_ctrl_receive ( common , & ack , 1 ) < 0 ) //<S2SV> return - 1 ; //<S2SV> DEBUG ( "A2DP<S2SV_blank>COMMAND<S2SV_blank>%s<S2SV_blank>DONE<S2SV_blank>STATUS<S2SV_blank>%d" , dump_a2dp_ctrl_event ( cmd ) , ack ) ; //<S2SV> if ( ack == A2DP_CTRL_ACK_INCALL_FAILURE ) //<S2SV> return ack ; //<S2SV> if ( ack != A2DP_CTRL_ACK_SUCCESS ) //<S2SV> return - 1 ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> 