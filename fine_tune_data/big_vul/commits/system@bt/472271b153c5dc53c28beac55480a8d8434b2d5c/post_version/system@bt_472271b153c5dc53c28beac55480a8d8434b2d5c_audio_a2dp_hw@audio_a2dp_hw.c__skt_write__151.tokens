static int skt_write ( int fd , const void * p , size_t len ) //<S2SV> { //<S2SV> int sent ; //<S2SV> struct pollfd pfd ; //<S2SV> FNLOG ( ) ; //<S2SV> pfd . fd = fd ; //<S2SV> pfd . events = POLLOUT ; //<S2SV> if ( TEMP_FAILURE_RETRY ( poll ( & pfd , 1 , 500 ) ) == 0 ) //<S2SV> return 0 ; //<S2SV> ts_log ( "skt_write" , len , NULL ) ; //<S2SV> if ( ( sent = TEMP_FAILURE_RETRY ( send ( fd , p , len , MSG_NOSIGNAL ) ) ) == - 1 ) //<S2SV> { //<S2SV> ERROR ( "write<S2SV_blank>failed<S2SV_blank>with<S2SV_blank>errno=%d\\n" , errno ) ; //<S2SV> return - 1 ; //<S2SV> } //<S2SV> return sent ; //<S2SV> } //<S2SV> 