static int tap_if_down ( const char * devname ) //<S2SV> { //<S2SV> struct ifreq ifr ; //<S2SV> int sk ; //<S2SV> sk = socket ( AF_INET , SOCK_DGRAM , 0 ) ; //<S2SV> if ( sk < 0 ) //<S2SV> return - 1 ; //<S2SV> memset ( & ifr , 0 , sizeof ( ifr ) ) ; //<S2SV> strncpy ( ifr . ifr_name , devname , IF_NAMESIZE - 1 ) ; //<S2SV> ifr . ifr_flags &= ~ IFF_UP ; //<S2SV> TEMP_FAILURE_RETRY ( ioctl ( sk , SIOCSIFFLAGS , ( caddr_t ) & ifr ) ) ; //<S2SV> close ( sk ) ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> 