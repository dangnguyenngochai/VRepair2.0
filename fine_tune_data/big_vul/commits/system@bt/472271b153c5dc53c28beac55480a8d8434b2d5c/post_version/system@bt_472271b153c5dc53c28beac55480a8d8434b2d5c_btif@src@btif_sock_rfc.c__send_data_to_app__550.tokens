static sent_status_t send_data_to_app ( int fd , BT_HDR * p_buf ) { //<S2SV> if ( p_buf -> len == 0 ) //<S2SV> return SENT_ALL ; //<S2SV> ssize_t sent = TEMP_FAILURE_RETRY ( send ( fd , p_buf -> data + p_buf -> offset , p_buf -> len , MSG_DONTWAIT ) ) ; //<S2SV> if ( sent == - 1 ) { //<S2SV> if ( errno == EAGAIN || errno == EWOULDBLOCK || errno == EINTR ) //<S2SV> return SENT_NONE ; //<S2SV> LOG_ERROR ( "%s<S2SV_blank>error<S2SV_blank>writing<S2SV_blank>RFCOMM<S2SV_blank>data<S2SV_blank>back<S2SV_blank>to<S2SV_blank>app:<S2SV_blank>%s" , __func__ , strerror ( errno ) ) ; //<S2SV> return SENT_FAILED ; //<S2SV> } //<S2SV> if ( sent == 0 ) //<S2SV> return SENT_FAILED ; //<S2SV> if ( sent == p_buf -> len ) //<S2SV> return SENT_ALL ; //<S2SV> p_buf -> offset += sent ; //<S2SV> p_buf -> len -= sent ; //<S2SV> return SENT_PARTIAL ; //<S2SV> } //<S2SV> 