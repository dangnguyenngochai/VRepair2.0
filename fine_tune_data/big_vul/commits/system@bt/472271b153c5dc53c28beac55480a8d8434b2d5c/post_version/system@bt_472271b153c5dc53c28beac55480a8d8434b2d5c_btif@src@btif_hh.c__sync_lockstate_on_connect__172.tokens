static void sync_lockstate_on_connect ( btif_hh_device_t * p_dev ) //<S2SV> { //<S2SV> int keylockstates ; //<S2SV> BTIF_TRACE_EVENT ( "%s:<S2SV_blank>Syncing<S2SV_blank>keyboard<S2SV_blank>lock<S2SV_blank>states<S2SV_blank>after<S2SV_blank>" "reconnect..." , __FUNCTION__ ) ; //<S2SV> update_keyboard_lockstates ( p_dev ) ; //<S2SV> keylockstates = get_keylockstates ( ) ; //<S2SV> if ( keylockstates ) //<S2SV> { //<S2SV> BTIF_TRACE_DEBUG ( "%s:<S2SV_blank>Sending<S2SV_blank>hid<S2SV_blank>report<S2SV_blank>to<S2SV_blank>kernel<S2SV_blank>" "indicating<S2SV_blank>lock<S2SV_blank>key<S2SV_blank>state<S2SV_blank>0x%x" , __FUNCTION__ , //<S2SV> keylockstates ) ; //<S2SV> TEMP_FAILURE_RETRY ( usleep ( 200000 ) ) ; //<S2SV> toggle_os_keylockstates ( p_dev -> fd , keylockstates ) ; //<S2SV> } //<S2SV> else //<S2SV> { //<S2SV> BTIF_TRACE_DEBUG ( "%s:<S2SV_blank>NOT<S2SV_blank>sending<S2SV_blank>hid<S2SV_blank>report<S2SV_blank>to<S2SV_blank>kernel<S2SV_blank>" "indicating<S2SV_blank>lock<S2SV_blank>key<S2SV_blank>state<S2SV_blank>0x%x" , __FUNCTION__ , //<S2SV> keylockstates ) ; //<S2SV> } //<S2SV> } //<S2SV> 