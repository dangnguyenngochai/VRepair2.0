static void ParseCommon ( map_string_t * settings , const char * conf_filename ) //<S2SV> { //<S2SV> const char * value ; //<S2SV> value = get_map_string_item_or_NULL ( settings , "WatchCrashdumpArchiveDir" ) ; //<S2SV> if ( value ) //<S2SV> { //<S2SV> g_settings_sWatchCrashdumpArchiveDir = xstrdup ( value ) ; //<S2SV> remove_map_string_item ( settings , "WatchCrashdumpArchiveDir" ) ; //<S2SV> } //<S2SV> value = get_map_string_item_or_NULL ( settings , "MaxCrashReportsSize" ) ; //<S2SV> if ( value ) //<S2SV> { //<S2SV> char * end ; //<S2SV> errno = 0 ; //<S2SV> unsigned long ul = strtoul ( value , & end , 10 ) ; //<S2SV> if ( errno || end == value || * end != '\\0' || ul > INT_MAX ) //<S2SV> error_msg ( "Error<S2SV_blank>parsing<S2SV_blank>%s<S2SV_blank>setting:<S2SV_blank>\'%s\'" , "MaxCrashReportsSize" , value ) ; //<S2SV> else //<S2SV> g_settings_nMaxCrashReportsSize = ul ; //<S2SV> remove_map_string_item ( settings , "MaxCrashReportsSize" ) ; //<S2SV> } //<S2SV> value = get_map_string_item_or_NULL ( settings , "DumpLocation" ) ; //<S2SV> if ( value ) //<S2SV> { //<S2SV> g_settings_dump_location = xstrdup ( value ) ; //<S2SV> remove_map_string_item ( settings , "DumpLocation" ) ; //<S2SV> } //<S2SV> else //<S2SV> g_settings_dump_location = xstrdup ( DEFAULT_DUMP_LOCATION ) ; //<S2SV> value = get_map_string_item_or_NULL ( settings , "DeleteUploaded" ) ; //<S2SV> if ( value ) //<S2SV> { //<S2SV> g_settings_delete_uploaded = string_to_bool ( value ) ; //<S2SV> remove_map_string_item ( settings , "DeleteUploaded" ) ; //<S2SV> } //<S2SV> value = get_map_string_item_or_NULL ( settings , "AutoreportingEnabled" ) ; //<S2SV> if ( value ) //<S2SV> { //<S2SV> g_settings_autoreporting = string_to_bool ( value ) ; //<S2SV> remove_map_string_item ( settings , "AutoreportingEnabled" ) ; //<S2SV> } //<S2SV> value = get_map_string_item_or_NULL ( settings , "AutoreportingEvent" ) ; //<S2SV> if ( value ) //<S2SV> { //<S2SV> g_settings_autoreporting_event = xstrdup ( value ) ; //<S2SV> remove_map_string_item ( settings , "AutoreportingEvent" ) ; //<S2SV> } //<S2SV> else //<S2SV> g_settings_autoreporting_event = xstrdup ( "report_uReport" ) ; //<S2SV> value = get_map_string_item_or_NULL ( settings , "ShortenedReporting" ) ; //<S2SV> if ( value ) //<S2SV> { //<S2SV> g_settings_shortenedreporting = string_to_bool ( value ) ; //<S2SV> remove_map_string_item ( settings , "ShortenedReporting" ) ; //<S2SV> } //<S2SV> else //<S2SV> g_settings_shortenedreporting = 0 ; //<S2SV> GHashTableIter iter ; //<S2SV> const char * name ; //<S2SV> init_map_string_iter ( & iter , settings ) ; //<S2SV> while ( next_map_string_iter ( & iter , & name , & value ) ) //<S2SV> { //<S2SV> error_msg ( "Unrecognized<S2SV_blank>variable<S2SV_blank>\'%s\'<S2SV_blank>in<S2SV_blank>\'%s\'" , name , conf_filename ) ; //<S2SV> } //<S2SV> } //<S2SV> 