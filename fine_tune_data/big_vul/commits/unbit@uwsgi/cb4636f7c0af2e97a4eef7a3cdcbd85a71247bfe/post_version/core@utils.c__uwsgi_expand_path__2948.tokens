char * uwsgi_expand_path ( char * dir , int dir_len , char * ptr ) { //<S2SV> if ( dir_len > PATH_MAX ) //<S2SV> { //<S2SV> uwsgi_log ( "invalid<S2SV_blank>path<S2SV_blank>size:<S2SV_blank>%d<S2SV_blank>(max<S2SV_blank>%d)\\n" , dir_len , PATH_MAX ) ; //<S2SV> return NULL ; //<S2SV> } //<S2SV> char * src = uwsgi_concat2n ( dir , dir_len , "" , 0 ) ; //<S2SV> char * dst = ptr ; //<S2SV> if ( ! dst ) //<S2SV> dst = uwsgi_malloc ( PATH_MAX + 1 ) ; //<S2SV> if ( ! realpath ( src , dst ) ) { //<S2SV> uwsgi_error_realpath ( src ) ; //<S2SV> if ( ! ptr ) //<S2SV> free ( dst ) ; //<S2SV> free ( src ) ; //<S2SV> return NULL ; //<S2SV> } //<S2SV> free ( src ) ; //<S2SV> return dst ; //<S2SV> } //<S2SV> 