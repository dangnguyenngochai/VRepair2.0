static void //<S2SV> gimp_write_and_read_file ( Gimp * gimp , //<S2SV> gboolean with_unusual_stuff , //<S2SV> gboolean compat_paths , //<S2SV> gboolean use_gimp_2_8_features ) //<S2SV> { //<S2SV> GimpImage * image ; //<S2SV> GimpImage * loaded_image ; //<S2SV> GimpPlugInProcedure * proc ; //<S2SV> gchar * filename ; //<S2SV> GFile * file ; //<S2SV> image = gimp_create_mainimage ( gimp , //<S2SV> with_unusual_stuff , //<S2SV> compat_paths , //<S2SV> use_gimp_2_8_features ) ; //<S2SV> gimp_assert_mainimage ( image , //<S2SV> with_unusual_stuff , //<S2SV> compat_paths , //<S2SV> use_gimp_2_8_features ) ; //<S2SV> filename = g_build_filename ( g_get_tmp_dir ( ) , "gimp-test.xcf" , NULL ) ; //<S2SV> file = g_file_new_for_path ( filename ) ; //<S2SV> g_free ( filename ) ; //<S2SV> proc = gimp_plug_in_manager_file_procedure_find ( image -> gimp -> plug_in_manager , //<S2SV> GIMP_FILE_PROCEDURE_GROUP_SAVE , //<S2SV> file , //<S2SV> NULL ) ; //<S2SV> file_save ( gimp , //<S2SV> image , //<S2SV> NULL , //<S2SV> file , //<S2SV> proc , //<S2SV> GIMP_RUN_NONINTERACTIVE , //<S2SV> FALSE , //<S2SV> FALSE , //<S2SV> FALSE , //<S2SV> NULL ) ; //<S2SV> loaded_image = gimp_test_load_image ( image -> gimp , file ) ; //<S2SV> gimp_assert_mainimage ( loaded_image , //<S2SV> with_unusual_stuff , //<S2SV> compat_paths , //<S2SV> use_gimp_2_8_features ) ; //<S2SV> g_file_delete ( file , NULL , NULL ) ; //<S2SV> g_object_unref ( file ) ; //<S2SV> } //<S2SV> 