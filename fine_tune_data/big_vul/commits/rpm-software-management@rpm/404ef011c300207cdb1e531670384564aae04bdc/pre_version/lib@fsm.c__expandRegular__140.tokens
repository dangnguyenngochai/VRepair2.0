static int expandRegular ( rpmfi fi , const char * dest , rpmpsm psm , int nodigest , int nocontent ) //<S2SV> { //<S2SV> FD_t wfd = NULL ; //<S2SV> int rc = 0 ; //<S2SV> { //<S2SV> mode_t old_umask = umask ( 0577 ) ; //<S2SV> wfd = Fopen ( dest , "w.ufdio" ) ; //<S2SV> umask ( old_umask ) ; //<S2SV> } //<S2SV> if ( Ferror ( wfd ) ) { //<S2SV> rc = RPMERR_OPEN_FAILED ; //<S2SV> goto exit ; //<S2SV> } //<S2SV> if ( ! nocontent ) //<S2SV> rc = rpmfiArchiveReadToFilePsm ( fi , wfd , nodigest , psm ) ; //<S2SV> exit : //<S2SV> if ( wfd ) { //<S2SV> int myerrno = errno ; //<S2SV> Fclose ( wfd ) ; //<S2SV> errno = myerrno ; //<S2SV> } //<S2SV> return rc ; //<S2SV> } //<S2SV> 