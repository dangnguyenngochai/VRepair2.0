static void //<S2SV> activate_desktop_file ( ActivateParameters * parameters , //<S2SV> NautilusFile * file ) //<S2SV> { //<S2SV> ActivateParametersDesktop * parameters_desktop ; //<S2SV> char * primary , * secondary , * display_name ; //<S2SV> GtkWidget * dialog ; //<S2SV> GdkScreen * screen ; //<S2SV> char * uri ; //<S2SV> screen = gtk_widget_get_screen ( GTK_WIDGET ( parameters -> parent_window ) ) ; //<S2SV> if ( ! nautilus_file_is_trusted_link ( file ) ) //<S2SV> { //<S2SV> parameters_desktop = g_new0 ( ActivateParametersDesktop , 1 ) ; //<S2SV> if ( parameters -> parent_window ) //<S2SV> { //<S2SV> parameters_desktop -> parent_window = parameters -> parent_window ; //<S2SV> g_object_add_weak_pointer ( G_OBJECT ( parameters_desktop -> parent_window ) , ( gpointer * ) & parameters_desktop -> parent_window ) ; //<S2SV> } //<S2SV> parameters_desktop -> file = nautilus_file_ref ( file ) ; //<S2SV> primary = _ ( "Untrusted<S2SV_blank>application<S2SV_blank>launcher" ) ; //<S2SV> display_name = nautilus_file_get_display_name ( file ) ; //<S2SV> secondary = //<S2SV> g_strdup_printf ( _ ( "The<S2SV_blank>application<S2SV_blank>launcher<S2SV_blank>“%s”<S2SV_blank>has<S2SV_blank>not<S2SV_blank>been<S2SV_blank>marked<S2SV_blank>as<S2SV_blank>trusted.<S2SV_blank>" //<S2SV> "If<S2SV_blank>you<S2SV_blank>do<S2SV_blank>not<S2SV_blank>know<S2SV_blank>the<S2SV_blank>source<S2SV_blank>of<S2SV_blank>this<S2SV_blank>file,<S2SV_blank>launching<S2SV_blank>it<S2SV_blank>may<S2SV_blank>be<S2SV_blank>unsafe." //<S2SV> ) , //<S2SV> display_name ) ; //<S2SV> dialog = gtk_message_dialog_new ( parameters -> parent_window , //<S2SV> 0 , //<S2SV> GTK_MESSAGE_WARNING , //<S2SV> GTK_BUTTONS_NONE , //<S2SV> NULL ) ; //<S2SV> g_object_set ( dialog , //<S2SV> "text" , primary , //<S2SV> "secondary-text" , secondary , //<S2SV> NULL ) ; //<S2SV> gtk_dialog_add_button ( GTK_DIALOG ( dialog ) , //<S2SV> _ ( "_Launch<S2SV_blank>Anyway" ) , RESPONSE_RUN ) ; //<S2SV> if ( nautilus_file_can_set_permissions ( file ) ) //<S2SV> { //<S2SV> gtk_dialog_add_button ( GTK_DIALOG ( dialog ) , //<S2SV> _ ( "Mark<S2SV_blank>as<S2SV_blank>_Trusted" ) , RESPONSE_MARK_TRUSTED ) ; //<S2SV> } //<S2SV> gtk_dialog_add_button ( GTK_DIALOG ( dialog ) , //<S2SV> _ ( "_Cancel" ) , GTK_RESPONSE_CANCEL ) ; //<S2SV> gtk_dialog_set_default_response ( GTK_DIALOG ( dialog ) , GTK_RESPONSE_CANCEL ) ; //<S2SV> g_signal_connect ( dialog , "response" , //<S2SV> G_CALLBACK ( untrusted_launcher_response_callback ) , //<S2SV> parameters_desktop ) ; //<S2SV> gtk_widget_show ( dialog ) ; //<S2SV> g_free ( display_name ) ; //<S2SV> g_free ( secondary ) ; //<S2SV> return ; //<S2SV> } //<S2SV> uri = nautilus_file_get_uri ( file ) ; //<S2SV> DEBUG ( "Launching<S2SV_blank>trusted<S2SV_blank>launcher<S2SV_blank>%s" , uri ) ; //<S2SV> nautilus_launch_desktop_file ( screen , uri , NULL , //<S2SV> parameters -> parent_window ) ; //<S2SV> g_free ( uri ) ; //<S2SV> } //<S2SV> 