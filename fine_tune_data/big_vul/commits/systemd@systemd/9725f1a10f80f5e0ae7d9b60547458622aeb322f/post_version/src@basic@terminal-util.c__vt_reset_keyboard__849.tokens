int vt_reset_keyboard ( int fd ) { //<S2SV> int kb , r ; //<S2SV> kb = vt_default_utf8 ( ) != 0 ? K_UNICODE : K_XLATE ; //<S2SV> r = vt_verify_kbmode ( fd ) ; //<S2SV> if ( r == - EBUSY ) { //<S2SV> log_debug_errno ( r , "Keyboard<S2SV_blank>is<S2SV_blank>not<S2SV_blank>in<S2SV_blank>XLATE<S2SV_blank>or<S2SV_blank>UNICODE<S2SV_blank>mode,<S2SV_blank>not<S2SV_blank>resetting:<S2SV_blank>%m" ) ; //<S2SV> return 0 ; //<S2SV> } else if ( r < 0 ) //<S2SV> return r ; //<S2SV> if ( ioctl ( fd , KDSKBMODE , kb ) < 0 ) //<S2SV> return - errno ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> 