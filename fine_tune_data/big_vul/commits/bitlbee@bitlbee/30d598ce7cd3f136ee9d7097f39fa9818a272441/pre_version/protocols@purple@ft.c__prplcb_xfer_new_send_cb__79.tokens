static gboolean prplcb_xfer_new_send_cb ( gpointer data , gint fd , b_input_condition cond ) //<S2SV> { //<S2SV> PurpleXfer * xfer = data ; //<S2SV> struct im_connection * ic = purple_ic_by_pa ( xfer -> account ) ; //<S2SV> struct prpl_xfer_data * px = xfer -> ui_data ; //<S2SV> PurpleBuddy * buddy ; //<S2SV> const char * who ; //<S2SV> buddy = purple_find_buddy ( xfer -> account , xfer -> who ) ; //<S2SV> who = buddy ? purple_buddy_get_name ( buddy ) : xfer -> who ; //<S2SV> px -> ft = imcb_file_send_start ( ic , ( char * ) who , xfer -> filename , xfer -> size ) ; //<S2SV> px -> ft -> data = px ; //<S2SV> px -> ft -> accept = prpl_xfer_accept ; //<S2SV> px -> ft -> canceled = prpl_xfer_canceled ; //<S2SV> px -> ft -> free = prpl_xfer_free ; //<S2SV> px -> ft -> write_request = prpl_xfer_write_request ; //<S2SV> return FALSE ; //<S2SV> } //<S2SV> 