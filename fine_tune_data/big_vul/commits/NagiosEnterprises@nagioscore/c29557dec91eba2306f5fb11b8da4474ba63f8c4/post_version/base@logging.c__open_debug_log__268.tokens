int open_debug_log ( void ) //<S2SV> { //<S2SV> int fh ; //<S2SV> struct stat st ; //<S2SV> if ( verify_config || test_scheduling == TRUE ) //<S2SV> return OK ; //<S2SV> if ( debug_level == DEBUGL_NONE ) //<S2SV> return OK ; //<S2SV> if ( ( fh = open ( debug_file , O_RDWR | O_APPEND | O_CREAT | O_NOFOLLOW , S_IRUSR | S_IWUSR ) ) == - 1 ) //<S2SV> return ERROR ; //<S2SV> if ( ( debug_file_fp = fdopen ( fh , "a+" ) ) == NULL ) //<S2SV> return ERROR ; //<S2SV> if ( ( fstat ( fh , & st ) ) == - 1 ) { //<S2SV> debug_file_fp = NULL ; //<S2SV> close ( fh ) ; //<S2SV> return ERROR ; //<S2SV> } //<S2SV> if ( st . st_nlink != 1 || ( st . st_mode & S_IFMT ) != S_IFREG ) { //<S2SV> debug_file_fp = NULL ; //<S2SV> close ( fh ) ; //<S2SV> return ERROR ; //<S2SV> } //<S2SV> ( void ) fcntl ( fh , F_SETFD , FD_CLOEXEC ) ; //<S2SV> return OK ; //<S2SV> } //<S2SV> 