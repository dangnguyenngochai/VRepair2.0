static AVFrame * get_video_buffer ( AVFilterLink * inlink , int w , int h ) //<S2SV> { //<S2SV> PadContext * s = inlink -> dst -> priv ; //<S2SV> AVFrame * frame = ff_get_video_buffer ( inlink -> dst -> outputs [ 0 ] , //<S2SV> w + ( s -> w - s -> in_w ) , //<S2SV> h + ( s -> h - s -> in_h ) ) ; //<S2SV> int plane ; //<S2SV> if ( ! frame ) //<S2SV> return NULL ; //<S2SV> frame -> width = w ; //<S2SV> frame -> height = h ; //<S2SV> for ( plane = 0 ; plane < 4 && frame -> data [ plane ] && frame -> linesize [ plane ] ; plane ++ ) { //<S2SV> int hsub = s -> draw . hsub [ plane ] ; //<S2SV> int vsub = s -> draw . vsub [ plane ] ; //<S2SV> frame -> data [ plane ] += ( s -> x >> hsub ) * s -> draw . pixelstep [ plane ] + //<S2SV> ( s -> y >> vsub ) * frame -> linesize [ plane ] ; //<S2SV> } //<S2SV> return frame ; //<S2SV> } //<S2SV> 