static int sdp_parse_fmtp_config_h264 ( AVFormatContext * s , //<S2SV> AVStream * stream , //<S2SV> PayloadContext * h264_data , //<S2SV> const char * attr , const char * value ) //<S2SV> { //<S2SV> AVCodecParameters * par = stream -> codecpar ; //<S2SV> if ( ! strcmp ( attr , "packetization-mode" ) ) { //<S2SV> av_log ( s , AV_LOG_DEBUG , "RTP<S2SV_blank>Packetization<S2SV_blank>Mode:<S2SV_blank>%d\\n" , atoi ( value ) ) ; //<S2SV> h264_data -> packetization_mode = atoi ( value ) ; //<S2SV> if ( h264_data -> packetization_mode > 1 ) //<S2SV> av_log ( s , AV_LOG_ERROR , //<S2SV> "Interleaved<S2SV_blank>RTP<S2SV_blank>mode<S2SV_blank>is<S2SV_blank>not<S2SV_blank>supported<S2SV_blank>yet.\\n" ) ; //<S2SV> } else if ( ! strcmp ( attr , "profile-level-id" ) ) { //<S2SV> if ( strlen ( value ) == 6 ) //<S2SV> parse_profile_level_id ( s , h264_data , value ) ; //<S2SV> } else if ( ! strcmp ( attr , "sprop-parameter-sets" ) ) { //<S2SV> int ret ; //<S2SV> if ( value [ strlen ( value ) - 1 ] == ',' ) { //<S2SV> av_log ( s , AV_LOG_WARNING , "Missing<S2SV_blank>PPS<S2SV_blank>in<S2SV_blank>sprop-parameter-sets,<S2SV_blank>ignoring\\n" ) ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> par -> extradata_size = 0 ; //<S2SV> av_freep ( & par -> extradata ) ; //<S2SV> ret = ff_h264_parse_sprop_parameter_sets ( s , & par -> extradata , //<S2SV> & par -> extradata_size , value ) ; //<S2SV> av_log ( s , AV_LOG_DEBUG , "Extradata<S2SV_blank>set<S2SV_blank>to<S2SV_blank>%p<S2SV_blank>(size:<S2SV_blank>%d)\\n" , //<S2SV> par -> extradata , par -> extradata_size ) ; //<S2SV> return ret ; //<S2SV> } //<S2SV> return 0 ; //<S2SV> } //<S2SV> 