static int mxf_read_index_entry_array ( AVIOContext * pb , MXFIndexTableSegment * segment ) //<S2SV> { //<S2SV> int i , length ; //<S2SV> segment -> nb_index_entries = avio_rb32 ( pb ) ; //<S2SV> length = avio_rb32 ( pb ) ; //<S2SV> if ( ! ( segment -> temporal_offset_entries = av_calloc ( segment -> nb_index_entries , sizeof ( * segment -> temporal_offset_entries ) ) ) || //<S2SV> ! ( segment -> flag_entries = av_calloc ( segment -> nb_index_entries , sizeof ( * segment -> flag_entries ) ) ) || //<S2SV> ! ( segment -> stream_offset_entries = av_calloc ( segment -> nb_index_entries , sizeof ( * segment -> stream_offset_entries ) ) ) ) { //<S2SV> av_freep ( & segment -> temporal_offset_entries ) ; //<S2SV> av_freep ( & segment -> flag_entries ) ; //<S2SV> return AVERROR ( ENOMEM ) ; //<S2SV> } //<S2SV> for ( i = 0 ; i < segment -> nb_index_entries ; i ++ ) { //<S2SV> segment -> temporal_offset_entries [ i ] = avio_r8 ( pb ) ; //<S2SV> avio_r8 ( pb ) ; //<S2SV> segment -> flag_entries [ i ] = avio_r8 ( pb ) ; //<S2SV> segment -> stream_offset_entries [ i ] = avio_rb64 ( pb ) ; //<S2SV> avio_skip ( pb , length - 11 ) ; //<S2SV> } //<S2SV> return 0 ; //<S2SV> } //<S2SV> 