static uint8_t * extend_raw_data ( LHAFileHeader * * header , //<S2SV> LHAInputStream * stream , //<S2SV> size_t nbytes ) //<S2SV> { //<S2SV> LHAFileHeader * new_header ; //<S2SV> size_t new_raw_len ; //<S2SV> uint8_t * result ; //<S2SV> new_raw_len = RAW_DATA_LEN ( header ) + nbytes ; //<S2SV> new_header = realloc ( * header , sizeof ( LHAFileHeader ) + new_raw_len ) ; //<S2SV> if ( new_header == NULL ) { //<S2SV> return NULL ; //<S2SV> } //<S2SV> * header = new_header ; //<S2SV> new_header -> raw_data = ( uint8_t * ) ( new_header + 1 ) ; //<S2SV> result = new_header -> raw_data + new_header -> raw_data_len ; //<S2SV> if ( ! lha_input_stream_read ( stream , result , nbytes ) ) { //<S2SV> return NULL ; //<S2SV> } //<S2SV> new_header -> raw_data_len = new_raw_len ; //<S2SV> return result ; //<S2SV> } //<S2SV> 