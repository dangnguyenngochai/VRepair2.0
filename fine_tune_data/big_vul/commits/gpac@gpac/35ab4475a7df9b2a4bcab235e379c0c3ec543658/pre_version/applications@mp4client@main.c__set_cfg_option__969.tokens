void set_cfg_option ( char * opt_string ) //<S2SV> { //<S2SV> char * sep , * sep2 , szSec [ 1024 ] , szKey [ 1024 ] , szVal [ 1024 ] ; //<S2SV> sep = strchr ( opt_string , ':' ) ; //<S2SV> if ( ! sep ) { //<S2SV> fprintf ( stderr , "Badly<S2SV_blank>formatted<S2SV_blank>option<S2SV_blank>%s<S2SV_blank>-<S2SV_blank>expected<S2SV_blank>Section:Name=Value\\n" , opt_string ) ; //<S2SV> return ; //<S2SV> } //<S2SV> { //<S2SV> const size_t sepIdx = sep - opt_string ; //<S2SV> strncpy ( szSec , opt_string , sepIdx ) ; //<S2SV> szSec [ sepIdx ] = 0 ; //<S2SV> } //<S2SV> sep ++ ; //<S2SV> sep2 = strchr ( sep , '=' ) ; //<S2SV> if ( ! sep2 ) { //<S2SV> fprintf ( stderr , "Badly<S2SV_blank>formatted<S2SV_blank>option<S2SV_blank>%s<S2SV_blank>-<S2SV_blank>expected<S2SV_blank>Section:Name=Value\\n" , opt_string ) ; //<S2SV> return ; //<S2SV> } //<S2SV> { //<S2SV> const size_t sepIdx = sep2 - sep ; //<S2SV> strncpy ( szKey , sep , sepIdx ) ; //<S2SV> szKey [ sepIdx ] = 0 ; //<S2SV> strcpy ( szVal , sep2 + 1 ) ; //<S2SV> } //<S2SV> if ( ! stricmp ( szKey , "*" ) ) { //<S2SV> if ( stricmp ( szVal , "null" ) ) { //<S2SV> fprintf ( stderr , "Badly<S2SV_blank>formatted<S2SV_blank>option<S2SV_blank>%s<S2SV_blank>-<S2SV_blank>expected<S2SV_blank>Section:*=null\\n" , opt_string ) ; //<S2SV> return ; //<S2SV> } //<S2SV> gf_cfg_del_section ( cfg_file , szSec ) ; //<S2SV> return ; //<S2SV> } //<S2SV> if ( ! stricmp ( szVal , "null" ) ) { //<S2SV> szVal [ 0 ] = 0 ; //<S2SV> } //<S2SV> gf_cfg_set_key ( cfg_file , szSec , szKey , szVal [ 0 ] ? szVal : NULL ) ; //<S2SV> } //<S2SV> 