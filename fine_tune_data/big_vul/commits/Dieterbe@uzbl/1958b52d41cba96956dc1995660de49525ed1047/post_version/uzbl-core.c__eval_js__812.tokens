void //<S2SV> eval_js ( WebKitWebView * web_view , gchar * script , GString * result ) { //<S2SV> WebKitWebFrame * frame ; //<S2SV> JSGlobalContextRef context ; //<S2SV> JSObjectRef globalobject ; //<S2SV> JSStringRef js_script ; //<S2SV> JSValueRef js_result ; //<S2SV> JSStringRef js_result_string ; //<S2SV> size_t js_result_size ; //<S2SV> js_init ( ) ; //<S2SV> frame = webkit_web_view_get_main_frame ( WEBKIT_WEB_VIEW ( web_view ) ) ; //<S2SV> context = webkit_web_frame_get_global_context ( frame ) ; //<S2SV> globalobject = JSContextGetGlobalObject ( context ) ; //<S2SV> js_script = JSStringCreateWithUTF8CString ( script ) ; //<S2SV> js_result = JSEvaluateScript ( context , js_script , globalobject , NULL , 0 , NULL ) ; //<S2SV> if ( js_result && ! JSValueIsUndefined ( context , js_result ) ) { //<S2SV> js_result_string = JSValueToStringCopy ( context , js_result , NULL ) ; //<S2SV> js_result_size = JSStringGetMaximumUTF8CStringSize ( js_result_string ) ; //<S2SV> if ( js_result_size ) { //<S2SV> char js_result_utf8 [ js_result_size ] ; //<S2SV> JSStringGetUTF8CString ( js_result_string , js_result_utf8 , js_result_size ) ; //<S2SV> g_string_assign ( result , js_result_utf8 ) ; //<S2SV> } //<S2SV> JSStringRelease ( js_result_string ) ; //<S2SV> } //<S2SV> JSStringRelease ( js_script ) ; //<S2SV> } //<S2SV> 