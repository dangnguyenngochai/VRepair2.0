SQLITE_PRIVATE void * sqlite3ArrayAllocate ( //<S2SV> sqlite3 * db , //<S2SV> void * pArray , //<S2SV> int szEntry , //<S2SV> int * pnEntry , //<S2SV> int * pIdx //<S2SV> ) { //<S2SV> char * z ; //<S2SV> int n = * pnEntry ; //<S2SV> if ( ( n & ( n - 1 ) ) == 0 ) { //<S2SV> int sz = ( n == 0 ) ? 1 : 2 * n ; //<S2SV> void * pNew = sqlite3DbRealloc ( db , pArray , sz * szEntry ) ; //<S2SV> if ( pNew == 0 ) { //<S2SV> * pIdx = - 1 ; //<S2SV> return pArray ; //<S2SV> } //<S2SV> pArray = pNew ; //<S2SV> } //<S2SV> z = ( char * ) pArray ; //<S2SV> memset ( & z [ n * szEntry ] , 0 , szEntry ) ; //<S2SV> * pIdx = n ; //<S2SV> ++ * pnEntry ; //<S2SV> return pArray ; //<S2SV> } //<S2SV> 