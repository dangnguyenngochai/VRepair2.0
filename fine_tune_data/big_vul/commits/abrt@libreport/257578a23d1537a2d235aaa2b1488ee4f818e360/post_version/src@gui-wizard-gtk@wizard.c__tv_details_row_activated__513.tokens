static void tv_details_row_activated ( //<S2SV> GtkTreeView * tree_view , //<S2SV> GtkTreePath * tree_path_UNUSED , //<S2SV> GtkTreeViewColumn * column , //<S2SV> gpointer user_data ) //<S2SV> { //<S2SV> gchar * item_name ; //<S2SV> struct problem_item * item = get_current_problem_item_or_NULL ( tree_view , & item_name ) ; //<S2SV> if ( ! item || ! ( item -> flags & CD_FLAG_TXT ) ) //<S2SV> goto ret ; //<S2SV> if ( ! strchr ( item -> content , '\\n' ) ) //<S2SV> goto ret ; //<S2SV> gint exitcode ; //<S2SV> gchar * arg [ 3 ] ; //<S2SV> arg [ 0 ] = ( char * ) "xdg-open" ; //<S2SV> arg [ 1 ] = concat_path_file ( g_dump_dir_name , item_name ) ; //<S2SV> arg [ 2 ] = NULL ; //<S2SV> const gboolean spawn_ret = g_spawn_sync ( NULL , arg , NULL , //<S2SV> G_SPAWN_SEARCH_PATH | G_SPAWN_STDOUT_TO_DEV_NULL , //<S2SV> NULL , NULL , NULL , NULL , & exitcode , NULL ) ; //<S2SV> if ( spawn_ret == FALSE || exitcode != EXIT_SUCCESS ) //<S2SV> { //<S2SV> GtkWidget * dialog = gtk_dialog_new_with_buttons ( _ ( "View/edit<S2SV_blank>a<S2SV_blank>text<S2SV_blank>file" ) , //<S2SV> GTK_WINDOW ( g_wnd_assistant ) , //<S2SV> GTK_DIALOG_MODAL | GTK_DIALOG_DESTROY_WITH_PARENT , //<S2SV> NULL , NULL ) ; //<S2SV> GtkWidget * vbox = gtk_dialog_get_content_area ( GTK_DIALOG ( dialog ) ) ; //<S2SV> GtkWidget * scrolled = gtk_scrolled_window_new ( NULL , NULL ) ; //<S2SV> GtkWidget * textview = gtk_text_view_new ( ) ; //<S2SV> gtk_dialog_add_button ( GTK_DIALOG ( dialog ) , _ ( "_Save" ) , GTK_RESPONSE_OK ) ; //<S2SV> gtk_dialog_add_button ( GTK_DIALOG ( dialog ) , _ ( "_Cancel" ) , GTK_RESPONSE_CANCEL ) ; //<S2SV> gtk_box_pack_start ( GTK_BOX ( vbox ) , scrolled , TRUE , TRUE , 0 ) ; //<S2SV> gtk_widget_set_size_request ( scrolled , 640 , 480 ) ; //<S2SV> gtk_widget_show ( scrolled ) ; //<S2SV> # if ( ( GTK_MAJOR_VERSION == 3 && GTK_MINOR_VERSION < 7 ) || ( GTK_MAJOR_VERSION == 3 && GTK_MINOR_VERSION == 7 && GTK_MICRO_VERSION < 8 ) ) //<S2SV> gtk_scrolled_window_add_with_viewport ( GTK_SCROLLED_WINDOW ( scrolled ) , textview ) ; //<S2SV> # else //<S2SV> gtk_container_add ( GTK_CONTAINER ( scrolled ) , textview ) ; //<S2SV> # endif //<S2SV> gtk_widget_show ( textview ) ; //<S2SV> load_text_to_text_view ( GTK_TEXT_VIEW ( textview ) , item_name ) ; //<S2SV> if ( gtk_dialog_run ( GTK_DIALOG ( dialog ) ) == GTK_RESPONSE_OK ) //<S2SV> { //<S2SV> save_text_from_text_view ( GTK_TEXT_VIEW ( textview ) , item_name ) ; //<S2SV> problem_data_reload_from_dump_dir ( ) ; //<S2SV> update_gui_state_from_problem_data ( 0 ) ; //<S2SV> } //<S2SV> gtk_widget_destroy ( textview ) ; //<S2SV> gtk_widget_destroy ( scrolled ) ; //<S2SV> gtk_widget_destroy ( dialog ) ; //<S2SV> } //<S2SV> free ( arg [ 1 ] ) ; //<S2SV> ret : //<S2SV> g_free ( item_name ) ; //<S2SV> } //<S2SV> 