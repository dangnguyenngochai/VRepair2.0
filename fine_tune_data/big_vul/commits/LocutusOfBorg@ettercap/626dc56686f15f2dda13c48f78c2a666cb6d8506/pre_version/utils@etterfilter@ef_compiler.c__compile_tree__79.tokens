size_t compile_tree ( struct filter_op * * fop ) //<S2SV> { //<S2SV> int i = 1 ; //<S2SV> struct filter_op * array = NULL ; //<S2SV> struct unfold_elm * ue ; //<S2SV> BUG_IF ( tree_root == NULL ) ; //<S2SV> fprintf ( stdout , "<S2SV_blank>Unfolding<S2SV_blank>the<S2SV_blank>meta-tree<S2SV_blank>" ) ; //<S2SV> fflush ( stdout ) ; //<S2SV> unfold_blk ( & tree_root ) ; //<S2SV> fprintf ( stdout , "<S2SV_blank>done.\\n\\n" ) ; //<S2SV> labels_to_offsets ( ) ; //<S2SV> TAILQ_FOREACH ( ue , & unfolded_tree , next ) { //<S2SV> if ( ue -> label == 0 ) { //<S2SV> SAFE_REALLOC ( array , i * sizeof ( struct filter_op ) ) ; //<S2SV> memcpy ( & array [ i - 1 ] , & ue -> fop , sizeof ( struct filter_op ) ) ; //<S2SV> i ++ ; //<S2SV> } //<S2SV> } //<S2SV> SAFE_REALLOC ( array , i * sizeof ( struct filter_op ) ) ; //<S2SV> array [ i - 1 ] . opcode = FOP_EXIT ; //<S2SV> * fop = array ; //<S2SV> return ( i ) ; //<S2SV> } //<S2SV> 