krb5_error_code //<S2SV> setup_server_realm ( krb5_principal sprinc ) //<S2SV> { //<S2SV> krb5_error_code kret ; //<S2SV> kdc_realm_t * newrealm ; //<S2SV> kret = 0 ; //<S2SV> if ( kdc_numrealms > 1 ) { //<S2SV> if ( ! ( newrealm = find_realm_data ( sprinc -> realm . data , //<S2SV> ( krb5_ui_4 ) sprinc -> realm . length ) ) ) //<S2SV> kret = ENOENT ; //<S2SV> else //<S2SV> kdc_active_realm = newrealm ; //<S2SV> } //<S2SV> else //<S2SV> kdc_active_realm = kdc_realmlist [ 0 ] ; //<S2SV> return ( kret ) ; //<S2SV> } //<S2SV> 