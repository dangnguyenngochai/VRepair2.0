void //<S2SV> open_log_file ( const char * name , const char * prog , const char * namespace , const char * instance ) //<S2SV> { //<S2SV> char * file_name ; //<S2SV> if ( log_file ) { //<S2SV> fclose ( log_file ) ; //<S2SV> log_file = NULL ; //<S2SV> } //<S2SV> if ( ! name ) //<S2SV> return ; //<S2SV> file_name = make_file_name ( name , prog , namespace , instance ) ; //<S2SV> log_file = fopen ( file_name , "a" ) ; //<S2SV> if ( log_file ) { //<S2SV> int n = fileno ( log_file ) ; //<S2SV> fcntl ( n , F_SETFD , FD_CLOEXEC | fcntl ( n , F_GETFD ) ) ; //<S2SV> fcntl ( n , F_SETFL , O_NONBLOCK | fcntl ( n , F_GETFL ) ) ; //<S2SV> } //<S2SV> FREE ( file_name ) ; //<S2SV> } //<S2SV> 