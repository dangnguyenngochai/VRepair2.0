int //<S2SV> pidfile_write ( const char * pid_file , int pid ) //<S2SV> { //<S2SV> FILE * pidfile = NULL ; //<S2SV> int pidfd = open ( pid_file , O_NOFOLLOW | O_CREAT | O_WRONLY | O_TRUNC , S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH ) ; //<S2SV> if ( pidfd != - 1 ) pidfile = fdopen ( pidfd , "w" ) ; //<S2SV> if ( ! pidfile ) { //<S2SV> log_message ( LOG_INFO , "pidfile_write<S2SV_blank>:<S2SV_blank>Cannot<S2SV_blank>open<S2SV_blank>%s<S2SV_blank>pidfile" , //<S2SV> pid_file ) ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> fprintf ( pidfile , "%d\\n" , pid ) ; //<S2SV> fclose ( pidfile ) ; //<S2SV> return 1 ; //<S2SV> } //<S2SV> 