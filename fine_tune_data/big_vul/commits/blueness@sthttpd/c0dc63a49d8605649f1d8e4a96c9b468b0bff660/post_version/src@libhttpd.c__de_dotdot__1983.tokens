static void //<S2SV> de_dotdot ( char * file ) //<S2SV> { //<S2SV> char * cp ; //<S2SV> char * cp2 ; //<S2SV> int l ; //<S2SV> while ( ( cp = strstr ( file , "//" ) ) != ( char * ) 0 ) //<S2SV> { //<S2SV> for ( cp2 = cp + 2 ; * cp2 == '/' ; ++ cp2 ) //<S2SV> continue ; //<S2SV> ( void ) strcpy ( cp + 1 , cp2 ) ; //<S2SV> } //<S2SV> while ( strncmp ( file , "./" , 2 ) == 0 ) //<S2SV> ( void ) memmove ( file , file + 2 , strlen ( file ) - 1 ) ; //<S2SV> while ( ( cp = strstr ( file , "/./" ) ) != ( char * ) 0 ) //<S2SV> ( void ) memmove ( cp , cp + 2 , strlen ( cp ) - 1 ) ; //<S2SV> for ( ; ; ) //<S2SV> { //<S2SV> while ( strncmp ( file , "../" , 3 ) == 0 ) //<S2SV> ( void ) memmove ( file , file + 3 , strlen ( file ) - 2 ) ; //<S2SV> cp = strstr ( file , "/../" ) ; //<S2SV> if ( cp == ( char * ) 0 ) //<S2SV> break ; //<S2SV> for ( cp2 = cp - 1 ; cp2 >= file && * cp2 != '/' ; -- cp2 ) //<S2SV> continue ; //<S2SV> ( void ) strcpy ( cp2 + 1 , cp + 4 ) ; //<S2SV> } //<S2SV> while ( ( l = strlen ( file ) ) > 3 && //<S2SV> strcmp ( ( cp = file + l - 3 ) , "/.." ) == 0 ) //<S2SV> { //<S2SV> for ( cp2 = cp - 1 ; cp2 >= file && * cp2 != '/' ; -- cp2 ) //<S2SV> continue ; //<S2SV> if ( cp2 < file ) //<S2SV> break ; //<S2SV> * cp2 = '\\0' ; //<S2SV> } //<S2SV> } //<S2SV> 