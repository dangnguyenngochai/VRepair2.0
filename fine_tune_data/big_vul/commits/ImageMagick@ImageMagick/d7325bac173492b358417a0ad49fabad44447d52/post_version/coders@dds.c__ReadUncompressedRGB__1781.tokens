static MagickBooleanType ReadUncompressedRGB ( Image * image , DDSInfo * dds_info , //<S2SV> ExceptionInfo * exception ) //<S2SV> { //<S2SV> PixelPacket //<S2SV> * q ; //<S2SV> ssize_t //<S2SV> x , y ; //<S2SV> unsigned short //<S2SV> color ; //<S2SV> if ( dds_info -> pixelformat . rgb_bitcount == 8 ) //<S2SV> ( void ) SetImageType ( image , GrayscaleType ) ; //<S2SV> else if ( dds_info -> pixelformat . rgb_bitcount == 16 && ! IsBitMask ( //<S2SV> dds_info -> pixelformat , 0xf800 , 0x07e0 , 0x001f , 0x0000 ) ) //<S2SV> ThrowBinaryException ( CorruptImageError , "ImageTypeNotSupported" , //<S2SV> image -> filename ) ; //<S2SV> for ( y = 0 ; y < ( ssize_t ) dds_info -> height ; y ++ ) //<S2SV> { //<S2SV> q = QueueAuthenticPixels ( image , 0 , y , dds_info -> width , 1 , exception ) ; //<S2SV> if ( q == ( PixelPacket * ) NULL ) //<S2SV> return MagickFalse ; //<S2SV> for ( x = 0 ; x < ( ssize_t ) dds_info -> width ; x ++ ) //<S2SV> { //<S2SV> if ( dds_info -> pixelformat . rgb_bitcount == 8 ) //<S2SV> SetPixelGray ( q , ScaleCharToQuantum ( ReadBlobByte ( image ) ) ) ; //<S2SV> else if ( dds_info -> pixelformat . rgb_bitcount == 16 ) //<S2SV> { //<S2SV> color = ReadBlobShort ( image ) ; //<S2SV> SetPixelRed ( q , ScaleCharToQuantum ( ( unsigned char ) //<S2SV> ( ( ( color >> 11 ) / 31.0 ) * 255 ) ) ) ; //<S2SV> SetPixelGreen ( q , ScaleCharToQuantum ( ( unsigned char ) //<S2SV> ( ( ( ( unsigned short ) ( color << 5 ) >> 10 ) / 63.0 ) * 255 ) ) ) ; //<S2SV> SetPixelBlue ( q , ScaleCharToQuantum ( ( unsigned char ) //<S2SV> ( ( ( ( unsigned short ) ( color << 11 ) >> 11 ) / 31.0 ) * 255 ) ) ) ; //<S2SV> } //<S2SV> else //<S2SV> { //<S2SV> SetPixelBlue ( q , ScaleCharToQuantum ( ( unsigned char ) //<S2SV> ReadBlobByte ( image ) ) ) ; //<S2SV> SetPixelGreen ( q , ScaleCharToQuantum ( ( unsigned char ) //<S2SV> ReadBlobByte ( image ) ) ) ; //<S2SV> SetPixelRed ( q , ScaleCharToQuantum ( ( unsigned char ) //<S2SV> ReadBlobByte ( image ) ) ) ; //<S2SV> if ( dds_info -> pixelformat . rgb_bitcount == 32 ) //<S2SV> ( void ) ReadBlobByte ( image ) ; //<S2SV> } //<S2SV> SetPixelAlpha ( q , QuantumRange ) ; //<S2SV> q ++ ; //<S2SV> } //<S2SV> if ( SyncAuthenticPixels ( image , exception ) == MagickFalse ) //<S2SV> return MagickFalse ; //<S2SV> } //<S2SV> return ( SkipRGBMipmaps ( image , dds_info , 3 , exception ) ) ; //<S2SV> } //<S2SV> 