static struct cifsSesInfo * //<S2SV> cifs_find_smb_ses ( struct TCP_Server_Info * server , char * username ) //<S2SV> { //<S2SV> struct list_head * tmp ; //<S2SV> struct cifsSesInfo * ses ; //<S2SV> write_lock ( & cifs_tcp_ses_lock ) ; //<S2SV> list_for_each ( tmp , & server -> smb_ses_list ) { //<S2SV> ses = list_entry ( tmp , struct cifsSesInfo , smb_ses_list ) ; //<S2SV> if ( strncmp ( ses -> userName , username , MAX_USERNAME_SIZE ) ) //<S2SV> continue ; //<S2SV> ++ ses -> ses_count ; //<S2SV> write_unlock ( & cifs_tcp_ses_lock ) ; //<S2SV> return ses ; //<S2SV> } //<S2SV> write_unlock ( & cifs_tcp_ses_lock ) ; //<S2SV> return NULL ; //<S2SV> } //<S2SV> 