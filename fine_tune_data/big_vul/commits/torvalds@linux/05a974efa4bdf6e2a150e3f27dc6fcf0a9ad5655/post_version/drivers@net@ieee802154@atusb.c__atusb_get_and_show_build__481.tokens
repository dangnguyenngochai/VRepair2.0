static int atusb_get_and_show_build ( struct atusb * atusb ) //<S2SV> { //<S2SV> struct usb_device * usb_dev = atusb -> usb_dev ; //<S2SV> char * build ; //<S2SV> int ret ; //<S2SV> build = kmalloc ( ATUSB_BUILD_SIZE + 1 , GFP_KERNEL ) ; //<S2SV> if ( ! build ) //<S2SV> return - ENOMEM ; //<S2SV> ret = atusb_control_msg ( atusb , usb_rcvctrlpipe ( usb_dev , 0 ) , //<S2SV> ATUSB_BUILD , ATUSB_REQ_FROM_DEV , 0 , 0 , //<S2SV> build , ATUSB_BUILD_SIZE , 1000 ) ; //<S2SV> if ( ret >= 0 ) { //<S2SV> build [ ret ] = 0 ; //<S2SV> dev_info ( & usb_dev -> dev , "Firmware:<S2SV_blank>build<S2SV_blank>%s\\n" , build ) ; //<S2SV> } //<S2SV> kfree ( build ) ; //<S2SV> return ret ; //<S2SV> } //<S2SV> 