static void tcp_illinois_info ( struct sock * sk , u32 ext , //<S2SV> struct sk_buff * skb ) //<S2SV> { //<S2SV> const struct illinois * ca = inet_csk_ca ( sk ) ; //<S2SV> if ( ext & ( 1 << ( INET_DIAG_VEGASINFO - 1 ) ) ) { //<S2SV> struct tcpvegas_info info = { //<S2SV> . tcpv_enabled = 1 , //<S2SV> . tcpv_rttcnt = ca -> cnt_rtt , //<S2SV> . tcpv_minrtt = ca -> base_rtt , //<S2SV> } ; //<S2SV> if ( info . tcpv_rttcnt > 0 ) { //<S2SV> u64 t = ca -> sum_rtt ; //<S2SV> do_div ( t , info . tcpv_rttcnt ) ; //<S2SV> info . tcpv_rtt = t ; //<S2SV> } //<S2SV> nla_put ( skb , INET_DIAG_VEGASINFO , sizeof ( info ) , & info ) ; //<S2SV> } //<S2SV> } //<S2SV> 