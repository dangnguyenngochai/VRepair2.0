static unsigned long get_seg_limit ( struct pt_regs * regs , int seg_reg_idx ) //<S2SV> { //<S2SV> struct desc_struct * desc ; //<S2SV> unsigned long limit ; //<S2SV> short sel ; //<S2SV> sel = get_segment_selector ( regs , seg_reg_idx ) ; //<S2SV> if ( sel < 0 ) //<S2SV> return 0 ; //<S2SV> if ( user_64bit_mode ( regs ) || v8086_mode ( regs ) ) //<S2SV> return - 1L ; //<S2SV> if ( ! sel ) //<S2SV> return 0 ; //<S2SV> desc = get_desc ( sel ) ; //<S2SV> if ( ! desc ) //<S2SV> return 0 ; //<S2SV> limit = get_desc_limit ( desc ) ; //<S2SV> if ( desc -> g ) //<S2SV> limit = ( limit << 12 ) + 0xfff ; //<S2SV> return limit ; //<S2SV> } //<S2SV> 