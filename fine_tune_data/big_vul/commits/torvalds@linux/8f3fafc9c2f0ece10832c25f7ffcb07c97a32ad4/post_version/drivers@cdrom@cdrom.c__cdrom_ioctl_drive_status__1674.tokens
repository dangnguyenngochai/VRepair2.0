static int cdrom_ioctl_drive_status ( struct cdrom_device_info * cdi , //<S2SV> unsigned long arg ) //<S2SV> { //<S2SV> cd_dbg ( CD_DO_IOCTL , "entering<S2SV_blank>CDROM_DRIVE_STATUS\\n" ) ; //<S2SV> if ( ! ( cdi -> ops -> capability & CDC_DRIVE_STATUS ) ) //<S2SV> return - ENOSYS ; //<S2SV> if ( ! CDROM_CAN ( CDC_SELECT_DISC ) || //<S2SV> ( arg == CDSL_CURRENT || arg == CDSL_NONE ) ) //<S2SV> return cdi -> ops -> drive_status ( cdi , CDSL_CURRENT ) ; //<S2SV> if ( arg >= cdi -> capacity ) //<S2SV> return - EINVAL ; //<S2SV> return cdrom_slot_status ( cdi , arg ) ; //<S2SV> } //<S2SV> 