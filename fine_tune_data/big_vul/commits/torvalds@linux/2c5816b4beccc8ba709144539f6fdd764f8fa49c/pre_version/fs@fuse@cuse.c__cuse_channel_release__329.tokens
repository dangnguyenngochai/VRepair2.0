static int cuse_channel_release ( struct inode * inode , struct file * file ) //<S2SV> { //<S2SV> struct fuse_dev * fud = file -> private_data ; //<S2SV> struct cuse_conn * cc = fc_to_cc ( fud -> fc ) ; //<S2SV> int rc ; //<S2SV> mutex_lock ( & cuse_lock ) ; //<S2SV> list_del_init ( & cc -> list ) ; //<S2SV> mutex_unlock ( & cuse_lock ) ; //<S2SV> if ( cc -> dev ) //<S2SV> device_unregister ( cc -> dev ) ; //<S2SV> if ( cc -> cdev ) { //<S2SV> unregister_chrdev_region ( cc -> cdev -> dev , 1 ) ; //<S2SV> cdev_del ( cc -> cdev ) ; //<S2SV> } //<S2SV> rc = fuse_dev_release ( inode , file ) ; //<S2SV> return rc ; //<S2SV> } //<S2SV> 