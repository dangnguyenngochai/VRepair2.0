int __ext4_journal_stop ( const char * where , unsigned int line , handle_t * handle ) //<S2SV> { //<S2SV> struct super_block * sb ; //<S2SV> int err ; //<S2SV> int rc ; //<S2SV> if ( ! ext4_handle_valid ( handle ) ) { //<S2SV> ext4_put_nojournal ( handle ) ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> if ( ! handle -> h_transaction ) { //<S2SV> err = jbd2_journal_stop ( handle ) ; //<S2SV> return handle -> h_err ? handle -> h_err : err ; //<S2SV> } //<S2SV> sb = handle -> h_transaction -> t_journal -> j_private ; //<S2SV> err = handle -> h_err ; //<S2SV> rc = jbd2_journal_stop ( handle ) ; //<S2SV> if ( ! err ) //<S2SV> err = rc ; //<S2SV> if ( err ) //<S2SV> __ext4_std_error ( sb , where , line , err ) ; //<S2SV> return err ; //<S2SV> } //<S2SV> 