static int sched_read_attr ( struct sched_attr __user * uattr , //<S2SV> struct sched_attr * attr , //<S2SV> unsigned int usize ) //<S2SV> { //<S2SV> int ret ; //<S2SV> if ( ! access_ok ( VERIFY_WRITE , uattr , usize ) ) //<S2SV> return - EFAULT ; //<S2SV> if ( usize < sizeof ( * attr ) ) { //<S2SV> unsigned char * addr ; //<S2SV> unsigned char * end ; //<S2SV> addr = ( void * ) attr + usize ; //<S2SV> end = ( void * ) attr + sizeof ( * attr ) ; //<S2SV> for ( ; addr < end ; addr ++ ) { //<S2SV> if ( * addr ) //<S2SV> goto err_size ; //<S2SV> } //<S2SV> attr -> size = usize ; //<S2SV> } //<S2SV> ret = copy_to_user ( uattr , attr , usize ) ; //<S2SV> if ( ret ) //<S2SV> return - EFAULT ; //<S2SV> out : //<S2SV> return ret ; //<S2SV> err_size : //<S2SV> ret = - E2BIG ; //<S2SV> goto out ; //<S2SV> } //<S2SV> 