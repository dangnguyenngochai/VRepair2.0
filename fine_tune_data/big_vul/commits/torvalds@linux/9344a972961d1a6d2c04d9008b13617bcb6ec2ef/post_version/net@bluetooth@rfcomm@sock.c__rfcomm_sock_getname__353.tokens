static int rfcomm_sock_getname ( struct socket * sock , struct sockaddr * addr , int * len , int peer ) //<S2SV> { //<S2SV> struct sockaddr_rc * sa = ( struct sockaddr_rc * ) addr ; //<S2SV> struct sock * sk = sock -> sk ; //<S2SV> BT_DBG ( "sock<S2SV_blank>%p,<S2SV_blank>sk<S2SV_blank>%p" , sock , sk ) ; //<S2SV> memset ( sa , 0 , sizeof ( * sa ) ) ; //<S2SV> sa -> rc_family = AF_BLUETOOTH ; //<S2SV> sa -> rc_channel = rfcomm_pi ( sk ) -> channel ; //<S2SV> if ( peer ) //<S2SV> bacpy ( & sa -> rc_bdaddr , & bt_sk ( sk ) -> dst ) ; //<S2SV> else //<S2SV> bacpy ( & sa -> rc_bdaddr , & bt_sk ( sk ) -> src ) ; //<S2SV> * len = sizeof ( struct sockaddr_rc ) ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> 