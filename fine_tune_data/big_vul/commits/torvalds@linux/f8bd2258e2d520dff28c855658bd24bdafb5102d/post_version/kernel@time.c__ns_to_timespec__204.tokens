struct timespec ns_to_timespec ( const s64 nsec ) //<S2SV> { //<S2SV> struct timespec ts ; //<S2SV> s32 rem ; //<S2SV> if ( ! nsec ) //<S2SV> return ( struct timespec ) { 0 , 0 } ; //<S2SV> ts . tv_sec = div_s64_rem ( nsec , NSEC_PER_SEC , & rem ) ; //<S2SV> if ( unlikely ( rem < 0 ) ) { //<S2SV> ts . tv_sec -- ; //<S2SV> rem += NSEC_PER_SEC ; //<S2SV> } //<S2SV> ts . tv_nsec = rem ; //<S2SV> return ts ; //<S2SV> } //<S2SV> 