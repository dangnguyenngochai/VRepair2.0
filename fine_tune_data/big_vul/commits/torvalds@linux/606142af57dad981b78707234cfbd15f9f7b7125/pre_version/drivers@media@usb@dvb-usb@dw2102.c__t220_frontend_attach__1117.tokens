static int t220_frontend_attach ( struct dvb_usb_adapter * d ) //<S2SV> { //<S2SV> u8 obuf [ 3 ] = { 0xe , 0x87 , 0 } ; //<S2SV> u8 ibuf [ ] = { 0 } ; //<S2SV> if ( dvb_usb_generic_rw ( d -> dev , obuf , 3 , ibuf , 1 , 0 ) < 0 ) //<S2SV> err ( "command<S2SV_blank>0x0e<S2SV_blank>transfer<S2SV_blank>failed." ) ; //<S2SV> obuf [ 0 ] = 0xe ; //<S2SV> obuf [ 1 ] = 0x86 ; //<S2SV> obuf [ 2 ] = 1 ; //<S2SV> if ( dvb_usb_generic_rw ( d -> dev , obuf , 3 , ibuf , 1 , 0 ) < 0 ) //<S2SV> err ( "command<S2SV_blank>0x0e<S2SV_blank>transfer<S2SV_blank>failed." ) ; //<S2SV> obuf [ 0 ] = 0xe ; //<S2SV> obuf [ 1 ] = 0x80 ; //<S2SV> obuf [ 2 ] = 0 ; //<S2SV> if ( dvb_usb_generic_rw ( d -> dev , obuf , 3 , ibuf , 1 , 0 ) < 0 ) //<S2SV> err ( "command<S2SV_blank>0x0e<S2SV_blank>transfer<S2SV_blank>failed." ) ; //<S2SV> msleep ( 50 ) ; //<S2SV> obuf [ 0 ] = 0xe ; //<S2SV> obuf [ 1 ] = 0x80 ; //<S2SV> obuf [ 2 ] = 1 ; //<S2SV> if ( dvb_usb_generic_rw ( d -> dev , obuf , 3 , ibuf , 1 , 0 ) < 0 ) //<S2SV> err ( "command<S2SV_blank>0x0e<S2SV_blank>transfer<S2SV_blank>failed." ) ; //<S2SV> obuf [ 0 ] = 0x51 ; //<S2SV> if ( dvb_usb_generic_rw ( d -> dev , obuf , 1 , ibuf , 1 , 0 ) < 0 ) //<S2SV> err ( "command<S2SV_blank>0x51<S2SV_blank>transfer<S2SV_blank>failed." ) ; //<S2SV> d -> fe_adap [ 0 ] . fe = dvb_attach ( cxd2820r_attach , & cxd2820r_config , //<S2SV> & d -> dev -> i2c_adap , NULL ) ; //<S2SV> if ( d -> fe_adap [ 0 ] . fe != NULL ) { //<S2SV> if ( dvb_attach ( tda18271_attach , d -> fe_adap [ 0 ] . fe , 0x60 , //<S2SV> & d -> dev -> i2c_adap , & tda18271_config ) ) { //<S2SV> info ( "Attached<S2SV_blank>TDA18271HD/CXD2820R!" ) ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> } //<S2SV> info ( "Failed<S2SV_blank>to<S2SV_blank>attach<S2SV_blank>TDA18271HD/CXD2820R!" ) ; //<S2SV> return - EIO ; //<S2SV> } //<S2SV> 