void unix_notinflight ( struct file * fp ) //<S2SV> { //<S2SV> struct sock * s = unix_get_socket ( fp ) ; //<S2SV> if ( s ) { //<S2SV> struct unix_sock * u = unix_sk ( s ) ; //<S2SV> spin_lock ( & unix_gc_lock ) ; //<S2SV> BUG_ON ( list_empty ( & u -> link ) ) ; //<S2SV> if ( atomic_long_dec_and_test ( & u -> inflight ) ) //<S2SV> list_del_init ( & u -> link ) ; //<S2SV> unix_tot_inflight -- ; //<S2SV> spin_unlock ( & unix_gc_lock ) ; //<S2SV> } //<S2SV> } //<S2SV> 