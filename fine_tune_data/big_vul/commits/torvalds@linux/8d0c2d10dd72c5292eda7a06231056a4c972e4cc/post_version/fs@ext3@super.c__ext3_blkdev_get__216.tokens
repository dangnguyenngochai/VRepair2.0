static struct block_device * ext3_blkdev_get ( dev_t dev , struct super_block * sb ) //<S2SV> { //<S2SV> struct block_device * bdev ; //<S2SV> char b [ BDEVNAME_SIZE ] ; //<S2SV> bdev = blkdev_get_by_dev ( dev , FMODE_READ | FMODE_WRITE | FMODE_EXCL , sb ) ; //<S2SV> if ( IS_ERR ( bdev ) ) //<S2SV> goto fail ; //<S2SV> return bdev ; //<S2SV> fail : //<S2SV> ext3_msg ( sb , KERN_ERR , "error:<S2SV_blank>failed<S2SV_blank>to<S2SV_blank>open<S2SV_blank>journal<S2SV_blank>device<S2SV_blank>%s:<S2SV_blank>%ld" , //<S2SV> __bdevname ( dev , b ) , PTR_ERR ( bdev ) ) ; //<S2SV> return NULL ; //<S2SV> } //<S2SV> 