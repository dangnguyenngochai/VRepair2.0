void //<S2SV> mwifiex_set_uap_rates ( struct mwifiex_uap_bss_param * bss_cfg , //<S2SV> struct cfg80211_ap_settings * params ) //<S2SV> { //<S2SV> struct ieee_types_header * rate_ie ; //<S2SV> int var_offset = offsetof ( struct ieee80211_mgmt , u . beacon . variable ) ; //<S2SV> const u8 * var_pos = params -> beacon . head + var_offset ; //<S2SV> int len = params -> beacon . head_len - var_offset ; //<S2SV> u8 rate_len = 0 ; //<S2SV> rate_ie = ( void * ) cfg80211_find_ie ( WLAN_EID_SUPP_RATES , var_pos , len ) ; //<S2SV> if ( rate_ie ) { //<S2SV> memcpy ( bss_cfg -> rates , rate_ie + 1 , rate_ie -> len ) ; //<S2SV> rate_len = rate_ie -> len ; //<S2SV> } //<S2SV> rate_ie = ( void * ) cfg80211_find_ie ( WLAN_EID_EXT_SUPP_RATES , //<S2SV> params -> beacon . tail , //<S2SV> params -> beacon . tail_len ) ; //<S2SV> if ( rate_ie ) //<S2SV> memcpy ( bss_cfg -> rates + rate_len , rate_ie + 1 , rate_ie -> len ) ; //<S2SV> return ; //<S2SV> } //<S2SV> 