static void wdm_in_callback ( struct urb * urb ) //<S2SV> { //<S2SV> struct wdm_device * desc = urb -> context ; //<S2SV> int status = urb -> status ; //<S2SV> spin_lock ( & desc -> iuspin ) ; //<S2SV> clear_bit ( WDM_RESPONDING , & desc -> flags ) ; //<S2SV> if ( status ) { //<S2SV> switch ( status ) { //<S2SV> case - ENOENT : //<S2SV> dev_dbg ( & desc -> intf -> dev , //<S2SV> "nonzero<S2SV_blank>urb<S2SV_blank>status<S2SV_blank>received:<S2SV_blank>-ENOENT" ) ; //<S2SV> goto skip_error ; //<S2SV> case - ECONNRESET : //<S2SV> dev_dbg ( & desc -> intf -> dev , //<S2SV> "nonzero<S2SV_blank>urb<S2SV_blank>status<S2SV_blank>received:<S2SV_blank>-ECONNRESET" ) ; //<S2SV> goto skip_error ; //<S2SV> case - ESHUTDOWN : //<S2SV> dev_dbg ( & desc -> intf -> dev , //<S2SV> "nonzero<S2SV_blank>urb<S2SV_blank>status<S2SV_blank>received:<S2SV_blank>-ESHUTDOWN" ) ; //<S2SV> goto skip_error ; //<S2SV> case - EPIPE : //<S2SV> dev_err ( & desc -> intf -> dev , //<S2SV> "nonzero<S2SV_blank>urb<S2SV_blank>status<S2SV_blank>received:<S2SV_blank>-EPIPE\\n" ) ; //<S2SV> break ; //<S2SV> default : //<S2SV> dev_err ( & desc -> intf -> dev , //<S2SV> "Unexpected<S2SV_blank>error<S2SV_blank>%d\\n" , status ) ; //<S2SV> break ; //<S2SV> } //<S2SV> } //<S2SV> desc -> rerr = status ; //<S2SV> desc -> reslength = urb -> actual_length ; //<S2SV> memmove ( desc -> ubuf + desc -> length , desc -> inbuf , desc -> reslength ) ; //<S2SV> desc -> length += desc -> reslength ; //<S2SV> skip_error : //<S2SV> wake_up ( & desc -> wait ) ; //<S2SV> set_bit ( WDM_READ , & desc -> flags ) ; //<S2SV> spin_unlock ( & desc -> iuspin ) ; //<S2SV> } //<S2SV> 