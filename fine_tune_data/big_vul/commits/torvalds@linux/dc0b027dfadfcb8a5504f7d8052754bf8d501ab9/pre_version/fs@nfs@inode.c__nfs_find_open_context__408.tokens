struct nfs_open_context * nfs_find_open_context ( struct inode * inode , struct rpc_cred * cred , int mode ) //<S2SV> { //<S2SV> struct nfs_inode * nfsi = NFS_I ( inode ) ; //<S2SV> struct nfs_open_context * pos , * ctx = NULL ; //<S2SV> spin_lock ( & inode -> i_lock ) ; //<S2SV> list_for_each_entry ( pos , & nfsi -> open_files , list ) { //<S2SV> if ( cred != NULL && pos -> cred != cred ) //<S2SV> continue ; //<S2SV> if ( ( pos -> mode & mode ) == mode ) { //<S2SV> ctx = get_nfs_open_context ( pos ) ; //<S2SV> break ; //<S2SV> } //<S2SV> } //<S2SV> spin_unlock ( & inode -> i_lock ) ; //<S2SV> return ctx ; //<S2SV> } //<S2SV> 