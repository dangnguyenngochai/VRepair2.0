static int pvc_getname ( struct socket * sock , struct sockaddr * sockaddr , //<S2SV> int * sockaddr_len , int peer ) //<S2SV> { //<S2SV> struct sockaddr_atmpvc * addr ; //<S2SV> struct atm_vcc * vcc = ATM_SD ( sock ) ; //<S2SV> if ( ! vcc -> dev || ! test_bit ( ATM_VF_ADDR , & vcc -> flags ) ) //<S2SV> return - ENOTCONN ; //<S2SV> * sockaddr_len = sizeof ( struct sockaddr_atmpvc ) ; //<S2SV> addr = ( struct sockaddr_atmpvc * ) sockaddr ; //<S2SV> addr -> sap_family = AF_ATMPVC ; //<S2SV> addr -> sap_addr . itf = vcc -> dev -> number ; //<S2SV> addr -> sap_addr . vpi = vcc -> vpi ; //<S2SV> addr -> sap_addr . vci = vcc -> vci ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> 