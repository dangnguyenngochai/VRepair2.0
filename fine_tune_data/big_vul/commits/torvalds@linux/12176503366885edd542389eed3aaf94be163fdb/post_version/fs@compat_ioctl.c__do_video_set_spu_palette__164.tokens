static int do_video_set_spu_palette ( unsigned int fd , unsigned int cmd , //<S2SV> struct compat_video_spu_palette __user * up ) //<S2SV> { //<S2SV> struct video_spu_palette __user * up_native ; //<S2SV> compat_uptr_t palp ; //<S2SV> int length , err ; //<S2SV> err = get_user ( palp , & up -> palette ) ; //<S2SV> err |= get_user ( length , & up -> length ) ; //<S2SV> if ( err ) //<S2SV> return - EFAULT ; //<S2SV> up_native = compat_alloc_user_space ( sizeof ( struct video_spu_palette ) ) ; //<S2SV> err = put_user ( compat_ptr ( palp ) , & up_native -> palette ) ; //<S2SV> err |= put_user ( length , & up_native -> length ) ; //<S2SV> if ( err ) //<S2SV> return - EFAULT ; //<S2SV> err = sys_ioctl ( fd , cmd , ( unsigned long ) up_native ) ; //<S2SV> return err ; //<S2SV> } //<S2SV> 