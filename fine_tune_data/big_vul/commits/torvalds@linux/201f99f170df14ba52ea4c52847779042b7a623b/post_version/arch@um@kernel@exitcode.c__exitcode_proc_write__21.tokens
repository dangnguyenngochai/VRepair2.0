static ssize_t exitcode_proc_write ( struct file * file , //<S2SV> const char __user * buffer , size_t count , loff_t * pos ) //<S2SV> { //<S2SV> char * end , buf [ sizeof ( "nnnnn\\0" ) ] ; //<S2SV> size_t size ; //<S2SV> int tmp ; //<S2SV> size = min ( count , sizeof ( buf ) ) ; //<S2SV> if ( copy_from_user ( buf , buffer , size ) ) //<S2SV> return - EFAULT ; //<S2SV> tmp = simple_strtol ( buf , & end , 0 ) ; //<S2SV> if ( ( * end != '\\0' ) && ! isspace ( * end ) ) //<S2SV> return - EINVAL ; //<S2SV> uml_exitcode = tmp ; //<S2SV> return count ; //<S2SV> } //<S2SV> 