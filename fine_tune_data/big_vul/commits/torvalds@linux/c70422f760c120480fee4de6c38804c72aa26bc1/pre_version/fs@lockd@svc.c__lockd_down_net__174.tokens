static void lockd_down_net ( struct svc_serv * serv , struct net * net ) //<S2SV> { //<S2SV> struct lockd_net * ln = net_generic ( net , lockd_net_id ) ; //<S2SV> if ( ln -> nlmsvc_users ) { //<S2SV> if ( -- ln -> nlmsvc_users == 0 ) { //<S2SV> nlm_shutdown_hosts_net ( net ) ; //<S2SV> cancel_delayed_work_sync ( & ln -> grace_period_end ) ; //<S2SV> locks_end_grace ( & ln -> lockd_manager ) ; //<S2SV> svc_shutdown_net ( serv , net ) ; //<S2SV> dprintk ( "lockd_down_net:<S2SV_blank>per-net<S2SV_blank>data<S2SV_blank>destroyed;<S2SV_blank>net=%p\\n" , net ) ; //<S2SV> } //<S2SV> } else { //<S2SV> printk ( KERN_ERR "lockd_down_net:<S2SV_blank>no<S2SV_blank>users!<S2SV_blank>task=%p,<S2SV_blank>net=%p\\n" , //<S2SV> nlmsvc_task , net ) ; //<S2SV> BUG ( ) ; //<S2SV> } //<S2SV> } //<S2SV> 