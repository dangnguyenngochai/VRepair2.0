int perf_config ( config_fn_t fn , void * data ) //<S2SV> { //<S2SV> int ret = 0 , found = 0 ; //<S2SV> const char * home = NULL ; //<S2SV> if ( config_exclusive_filename ) //<S2SV> return perf_config_from_file ( fn , config_exclusive_filename , data ) ; //<S2SV> if ( perf_config_system ( ) && ! access ( perf_etc_perfconfig ( ) , R_OK ) ) { //<S2SV> ret += perf_config_from_file ( fn , perf_etc_perfconfig ( ) , //<S2SV> data ) ; //<S2SV> found += 1 ; //<S2SV> } //<S2SV> home = getenv ( "HOME" ) ; //<S2SV> if ( perf_config_global ( ) && home ) { //<S2SV> char * user_config = strdup ( mkpath ( "%s/.perfconfig" , home ) ) ; //<S2SV> if ( ! access ( user_config , R_OK ) ) { //<S2SV> ret += perf_config_from_file ( fn , user_config , data ) ; //<S2SV> found += 1 ; //<S2SV> } //<S2SV> free ( user_config ) ; //<S2SV> } //<S2SV> if ( found == 0 ) //<S2SV> return - 1 ; //<S2SV> return ret ; //<S2SV> } //<S2SV> 