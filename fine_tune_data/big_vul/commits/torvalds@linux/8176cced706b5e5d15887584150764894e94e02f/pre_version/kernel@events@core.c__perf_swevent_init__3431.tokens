static int perf_swevent_init ( struct perf_event * event ) //<S2SV> { //<S2SV> int event_id = event -> attr . config ; //<S2SV> if ( event -> attr . type != PERF_TYPE_SOFTWARE ) //<S2SV> return - ENOENT ; //<S2SV> if ( has_branch_stack ( event ) ) //<S2SV> return - EOPNOTSUPP ; //<S2SV> switch ( event_id ) { //<S2SV> case PERF_COUNT_SW_CPU_CLOCK : //<S2SV> case PERF_COUNT_SW_TASK_CLOCK : //<S2SV> return - ENOENT ; //<S2SV> default : //<S2SV> break ; //<S2SV> } //<S2SV> if ( event_id >= PERF_COUNT_SW_MAX ) //<S2SV> return - ENOENT ; //<S2SV> if ( ! event -> parent ) { //<S2SV> int err ; //<S2SV> err = swevent_hlist_get ( event ) ; //<S2SV> if ( err ) //<S2SV> return err ; //<S2SV> static_key_slow_inc ( & perf_swevent_enabled [ event_id ] ) ; //<S2SV> event -> destroy = sw_perf_event_destroy ; //<S2SV> } //<S2SV> return 0 ; //<S2SV> } //<S2SV> 