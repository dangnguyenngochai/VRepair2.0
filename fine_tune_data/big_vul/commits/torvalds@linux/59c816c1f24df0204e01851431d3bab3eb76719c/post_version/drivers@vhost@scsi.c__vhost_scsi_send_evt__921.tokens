static void //<S2SV> vhost_scsi_send_evt ( struct vhost_scsi * vs , //<S2SV> struct vhost_scsi_tpg * tpg , //<S2SV> struct se_lun * lun , //<S2SV> u32 event , //<S2SV> u32 reason ) //<S2SV> { //<S2SV> struct vhost_scsi_evt * evt ; //<S2SV> evt = vhost_scsi_allocate_evt ( vs , event , reason ) ; //<S2SV> if ( ! evt ) //<S2SV> return ; //<S2SV> if ( tpg && lun ) { //<S2SV> evt -> event . lun [ 0 ] = 0x01 ; //<S2SV> evt -> event . lun [ 1 ] = tpg -> tport_tpgt ; //<S2SV> if ( lun -> unpacked_lun >= 256 ) //<S2SV> evt -> event . lun [ 2 ] = lun -> unpacked_lun >> 8 | 0x40 ; //<S2SV> evt -> event . lun [ 3 ] = lun -> unpacked_lun & 0xFF ; //<S2SV> } //<S2SV> llist_add ( & evt -> list , & vs -> vs_event_list ) ; //<S2SV> vhost_work_queue ( & vs -> dev , & vs -> vs_event_work ) ; //<S2SV> } //<S2SV> 