static ssize_t aio_setup_vectored_rw ( struct kiocb * kiocb , //<S2SV> int rw , char __user * buf , //<S2SV> unsigned long * nr_segs , //<S2SV> size_t * len , //<S2SV> struct iovec * * iovec , //<S2SV> bool compat , //<S2SV> struct iov_iter * iter ) //<S2SV> { //<S2SV> ssize_t ret ; //<S2SV> * nr_segs = * len ; //<S2SV> # ifdef CONFIG_COMPAT //<S2SV> if ( compat ) //<S2SV> ret = compat_rw_copy_check_uvector ( rw , //<S2SV> ( struct compat_iovec __user * ) buf , //<S2SV> * nr_segs , UIO_FASTIOV , * iovec , iovec ) ; //<S2SV> else //<S2SV> # endif //<S2SV> ret = rw_copy_check_uvector ( rw , //<S2SV> ( struct iovec __user * ) buf , //<S2SV> * nr_segs , UIO_FASTIOV , * iovec , iovec ) ; //<S2SV> if ( ret < 0 ) //<S2SV> return ret ; //<S2SV> * len = ret ; //<S2SV> iov_iter_init ( iter , rw , * iovec , * nr_segs , * len ) ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> 