static int netbk_set_skb_gso ( struct xenvif * vif , //<S2SV> struct sk_buff * skb , //<S2SV> struct xen_netif_extra_info * gso ) //<S2SV> { //<S2SV> if ( ! gso -> u . gso . size ) { //<S2SV> netdev_dbg ( vif -> dev , "GSO<S2SV_blank>size<S2SV_blank>must<S2SV_blank>not<S2SV_blank>be<S2SV_blank>zero.\\n" ) ; //<S2SV> return - EINVAL ; //<S2SV> } //<S2SV> if ( gso -> u . gso . type != XEN_NETIF_GSO_TYPE_TCPV4 ) { //<S2SV> netdev_dbg ( vif -> dev , "Bad<S2SV_blank>GSO<S2SV_blank>type<S2SV_blank>%d.\\n" , gso -> u . gso . type ) ; //<S2SV> return - EINVAL ; //<S2SV> } //<S2SV> skb_shinfo ( skb ) -> gso_size = gso -> u . gso . size ; //<S2SV> skb_shinfo ( skb ) -> gso_type = SKB_GSO_TCPV4 ; //<S2SV> skb_shinfo ( skb ) -> gso_type |= SKB_GSO_DODGY ; //<S2SV> skb_shinfo ( skb ) -> gso_segs = 0 ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> 