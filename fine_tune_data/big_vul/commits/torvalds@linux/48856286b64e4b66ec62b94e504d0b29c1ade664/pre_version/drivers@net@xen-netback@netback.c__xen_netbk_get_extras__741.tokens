static int xen_netbk_get_extras ( struct xenvif * vif , //<S2SV> struct xen_netif_extra_info * extras , //<S2SV> int work_to_do ) //<S2SV> { //<S2SV> struct xen_netif_extra_info extra ; //<S2SV> RING_IDX cons = vif -> tx . req_cons ; //<S2SV> do { //<S2SV> if ( unlikely ( work_to_do -- <= 0 ) ) { //<S2SV> netdev_dbg ( vif -> dev , "Missing<S2SV_blank>extra<S2SV_blank>info\\n" ) ; //<S2SV> return - EBADR ; //<S2SV> } //<S2SV> memcpy ( & extra , RING_GET_REQUEST ( & vif -> tx , cons ) , //<S2SV> sizeof ( extra ) ) ; //<S2SV> if ( unlikely ( ! extra . type || //<S2SV> extra . type >= XEN_NETIF_EXTRA_TYPE_MAX ) ) { //<S2SV> vif -> tx . req_cons = ++ cons ; //<S2SV> netdev_dbg ( vif -> dev , //<S2SV> "Invalid<S2SV_blank>extra<S2SV_blank>type:<S2SV_blank>%d\\n" , extra . type ) ; //<S2SV> return - EINVAL ; //<S2SV> } //<S2SV> memcpy ( & extras [ extra . type - 1 ] , & extra , sizeof ( extra ) ) ; //<S2SV> vif -> tx . req_cons = ++ cons ; //<S2SV> } while ( extra . flags & XEN_NETIF_EXTRA_FLAG_MORE ) ; //<S2SV> return work_to_do ; //<S2SV> } //<S2SV> 