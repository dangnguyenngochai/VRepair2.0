static int follow_dotdot ( struct nameidata * nd ) //<S2SV> { //<S2SV> if ( ! nd -> root . mnt ) //<S2SV> set_root ( nd ) ; //<S2SV> while ( 1 ) { //<S2SV> struct dentry * old = nd -> path . dentry ; //<S2SV> if ( nd -> path . dentry == nd -> root . dentry && //<S2SV> nd -> path . mnt == nd -> root . mnt ) { //<S2SV> break ; //<S2SV> } //<S2SV> if ( nd -> path . dentry != nd -> path . mnt -> mnt_root ) { //<S2SV> nd -> path . dentry = dget_parent ( nd -> path . dentry ) ; //<S2SV> dput ( old ) ; //<S2SV> if ( unlikely ( ! path_connected ( & nd -> path ) ) ) //<S2SV> return - ENOENT ; //<S2SV> break ; //<S2SV> } //<S2SV> if ( ! follow_up ( & nd -> path ) ) //<S2SV> break ; //<S2SV> } //<S2SV> follow_mount ( & nd -> path ) ; //<S2SV> nd -> inode = nd -> path . dentry -> d_inode ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> 