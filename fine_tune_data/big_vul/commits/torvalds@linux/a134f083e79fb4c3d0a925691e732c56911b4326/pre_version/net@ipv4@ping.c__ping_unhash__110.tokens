void ping_unhash ( struct sock * sk ) //<S2SV> { //<S2SV> struct inet_sock * isk = inet_sk ( sk ) ; //<S2SV> pr_debug ( "ping_unhash(isk=%p,isk->num=%u)\\n" , isk , isk -> inet_num ) ; //<S2SV> if ( sk_hashed ( sk ) ) { //<S2SV> write_lock_bh ( & ping_table . lock ) ; //<S2SV> hlist_nulls_del ( & sk -> sk_nulls_node ) ; //<S2SV> sock_put ( sk ) ; //<S2SV> isk -> inet_num = 0 ; //<S2SV> isk -> inet_sport = 0 ; //<S2SV> sock_prot_inuse_add ( sock_net ( sk ) , sk -> sk_prot , - 1 ) ; //<S2SV> write_unlock_bh ( & ping_table . lock ) ; //<S2SV> } //<S2SV> } //<S2SV> 