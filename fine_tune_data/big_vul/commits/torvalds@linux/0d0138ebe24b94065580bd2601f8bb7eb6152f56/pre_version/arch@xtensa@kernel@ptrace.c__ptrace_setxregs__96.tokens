int ptrace_setxregs ( struct task_struct * child , void __user * uregs ) //<S2SV> { //<S2SV> struct thread_info * ti = task_thread_info ( child ) ; //<S2SV> struct pt_regs * regs = task_pt_regs ( child ) ; //<S2SV> elf_xtregs_t * xtregs = uregs ; //<S2SV> int ret = 0 ; //<S2SV> # if XTENSA_HAVE_COPROCESSORS //<S2SV> coprocessor_flush_all ( ti ) ; //<S2SV> coprocessor_release_all ( ti ) ; //<S2SV> ret |= __copy_from_user ( & ti -> xtregs_cp , & xtregs -> cp0 , //<S2SV> sizeof ( xtregs_coprocessor_t ) ) ; //<S2SV> # endif //<S2SV> ret |= __copy_from_user ( & regs -> xtregs_opt , & xtregs -> opt , //<S2SV> sizeof ( xtregs -> opt ) ) ; //<S2SV> ret |= __copy_from_user ( & ti -> xtregs_user , & xtregs -> user , //<S2SV> sizeof ( xtregs -> user ) ) ; //<S2SV> return ret ? - EFAULT : 0 ; //<S2SV> } //<S2SV> 