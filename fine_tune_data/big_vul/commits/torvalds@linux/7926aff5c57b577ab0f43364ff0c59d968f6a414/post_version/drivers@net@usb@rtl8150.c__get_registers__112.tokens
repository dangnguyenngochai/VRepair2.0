static int get_registers ( rtl8150_t * dev , u16 indx , u16 size , void * data ) //<S2SV> { //<S2SV> void * buf ; //<S2SV> int ret ; //<S2SV> buf = kmalloc ( size , GFP_NOIO ) ; //<S2SV> if ( ! buf ) //<S2SV> return - ENOMEM ; //<S2SV> ret = usb_control_msg ( dev -> udev , usb_rcvctrlpipe ( dev -> udev , 0 ) , //<S2SV> RTL8150_REQ_GET_REGS , RTL8150_REQT_READ , //<S2SV> indx , 0 , buf , size , 500 ) ; //<S2SV> if ( ret > 0 && ret <= size ) //<S2SV> memcpy ( data , buf , ret ) ; //<S2SV> kfree ( buf ) ; //<S2SV> return ret ; //<S2SV> } //<S2SV> 