int perf_cpu_time_max_percent_handler ( struct ctl_table * table , int write , //<S2SV> void __user * buffer , size_t * lenp , //<S2SV> loff_t * ppos ) //<S2SV> { //<S2SV> int ret = proc_dointvec_minmax ( table , write , buffer , lenp , ppos ) ; //<S2SV> if ( ret || ! write ) //<S2SV> return ret ; //<S2SV> if ( sysctl_perf_cpu_time_max_percent == 100 || //<S2SV> sysctl_perf_cpu_time_max_percent == 0 ) { //<S2SV> printk ( KERN_WARNING //<S2SV> "perf:<S2SV_blank>Dynamic<S2SV_blank>interrupt<S2SV_blank>throttling<S2SV_blank>disabled,<S2SV_blank>can<S2SV_blank>hang<S2SV_blank>your<S2SV_blank>system!\\n" ) ; //<S2SV> WRITE_ONCE ( perf_sample_allowed_ns , 0 ) ; //<S2SV> } else { //<S2SV> update_perf_cpu_limits ( ) ; //<S2SV> } //<S2SV> return 0 ; //<S2SV> } //<S2SV> 