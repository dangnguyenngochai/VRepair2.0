void snd_pcm_period_elapsed ( struct snd_pcm_substream * substream ) //<S2SV> { //<S2SV> struct snd_pcm_runtime * runtime ; //<S2SV> unsigned long flags ; //<S2SV> if ( PCM_RUNTIME_CHECK ( substream ) ) //<S2SV> return ; //<S2SV> runtime = substream -> runtime ; //<S2SV> snd_pcm_stream_lock_irqsave ( substream , flags ) ; //<S2SV> if ( ! snd_pcm_running ( substream ) || //<S2SV> snd_pcm_update_hw_ptr0 ( substream , 1 ) < 0 ) //<S2SV> goto _end ; //<S2SV> # ifdef CONFIG_SND_PCM_TIMER //<S2SV> if ( substream -> timer_running ) //<S2SV> snd_timer_interrupt ( substream -> timer , 1 ) ; //<S2SV> # endif //<S2SV> _end : //<S2SV> snd_pcm_stream_unlock_irqrestore ( substream , flags ) ; //<S2SV> kill_fasync ( & runtime -> fasync , SIGIO , POLL_IN ) ; //<S2SV> } //<S2SV> 