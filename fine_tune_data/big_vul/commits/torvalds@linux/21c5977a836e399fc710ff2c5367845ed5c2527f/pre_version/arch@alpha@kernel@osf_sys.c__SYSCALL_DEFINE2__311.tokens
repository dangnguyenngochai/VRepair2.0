SYSCALL_DEFINE2 ( osf_getdomainname , char __user * , name , int , namelen ) //<S2SV> { //<S2SV> unsigned len ; //<S2SV> int i ; //<S2SV> if ( ! access_ok ( VERIFY_WRITE , name , namelen ) ) //<S2SV> return - EFAULT ; //<S2SV> len = namelen ; //<S2SV> if ( namelen > 32 ) //<S2SV> len = 32 ; //<S2SV> down_read ( & uts_sem ) ; //<S2SV> for ( i = 0 ; i < len ; ++ i ) { //<S2SV> __put_user ( utsname ( ) -> domainname [ i ] , name + i ) ; //<S2SV> if ( utsname ( ) -> domainname [ i ] == '\\0' ) //<S2SV> break ; //<S2SV> } //<S2SV> up_read ( & uts_sem ) ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> 