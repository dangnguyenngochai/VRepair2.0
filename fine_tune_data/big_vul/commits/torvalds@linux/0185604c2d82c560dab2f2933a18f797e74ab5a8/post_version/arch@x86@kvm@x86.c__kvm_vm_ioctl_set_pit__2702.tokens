static int kvm_vm_ioctl_set_pit ( struct kvm * kvm , struct kvm_pit_state * ps ) //<S2SV> { //<S2SV> int i ; //<S2SV> mutex_lock ( & kvm -> arch . vpit -> pit_state . lock ) ; //<S2SV> memcpy ( & kvm -> arch . vpit -> pit_state , ps , sizeof ( struct kvm_pit_state ) ) ; //<S2SV> for ( i = 0 ; i < 3 ; i ++ ) //<S2SV> kvm_pit_load_count ( kvm , i , ps -> channels [ i ] . count , 0 ) ; //<S2SV> mutex_unlock ( & kvm -> arch . vpit -> pit_state . lock ) ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> 