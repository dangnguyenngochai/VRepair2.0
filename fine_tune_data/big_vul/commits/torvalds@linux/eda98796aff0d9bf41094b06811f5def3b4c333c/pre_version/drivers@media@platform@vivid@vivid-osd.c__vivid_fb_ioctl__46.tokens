static int vivid_fb_ioctl ( struct fb_info * info , unsigned cmd , unsigned long arg ) //<S2SV> { //<S2SV> struct vivid_dev * dev = ( struct vivid_dev * ) info -> par ; //<S2SV> switch ( cmd ) { //<S2SV> case FBIOGET_VBLANK : { //<S2SV> struct fb_vblank vblank ; //<S2SV> vblank . flags = FB_VBLANK_HAVE_COUNT | FB_VBLANK_HAVE_VCOUNT | //<S2SV> FB_VBLANK_HAVE_VSYNC ; //<S2SV> vblank . count = 0 ; //<S2SV> vblank . vcount = 0 ; //<S2SV> vblank . hcount = 0 ; //<S2SV> if ( copy_to_user ( ( void __user * ) arg , & vblank , sizeof ( vblank ) ) ) //<S2SV> return - EFAULT ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> default : //<S2SV> dprintk ( dev , 1 , "Unknown<S2SV_blank>ioctl<S2SV_blank>%08x\\n" , cmd ) ; //<S2SV> return - EINVAL ; //<S2SV> } //<S2SV> return 0 ; //<S2SV> } //<S2SV> 