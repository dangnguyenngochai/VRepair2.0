struct mapped_device * dm_get_from_kobject ( struct kobject * kobj ) //<S2SV> { //<S2SV> struct mapped_device * md ; //<S2SV> md = container_of ( kobj , struct mapped_device , kobj_holder . kobj ) ; //<S2SV> spin_lock ( & _minor_lock ) ; //<S2SV> if ( test_bit ( DMF_FREEING , & md -> flags ) || dm_deleting_md ( md ) ) { //<S2SV> md = NULL ; //<S2SV> goto out ; //<S2SV> } //<S2SV> dm_get ( md ) ; //<S2SV> out : //<S2SV> spin_unlock ( & _minor_lock ) ; //<S2SV> return md ; //<S2SV> } //<S2SV> 