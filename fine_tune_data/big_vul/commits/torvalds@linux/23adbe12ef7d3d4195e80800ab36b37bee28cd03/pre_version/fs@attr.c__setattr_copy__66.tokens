void setattr_copy ( struct inode * inode , const struct iattr * attr ) //<S2SV> { //<S2SV> unsigned int ia_valid = attr -> ia_valid ; //<S2SV> if ( ia_valid & ATTR_UID ) //<S2SV> inode -> i_uid = attr -> ia_uid ; //<S2SV> if ( ia_valid & ATTR_GID ) //<S2SV> inode -> i_gid = attr -> ia_gid ; //<S2SV> if ( ia_valid & ATTR_ATIME ) //<S2SV> inode -> i_atime = timespec_trunc ( attr -> ia_atime , //<S2SV> inode -> i_sb -> s_time_gran ) ; //<S2SV> if ( ia_valid & ATTR_MTIME ) //<S2SV> inode -> i_mtime = timespec_trunc ( attr -> ia_mtime , //<S2SV> inode -> i_sb -> s_time_gran ) ; //<S2SV> if ( ia_valid & ATTR_CTIME ) //<S2SV> inode -> i_ctime = timespec_trunc ( attr -> ia_ctime , //<S2SV> inode -> i_sb -> s_time_gran ) ; //<S2SV> if ( ia_valid & ATTR_MODE ) { //<S2SV> umode_t mode = attr -> ia_mode ; //<S2SV> if ( ! in_group_p ( inode -> i_gid ) && //<S2SV> ! inode_capable ( inode , CAP_FSETID ) ) //<S2SV> mode &= ~ S_ISGID ; //<S2SV> inode -> i_mode = mode ; //<S2SV> } //<S2SV> } //<S2SV> 