int __usb_get_extra_descriptor ( char * buffer , unsigned size , //<S2SV> unsigned char type , void * * ptr ) //<S2SV> { //<S2SV> struct usb_descriptor_header * header ; //<S2SV> while ( size >= sizeof ( struct usb_descriptor_header ) ) { //<S2SV> header = ( struct usb_descriptor_header * ) buffer ; //<S2SV> if ( header -> bLength < 2 ) { //<S2SV> printk ( KERN_ERR //<S2SV> "%s:<S2SV_blank>bogus<S2SV_blank>descriptor,<S2SV_blank>type<S2SV_blank>%d<S2SV_blank>length<S2SV_blank>%d\\n" , //<S2SV> usbcore_name , //<S2SV> header -> bDescriptorType , //<S2SV> header -> bLength ) ; //<S2SV> return - 1 ; //<S2SV> } //<S2SV> if ( header -> bDescriptorType == type ) { //<S2SV> * ptr = header ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> buffer += header -> bLength ; //<S2SV> size -= header -> bLength ; //<S2SV> } //<S2SV> return - 1 ; //<S2SV> } //<S2SV> 