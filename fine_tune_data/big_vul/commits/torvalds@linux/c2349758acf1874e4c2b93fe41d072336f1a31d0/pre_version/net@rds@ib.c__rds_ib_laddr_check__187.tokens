static int rds_ib_laddr_check ( __be32 addr ) //<S2SV> { //<S2SV> int ret ; //<S2SV> struct rdma_cm_id * cm_id ; //<S2SV> struct sockaddr_in sin ; //<S2SV> cm_id = rdma_create_id ( NULL , NULL , RDMA_PS_TCP , IB_QPT_RC ) ; //<S2SV> if ( IS_ERR ( cm_id ) ) //<S2SV> return PTR_ERR ( cm_id ) ; //<S2SV> memset ( & sin , 0 , sizeof ( sin ) ) ; //<S2SV> sin . sin_family = AF_INET ; //<S2SV> sin . sin_addr . s_addr = addr ; //<S2SV> ret = rdma_bind_addr ( cm_id , ( struct sockaddr * ) & sin ) ; //<S2SV> if ( ret || cm_id -> device -> node_type != RDMA_NODE_IB_CA ) //<S2SV> ret = - EADDRNOTAVAIL ; //<S2SV> rdsdebug ( "addr<S2SV_blank>%pI4<S2SV_blank>ret<S2SV_blank>%d<S2SV_blank>node<S2SV_blank>type<S2SV_blank>%d\\n" , //<S2SV> & addr , ret , //<S2SV> cm_id -> device ? cm_id -> device -> node_type : - 1 ) ; //<S2SV> rdma_destroy_id ( cm_id ) ; //<S2SV> return ret ; //<S2SV> } //<S2SV> 