int rds_rdma_extra_size ( struct rds_rdma_args * args ) //<S2SV> { //<S2SV> struct rds_iovec vec ; //<S2SV> struct rds_iovec __user * local_vec ; //<S2SV> int tot_pages = 0 ; //<S2SV> unsigned int nr_pages ; //<S2SV> unsigned int i ; //<S2SV> local_vec = ( struct rds_iovec __user * ) ( unsigned long ) args -> local_vec_addr ; //<S2SV> for ( i = 0 ; i < args -> nr_local ; i ++ ) { //<S2SV> if ( copy_from_user ( & vec , & local_vec [ i ] , //<S2SV> sizeof ( struct rds_iovec ) ) ) //<S2SV> return - EFAULT ; //<S2SV> nr_pages = rds_pages_in_vec ( & vec ) ; //<S2SV> if ( nr_pages == 0 ) //<S2SV> return - EINVAL ; //<S2SV> tot_pages += nr_pages ; //<S2SV> if ( tot_pages < 0 ) //<S2SV> return - EINVAL ; //<S2SV> } //<S2SV> return tot_pages * sizeof ( struct scatterlist ) ; //<S2SV> } //<S2SV> 