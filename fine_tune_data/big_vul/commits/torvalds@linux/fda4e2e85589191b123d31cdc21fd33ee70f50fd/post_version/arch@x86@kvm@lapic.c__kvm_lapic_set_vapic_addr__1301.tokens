int kvm_lapic_set_vapic_addr ( struct kvm_vcpu * vcpu , gpa_t vapic_addr ) //<S2SV> { //<S2SV> if ( vapic_addr ) { //<S2SV> if ( kvm_gfn_to_hva_cache_init ( vcpu -> kvm , //<S2SV> & vcpu -> arch . apic -> vapic_cache , //<S2SV> vapic_addr , sizeof ( u32 ) ) ) //<S2SV> return - EINVAL ; //<S2SV> __set_bit ( KVM_APIC_CHECK_VAPIC , & vcpu -> arch . apic_attention ) ; //<S2SV> } else { //<S2SV> __clear_bit ( KVM_APIC_CHECK_VAPIC , & vcpu -> arch . apic_attention ) ; //<S2SV> } //<S2SV> vcpu -> arch . apic -> vapic_addr = vapic_addr ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> 