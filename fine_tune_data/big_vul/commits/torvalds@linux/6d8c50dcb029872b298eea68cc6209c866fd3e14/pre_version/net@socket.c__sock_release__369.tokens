void sock_release ( struct socket * sock ) //<S2SV> { //<S2SV> if ( sock -> ops ) { //<S2SV> struct module * owner = sock -> ops -> owner ; //<S2SV> sock -> ops -> release ( sock ) ; //<S2SV> sock -> ops = NULL ; //<S2SV> module_put ( owner ) ; //<S2SV> } //<S2SV> if ( rcu_dereference_protected ( sock -> wq , 1 ) -> fasync_list ) //<S2SV> pr_err ( "%s:<S2SV_blank>fasync<S2SV_blank>list<S2SV_blank>not<S2SV_blank>empty!\\n" , __func__ ) ; //<S2SV> if ( ! sock -> file ) { //<S2SV> iput ( SOCK_INODE ( sock ) ) ; //<S2SV> return ; //<S2SV> } //<S2SV> sock -> file = NULL ; //<S2SV> } //<S2SV> 