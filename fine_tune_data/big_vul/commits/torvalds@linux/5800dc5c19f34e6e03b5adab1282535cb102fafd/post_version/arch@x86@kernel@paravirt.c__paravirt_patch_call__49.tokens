unsigned paravirt_patch_call ( void * insnbuf , //<S2SV> const void * target , u16 tgt_clobbers , //<S2SV> unsigned long addr , u16 site_clobbers , //<S2SV> unsigned len ) //<S2SV> { //<S2SV> struct branch * b = insnbuf ; //<S2SV> unsigned long delta = ( unsigned long ) target - ( addr + 5 ) ; //<S2SV> if ( len < 5 ) { //<S2SV> # ifdef CONFIG_RETPOLINE //<S2SV> WARN_ONCE ( "Failing<S2SV_blank>to<S2SV_blank>patch<S2SV_blank>indirect<S2SV_blank>CALL<S2SV_blank>in<S2SV_blank>%ps\\n" , ( void * ) addr ) ; //<S2SV> # endif //<S2SV> return len ; //<S2SV> } //<S2SV> b -> opcode = 0xe8 ; //<S2SV> b -> delta = delta ; //<S2SV> BUILD_BUG_ON ( sizeof ( * b ) != 5 ) ; //<S2SV> return 5 ; //<S2SV> } //<S2SV> 