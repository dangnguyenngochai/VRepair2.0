static int override_release ( char __user * release , int len ) //<S2SV> { //<S2SV> int ret = 0 ; //<S2SV> char buf [ 65 ] ; //<S2SV> if ( current -> personality & UNAME26 ) { //<S2SV> char * rest = UTS_RELEASE ; //<S2SV> int ndots = 0 ; //<S2SV> unsigned v ; //<S2SV> while ( * rest ) { //<S2SV> if ( * rest == '.' && ++ ndots >= 3 ) //<S2SV> break ; //<S2SV> if ( ! isdigit ( * rest ) && * rest != '.' ) //<S2SV> break ; //<S2SV> rest ++ ; //<S2SV> } //<S2SV> v = ( ( LINUX_VERSION_CODE >> 8 ) & 0xff ) + 40 ; //<S2SV> snprintf ( buf , len , "2.6.%u%s" , v , rest ) ; //<S2SV> ret = copy_to_user ( release , buf , len ) ; //<S2SV> } //<S2SV> return ret ; //<S2SV> } //<S2SV> 