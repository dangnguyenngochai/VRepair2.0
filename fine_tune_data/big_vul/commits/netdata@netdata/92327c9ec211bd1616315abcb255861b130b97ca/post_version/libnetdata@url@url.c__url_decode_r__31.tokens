char * url_decode_r ( char * to , char * url , size_t size ) { //<S2SV> char * s = url , //<S2SV> * d = to , //<S2SV> * e = & to [ size - 1 ] ; //<S2SV> while ( * s && d < e ) { //<S2SV> if ( unlikely ( * s == '%' ) ) { //<S2SV> if ( likely ( s [ 1 ] && s [ 2 ] ) ) { //<S2SV> char t = from_hex ( s [ 1 ] ) << 4 | from_hex ( s [ 2 ] ) ; //<S2SV> * d ++ = ( char ) ( ( isprint ( t ) ) ? t : '<S2SV_blank>' ) ; //<S2SV> s += 2 ; //<S2SV> } //<S2SV> } //<S2SV> else if ( unlikely ( * s == '+' ) ) //<S2SV> * d ++ = '<S2SV_blank>' ; //<S2SV> else //<S2SV> * d ++ = * s ; //<S2SV> s ++ ; //<S2SV> } //<S2SV> * d = '\\0' ; //<S2SV> return to ; //<S2SV> } //<S2SV> 