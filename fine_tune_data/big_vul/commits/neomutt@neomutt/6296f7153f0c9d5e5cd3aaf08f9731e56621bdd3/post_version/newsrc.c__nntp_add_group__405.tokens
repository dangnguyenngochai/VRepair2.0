int nntp_add_group ( char * line , void * data ) //<S2SV> { //<S2SV> struct NntpServer * nserv = data ; //<S2SV> struct NntpData * nntp_data = NULL ; //<S2SV> char group [ LONG_STRING ] = "" ; //<S2SV> char desc [ HUGE_STRING ] = "" ; //<S2SV> char mod ; //<S2SV> anum_t first , last ; //<S2SV> if ( ! nserv || ! line ) //<S2SV> return 0 ; //<S2SV> if ( sscanf ( line , "%1023s<S2SV_blank>" ANUM "<S2SV_blank>" ANUM "<S2SV_blank>%c<S2SV_blank>%8191[^\\n]" , group , & last , & first , & mod , desc ) < 4 ) //<S2SV> { //<S2SV> mutt_debug ( 4 , "Cannot<S2SV_blank>parse<S2SV_blank>server<S2SV_blank>line:<S2SV_blank>%s\\n" , line ) ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> nntp_data = nntp_data_find ( nserv , group ) ; //<S2SV> nntp_data -> deleted = false ; //<S2SV> nntp_data -> first_message = first ; //<S2SV> nntp_data -> last_message = last ; //<S2SV> nntp_data -> allowed = ( mod == 'y' ) || ( mod == 'm' ) ; //<S2SV> mutt_str_replace ( & nntp_data -> desc , desc ) ; //<S2SV> if ( nntp_data -> newsrc_ent || nntp_data -> last_cached ) //<S2SV> nntp_group_unread_stat ( nntp_data ) ; //<S2SV> else if ( nntp_data -> last_message && nntp_data -> first_message <= nntp_data -> last_message ) //<S2SV> nntp_data -> unread = nntp_data -> last_message - nntp_data -> first_message + 1 ; //<S2SV> else //<S2SV> nntp_data -> unread = 0 ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> 