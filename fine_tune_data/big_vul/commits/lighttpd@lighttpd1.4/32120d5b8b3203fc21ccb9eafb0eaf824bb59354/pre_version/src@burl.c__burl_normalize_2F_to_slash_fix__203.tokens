static int burl_normalize_2F_to_slash_fix ( buffer * b , int qs , int i ) //<S2SV> { //<S2SV> char * const s = b -> ptr ; //<S2SV> const int blen = ( int ) buffer_string_length ( b ) ; //<S2SV> const int used = qs < 0 ? blen : qs ; //<S2SV> int j = i ; //<S2SV> for ( ; i < used ; ++ i , ++ j ) { //<S2SV> s [ j ] = s [ i ] ; //<S2SV> if ( s [ i ] == '%' && s [ i + 1 ] == '2' && s [ i + 2 ] == 'F' ) { //<S2SV> s [ j ] = '/' ; //<S2SV> i += 2 ; //<S2SV> } //<S2SV> } //<S2SV> if ( qs >= 0 ) { //<S2SV> memmove ( s + j , s + qs , blen - qs ) ; //<S2SV> j += blen - qs ; //<S2SV> } //<S2SV> buffer_string_set_length ( b , j ) ; //<S2SV> return qs ; //<S2SV> } //<S2SV> 