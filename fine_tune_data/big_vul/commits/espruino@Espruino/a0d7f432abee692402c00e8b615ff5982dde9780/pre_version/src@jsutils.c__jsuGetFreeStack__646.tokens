size_t jsuGetFreeStack ( ) { //<S2SV> # ifdef ARM //<S2SV> void * frame = __builtin_frame_address ( 0 ) ; //<S2SV> size_t stackPos = ( size_t ) ( ( char * ) frame ) ; //<S2SV> size_t stackEnd = ( size_t ) ( ( char * ) & LINKER_END_VAR ) ; //<S2SV> if ( stackPos < stackEnd ) return 0 ; //<S2SV> return stackPos - stackEnd ; //<S2SV> # elif defined ( LINUX ) //<S2SV> char ptr ; //<S2SV> extern void * STACK_BASE ; //<S2SV> uint32_t count = ( uint32_t ) ( ( size_t ) STACK_BASE - ( size_t ) & ptr ) ; //<S2SV> return 1000000 - count ; //<S2SV> # else //<S2SV> return 1000000 ; //<S2SV> # endif //<S2SV> } //<S2SV> 