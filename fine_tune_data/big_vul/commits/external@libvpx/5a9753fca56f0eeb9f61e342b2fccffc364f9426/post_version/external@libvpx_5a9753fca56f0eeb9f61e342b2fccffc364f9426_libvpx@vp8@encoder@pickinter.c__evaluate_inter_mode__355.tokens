static int evaluate_inter_mode ( unsigned int * sse , int rate2 , int * distortion2 , //<S2SV> VP8_COMP * cpi , MACROBLOCK * x , int rd_adj ) //<S2SV> { //<S2SV> MB_PREDICTION_MODE this_mode = x -> e_mbd . mode_info_context -> mbmi . mode ; //<S2SV> int_mv mv = x -> e_mbd . mode_info_context -> mbmi . mv ; //<S2SV> int this_rd ; //<S2SV> int denoise_aggressive = 0 ; //<S2SV> if ( cpi -> active_map_enabled && x -> active_ptr [ 0 ] == 0 ) //<S2SV> { //<S2SV> * sse = 0 ; //<S2SV> * distortion2 = 0 ; //<S2SV> x -> skip = 1 ; //<S2SV> return INT_MAX ; //<S2SV> } //<S2SV> if ( ( this_mode != NEWMV ) || //<S2SV> ! ( cpi -> sf . half_pixel_search ) || cpi -> common . full_pixel == 1 ) //<S2SV> * distortion2 = vp8_get_inter_mbpred_error ( x , //<S2SV> & cpi -> fn_ptr [ BLOCK_16X16 ] , //<S2SV> sse , mv ) ; //<S2SV> this_rd = RDCOST ( x -> rdmult , x -> rddiv , rate2 , * distortion2 ) ; //<S2SV> # if CONFIG_TEMPORAL_DENOISING //<S2SV> if ( cpi -> oxcf . noise_sensitivity > 0 ) { //<S2SV> denoise_aggressive = //<S2SV> ( cpi -> denoiser . denoiser_mode == kDenoiserOnYUVAggressive ) ? 1 : 0 ; //<S2SV> } //<S2SV> # endif //<S2SV> if ( ! cpi -> oxcf . screen_content_mode && //<S2SV> this_mode == ZEROMV && //<S2SV> x -> e_mbd . mode_info_context -> mbmi . ref_frame == LAST_FRAME && //<S2SV> ( denoise_aggressive || ( cpi -> closest_reference_frame == LAST_FRAME ) ) ) //<S2SV> { //<S2SV> if ( x -> is_skin ) //<S2SV> rd_adj = 100 ; //<S2SV> this_rd = ( ( int64_t ) this_rd ) * rd_adj / 100 ; //<S2SV> } //<S2SV> check_for_encode_breakout ( * sse , x ) ; //<S2SV> return this_rd ; //<S2SV> } //<S2SV> 