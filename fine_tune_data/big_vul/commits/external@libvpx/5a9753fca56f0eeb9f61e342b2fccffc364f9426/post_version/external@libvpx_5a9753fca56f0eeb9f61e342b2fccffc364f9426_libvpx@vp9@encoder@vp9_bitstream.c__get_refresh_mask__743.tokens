static int get_refresh_mask ( VP9_COMP * cpi ) { //<S2SV> if ( vp9_preserve_existing_gf ( cpi ) ) { //<S2SV> return ( cpi -> refresh_last_frame << cpi -> lst_fb_idx ) | //<S2SV> ( cpi -> refresh_golden_frame << cpi -> alt_fb_idx ) ; //<S2SV> } else { //<S2SV> int arf_idx = cpi -> alt_fb_idx ; //<S2SV> if ( ( cpi -> oxcf . pass == 2 ) && cpi -> multi_arf_allowed ) { //<S2SV> const GF_GROUP * const gf_group = & cpi -> twopass . gf_group ; //<S2SV> arf_idx = gf_group -> arf_update_idx [ gf_group -> index ] ; //<S2SV> } //<S2SV> return ( cpi -> refresh_last_frame << cpi -> lst_fb_idx ) | //<S2SV> ( cpi -> refresh_golden_frame << cpi -> gld_fb_idx ) | //<S2SV> ( cpi -> refresh_alt_ref_frame << arf_idx ) ; //<S2SV> } //<S2SV> } //<S2SV> 