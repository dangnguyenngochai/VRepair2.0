static void update_layer_buffer_level ( SVC * svc , int encoded_frame_size ) { //<S2SV> int i = 0 ; //<S2SV> int current_temporal_layer = svc -> temporal_layer_id ; //<S2SV> for ( i = current_temporal_layer + 1 ; //<S2SV> i < svc -> number_temporal_layers ; ++ i ) { //<S2SV> const int layer = LAYER_IDS_TO_IDX ( svc -> spatial_layer_id , i , //<S2SV> svc -> number_temporal_layers ) ; //<S2SV> LAYER_CONTEXT * lc = & svc -> layer_context [ layer ] ; //<S2SV> RATE_CONTROL * lrc = & lc -> rc ; //<S2SV> int bits_off_for_this_layer = ( int ) ( lc -> target_bandwidth / lc -> framerate - //<S2SV> encoded_frame_size ) ; //<S2SV> lrc -> bits_off_target += bits_off_for_this_layer ; //<S2SV> lrc -> bits_off_target = MIN ( lrc -> bits_off_target , lrc -> maximum_buffer_size ) ; //<S2SV> lrc -> buffer_level = lrc -> bits_off_target ; //<S2SV> } //<S2SV> } //<S2SV> 