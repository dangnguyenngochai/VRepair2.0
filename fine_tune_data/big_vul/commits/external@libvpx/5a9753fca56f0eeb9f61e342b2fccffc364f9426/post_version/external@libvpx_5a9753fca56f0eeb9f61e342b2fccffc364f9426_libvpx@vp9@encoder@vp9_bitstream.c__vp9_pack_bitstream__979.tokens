void vp9_pack_bitstream ( VP9_COMP * cpi , uint8_t * dest , size_t * size ) { //<S2SV> uint8_t * data = dest ; //<S2SV> size_t first_part_size , uncompressed_hdr_size ; //<S2SV> struct vpx_write_bit_buffer wb = { data , 0 } ; //<S2SV> struct vpx_write_bit_buffer saved_wb ; //<S2SV> write_uncompressed_header ( cpi , & wb ) ; //<S2SV> saved_wb = wb ; //<S2SV> vpx_wb_write_literal ( & wb , 0 , 16 ) ; //<S2SV> uncompressed_hdr_size = vpx_wb_bytes_written ( & wb ) ; //<S2SV> data += uncompressed_hdr_size ; //<S2SV> vpx_clear_system_state ( ) ; //<S2SV> first_part_size = write_compressed_header ( cpi , data ) ; //<S2SV> data += first_part_size ; //<S2SV> vpx_wb_write_literal ( & saved_wb , ( int ) first_part_size , 16 ) ; //<S2SV> data += encode_tiles ( cpi , data ) ; //<S2SV> * size = data - dest ; //<S2SV> } //<S2SV> 