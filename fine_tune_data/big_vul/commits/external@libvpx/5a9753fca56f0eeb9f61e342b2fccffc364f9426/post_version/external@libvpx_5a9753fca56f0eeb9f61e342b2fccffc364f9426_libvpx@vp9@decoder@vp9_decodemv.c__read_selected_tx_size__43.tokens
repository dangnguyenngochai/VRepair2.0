static TX_SIZE read_selected_tx_size ( VP9_COMMON * cm , MACROBLOCKD * xd , //<S2SV> TX_SIZE max_tx_size , vpx_reader * r ) { //<S2SV> FRAME_COUNTS * counts = xd -> counts ; //<S2SV> const int ctx = get_tx_size_context ( xd ) ; //<S2SV> const vpx_prob * tx_probs = get_tx_probs ( max_tx_size , ctx , & cm -> fc -> tx_probs ) ; //<S2SV> int tx_size = vpx_read ( r , tx_probs [ 0 ] ) ; //<S2SV> if ( tx_size != TX_4X4 && max_tx_size >= TX_16X16 ) { //<S2SV> tx_size += vpx_read ( r , tx_probs [ 1 ] ) ; //<S2SV> if ( tx_size != TX_8X8 && max_tx_size >= TX_32X32 ) //<S2SV> tx_size += vpx_read ( r , tx_probs [ 2 ] ) ; //<S2SV> } //<S2SV> if ( counts ) //<S2SV> ++ get_tx_counts ( max_tx_size , ctx , & counts -> tx ) [ tx_size ] ; //<S2SV> return ( TX_SIZE ) tx_size ; //<S2SV> } //<S2SV> 