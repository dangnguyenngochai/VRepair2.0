static REFERENCE_MODE read_block_reference_mode ( VP9_COMMON * cm , //<S2SV> const MACROBLOCKD * xd , //<S2SV> vpx_reader * r ) { //<S2SV> if ( cm -> reference_mode == REFERENCE_MODE_SELECT ) { //<S2SV> const int ctx = vp9_get_reference_mode_context ( cm , xd ) ; //<S2SV> const REFERENCE_MODE mode = //<S2SV> ( REFERENCE_MODE ) vpx_read ( r , cm -> fc -> comp_inter_prob [ ctx ] ) ; //<S2SV> FRAME_COUNTS * counts = xd -> counts ; //<S2SV> if ( counts ) //<S2SV> ++ counts -> comp_inter [ ctx ] [ mode ] ; //<S2SV> return mode ; //<S2SV> } else { //<S2SV> return cm -> reference_mode ; //<S2SV> } //<S2SV> } //<S2SV> 