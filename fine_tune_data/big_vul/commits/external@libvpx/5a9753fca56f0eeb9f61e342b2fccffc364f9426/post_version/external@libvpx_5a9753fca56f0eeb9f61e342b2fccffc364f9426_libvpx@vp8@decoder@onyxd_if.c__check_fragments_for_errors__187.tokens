static int check_fragments_for_errors ( VP8D_COMP * pbi ) //<S2SV> { //<S2SV> if ( ! pbi -> ec_active && //<S2SV> pbi -> fragments . count <= 1 && pbi -> fragments . sizes [ 0 ] == 0 ) //<S2SV> { //<S2SV> VP8_COMMON * cm = & pbi -> common ; //<S2SV> if ( cm -> fb_idx_ref_cnt [ cm -> lst_fb_idx ] > 1 ) //<S2SV> { //<S2SV> const int prev_idx = cm -> lst_fb_idx ; //<S2SV> cm -> fb_idx_ref_cnt [ prev_idx ] -- ; //<S2SV> cm -> lst_fb_idx = get_free_fb ( cm ) ; //<S2SV> vp8_yv12_copy_frame ( & cm -> yv12_fb [ prev_idx ] , //<S2SV> & cm -> yv12_fb [ cm -> lst_fb_idx ] ) ; //<S2SV> } //<S2SV> cm -> yv12_fb [ cm -> lst_fb_idx ] . corrupted = 1 ; //<S2SV> cm -> show_frame = 0 ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> return 1 ; //<S2SV> } //<S2SV> 