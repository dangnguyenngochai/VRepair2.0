static double calculate_modified_err ( const VP9_COMP * cpi , //<S2SV> const TWO_PASS * twopass , //<S2SV> const VP9EncoderConfig * oxcf , //<S2SV> const FIRSTPASS_STATS * this_frame ) { //<S2SV> const FIRSTPASS_STATS * const stats = & twopass -> total_stats ; //<S2SV> const double av_weight = stats -> weight / stats -> count ; //<S2SV> const double av_err = ( stats -> coded_error * av_weight ) / stats -> count ; //<S2SV> double modified_error = //<S2SV> av_err * pow ( this_frame -> coded_error * this_frame -> weight / //<S2SV> DOUBLE_DIVIDE_CHECK ( av_err ) , oxcf -> two_pass_vbrbias / 100.0 ) ; //<S2SV> modified_error *= //<S2SV> pow ( calculate_active_area ( cpi , this_frame ) , ACT_AREA_CORRECTION ) ; //<S2SV> return fclamp ( modified_error , //<S2SV> twopass -> modified_error_min , twopass -> modified_error_max ) ; //<S2SV> } //<S2SV> 