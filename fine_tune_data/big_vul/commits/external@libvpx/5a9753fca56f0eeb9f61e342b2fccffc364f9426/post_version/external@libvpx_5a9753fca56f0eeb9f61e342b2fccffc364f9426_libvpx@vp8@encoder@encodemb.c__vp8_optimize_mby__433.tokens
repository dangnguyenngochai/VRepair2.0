void vp8_optimize_mby ( MACROBLOCK * x ) //<S2SV> { //<S2SV> int b ; //<S2SV> int type ; //<S2SV> int has_2nd_order ; //<S2SV> ENTROPY_CONTEXT_PLANES t_above , t_left ; //<S2SV> ENTROPY_CONTEXT * ta ; //<S2SV> ENTROPY_CONTEXT * tl ; //<S2SV> if ( ! x -> e_mbd . above_context ) //<S2SV> return ; //<S2SV> if ( ! x -> e_mbd . left_context ) //<S2SV> return ; //<S2SV> memcpy ( & t_above , x -> e_mbd . above_context , sizeof ( ENTROPY_CONTEXT_PLANES ) ) ; //<S2SV> memcpy ( & t_left , x -> e_mbd . left_context , sizeof ( ENTROPY_CONTEXT_PLANES ) ) ; //<S2SV> ta = ( ENTROPY_CONTEXT * ) & t_above ; //<S2SV> tl = ( ENTROPY_CONTEXT * ) & t_left ; //<S2SV> has_2nd_order = ( x -> e_mbd . mode_info_context -> mbmi . mode != B_PRED //<S2SV> && x -> e_mbd . mode_info_context -> mbmi . mode != SPLITMV ) ; //<S2SV> type = has_2nd_order ? PLANE_TYPE_Y_NO_DC : PLANE_TYPE_Y_WITH_DC ; //<S2SV> for ( b = 0 ; b < 16 ; b ++ ) //<S2SV> { //<S2SV> optimize_b ( x , b , type , //<S2SV> ta + vp8_block2above [ b ] , tl + vp8_block2left [ b ] ) ; //<S2SV> } //<S2SV> if ( has_2nd_order ) //<S2SV> { //<S2SV> b = 24 ; //<S2SV> optimize_b ( x , b , PLANE_TYPE_Y2 , //<S2SV> ta + vp8_block2above [ b ] , tl + vp8_block2left [ b ] ) ; //<S2SV> check_reset_2nd_coeffs ( & x -> e_mbd , PLANE_TYPE_Y2 , //<S2SV> ta + vp8_block2above [ b ] , tl + vp8_block2left [ b ] ) ; //<S2SV> } //<S2SV> } //<S2SV> 