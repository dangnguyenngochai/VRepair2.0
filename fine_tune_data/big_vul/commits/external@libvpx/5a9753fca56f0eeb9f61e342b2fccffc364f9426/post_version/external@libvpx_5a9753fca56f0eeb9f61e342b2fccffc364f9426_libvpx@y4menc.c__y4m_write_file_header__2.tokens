int y4m_write_file_header ( char * buf , size_t len , int width , int height , //<S2SV> const struct VpxRational * framerate , //<S2SV> vpx_img_fmt_t fmt , unsigned int bit_depth ) { //<S2SV> const char * color ; //<S2SV> switch ( bit_depth ) { //<S2SV> case 8 : //<S2SV> color = fmt == VPX_IMG_FMT_444A ? "C444alpha\\n" : //<S2SV> fmt == VPX_IMG_FMT_I444 ? "C444\\n" : //<S2SV> fmt == VPX_IMG_FMT_I422 ? "C422\\n" : //<S2SV> "C420jpeg\\n" ; //<S2SV> break ; //<S2SV> case 9 : //<S2SV> color = fmt == VPX_IMG_FMT_I44416 ? "C444p9<S2SV_blank>XYSCSS=444P9\\n" : //<S2SV> fmt == VPX_IMG_FMT_I42216 ? "C422p9<S2SV_blank>XYSCSS=422P9\\n" : //<S2SV> "C420p9<S2SV_blank>XYSCSS=420P9\\n" ; //<S2SV> break ; //<S2SV> case 10 : //<S2SV> color = fmt == VPX_IMG_FMT_I44416 ? "C444p10<S2SV_blank>XYSCSS=444P10\\n" : //<S2SV> fmt == VPX_IMG_FMT_I42216 ? "C422p10<S2SV_blank>XYSCSS=422P10\\n" : //<S2SV> "C420p10<S2SV_blank>XYSCSS=420P10\\n" ; //<S2SV> break ; //<S2SV> case 12 : //<S2SV> color = fmt == VPX_IMG_FMT_I44416 ? "C444p12<S2SV_blank>XYSCSS=444P12\\n" : //<S2SV> fmt == VPX_IMG_FMT_I42216 ? "C422p12<S2SV_blank>XYSCSS=422P12\\n" : //<S2SV> "C420p12<S2SV_blank>XYSCSS=420P12\\n" ; //<S2SV> break ; //<S2SV> case 14 : //<S2SV> color = fmt == VPX_IMG_FMT_I44416 ? "C444p14<S2SV_blank>XYSCSS=444P14\\n" : //<S2SV> fmt == VPX_IMG_FMT_I42216 ? "C422p14<S2SV_blank>XYSCSS=422P14\\n" : //<S2SV> "C420p14<S2SV_blank>XYSCSS=420P14\\n" ; //<S2SV> break ; //<S2SV> case 16 : //<S2SV> color = fmt == VPX_IMG_FMT_I44416 ? "C444p16<S2SV_blank>XYSCSS=444P16\\n" : //<S2SV> fmt == VPX_IMG_FMT_I42216 ? "C422p16<S2SV_blank>XYSCSS=422P16\\n" : //<S2SV> "C420p16<S2SV_blank>XYSCSS=420P16\\n" ; //<S2SV> break ; //<S2SV> default : //<S2SV> color = NULL ; //<S2SV> assert ( 0 ) ; //<S2SV> } //<S2SV> return snprintf ( buf , len , "YUV4MPEG2<S2SV_blank>W%u<S2SV_blank>H%u<S2SV_blank>F%u:%u<S2SV_blank>I%c<S2SV_blank>%s" , width , height , //<S2SV> framerate -> numerator , framerate -> denominator , 'p' , color ) ; //<S2SV> } //<S2SV> 