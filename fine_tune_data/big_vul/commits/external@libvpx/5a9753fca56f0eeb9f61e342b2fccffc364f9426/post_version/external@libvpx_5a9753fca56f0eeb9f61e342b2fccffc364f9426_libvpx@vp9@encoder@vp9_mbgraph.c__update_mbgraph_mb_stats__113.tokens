static void update_mbgraph_mb_stats //<S2SV> ( //<S2SV> VP9_COMP * cpi , //<S2SV> MBGRAPH_MB_STATS * stats , //<S2SV> YV12_BUFFER_CONFIG * buf , //<S2SV> int mb_y_offset , //<S2SV> YV12_BUFFER_CONFIG * golden_ref , //<S2SV> const MV * prev_golden_ref_mv , //<S2SV> YV12_BUFFER_CONFIG * alt_ref , //<S2SV> int mb_row , //<S2SV> int mb_col //<S2SV> ) { //<S2SV> MACROBLOCK * const x = & cpi -> td . mb ; //<S2SV> MACROBLOCKD * const xd = & x -> e_mbd ; //<S2SV> int intra_error ; //<S2SV> VP9_COMMON * cm = & cpi -> common ; //<S2SV> x -> plane [ 0 ] . src . buf = buf -> y_buffer + mb_y_offset ; //<S2SV> x -> plane [ 0 ] . src . stride = buf -> y_stride ; //<S2SV> xd -> plane [ 0 ] . dst . buf = get_frame_new_buffer ( cm ) -> y_buffer + mb_y_offset ; //<S2SV> xd -> plane [ 0 ] . dst . stride = get_frame_new_buffer ( cm ) -> y_stride ; //<S2SV> intra_error = find_best_16x16_intra ( cpi , //<S2SV> & stats -> ref [ INTRA_FRAME ] . m . mode ) ; //<S2SV> if ( intra_error <= 0 ) //<S2SV> intra_error = 1 ; //<S2SV> stats -> ref [ INTRA_FRAME ] . err = intra_error ; //<S2SV> if ( golden_ref ) { //<S2SV> int g_motion_error ; //<S2SV> xd -> plane [ 0 ] . pre [ 0 ] . buf = golden_ref -> y_buffer + mb_y_offset ; //<S2SV> xd -> plane [ 0 ] . pre [ 0 ] . stride = golden_ref -> y_stride ; //<S2SV> g_motion_error = do_16x16_motion_search ( cpi , //<S2SV> prev_golden_ref_mv , //<S2SV> & stats -> ref [ GOLDEN_FRAME ] . m . mv , //<S2SV> mb_row , mb_col ) ; //<S2SV> stats -> ref [ GOLDEN_FRAME ] . err = g_motion_error ; //<S2SV> } else { //<S2SV> stats -> ref [ GOLDEN_FRAME ] . err = INT_MAX ; //<S2SV> stats -> ref [ GOLDEN_FRAME ] . m . mv . as_int = 0 ; //<S2SV> } //<S2SV> if ( alt_ref ) { //<S2SV> int a_motion_error ; //<S2SV> xd -> plane [ 0 ] . pre [ 0 ] . buf = alt_ref -> y_buffer + mb_y_offset ; //<S2SV> xd -> plane [ 0 ] . pre [ 0 ] . stride = alt_ref -> y_stride ; //<S2SV> a_motion_error = do_16x16_zerozero_search ( cpi , //<S2SV> & stats -> ref [ ALTREF_FRAME ] . m . mv ) ; //<S2SV> stats -> ref [ ALTREF_FRAME ] . err = a_motion_error ; //<S2SV> } else { //<S2SV> stats -> ref [ ALTREF_FRAME ] . err = INT_MAX ; //<S2SV> stats -> ref [ ALTREF_FRAME ] . m . mv . as_int = 0 ; //<S2SV> } //<S2SV> } //<S2SV> 