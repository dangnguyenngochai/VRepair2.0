static void write_image_file ( const vpx_image_t * img , const int planes [ 3 ] , //<S2SV> FILE * file ) { //<S2SV> int i , y ; //<S2SV> # if CONFIG_VP9_HIGHBITDEPTH //<S2SV> const int bytes_per_sample = ( ( img -> fmt & VPX_IMG_FMT_HIGHBITDEPTH ) ? 2 : 1 ) ; //<S2SV> # else //<S2SV> const int bytes_per_sample = 1 ; //<S2SV> # endif //<S2SV> for ( i = 0 ; i < 3 ; ++ i ) { //<S2SV> const int plane = planes [ i ] ; //<S2SV> const unsigned char * buf = img -> planes [ plane ] ; //<S2SV> const int stride = img -> stride [ plane ] ; //<S2SV> const int w = vpx_img_plane_width ( img , plane ) ; //<S2SV> const int h = vpx_img_plane_height ( img , plane ) ; //<S2SV> for ( y = 0 ; y < h ; ++ y ) { //<S2SV> fwrite ( buf , bytes_per_sample , w , file ) ; //<S2SV> buf += stride ; //<S2SV> } //<S2SV> } //<S2SV> } //<S2SV> 