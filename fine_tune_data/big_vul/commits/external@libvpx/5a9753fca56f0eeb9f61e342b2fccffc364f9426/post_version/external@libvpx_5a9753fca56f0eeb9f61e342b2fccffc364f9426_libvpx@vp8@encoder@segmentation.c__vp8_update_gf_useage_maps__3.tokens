void vp8_update_gf_useage_maps ( VP8_COMP * cpi , VP8_COMMON * cm , MACROBLOCK * x ) //<S2SV> { //<S2SV> int mb_row , mb_col ; //<S2SV> MODE_INFO * this_mb_mode_info = cm -> mi ; //<S2SV> x -> gf_active_ptr = ( signed char * ) cpi -> gf_active_flags ; //<S2SV> if ( ( cm -> frame_type == KEY_FRAME ) || ( cm -> refresh_golden_frame ) ) //<S2SV> { //<S2SV> memset ( cpi -> gf_active_flags , 1 , ( cm -> mb_rows * cm -> mb_cols ) ) ; //<S2SV> cpi -> gf_active_count = cm -> mb_rows * cm -> mb_cols ; //<S2SV> } //<S2SV> else //<S2SV> { //<S2SV> for ( mb_row = 0 ; mb_row < cm -> mb_rows ; mb_row ++ ) //<S2SV> { //<S2SV> for ( mb_col = 0 ; mb_col < cm -> mb_cols ; mb_col ++ ) //<S2SV> { //<S2SV> if ( ( this_mb_mode_info -> mbmi . ref_frame == GOLDEN_FRAME ) || ( this_mb_mode_info -> mbmi . ref_frame == ALTREF_FRAME ) ) //<S2SV> { //<S2SV> if ( * ( x -> gf_active_ptr ) == 0 ) //<S2SV> { //<S2SV> * ( x -> gf_active_ptr ) = 1 ; //<S2SV> cpi -> gf_active_count ++ ; //<S2SV> } //<S2SV> } //<S2SV> else if ( ( this_mb_mode_info -> mbmi . mode != ZEROMV ) && * ( x -> gf_active_ptr ) ) //<S2SV> { //<S2SV> * ( x -> gf_active_ptr ) = 0 ; //<S2SV> cpi -> gf_active_count -- ; //<S2SV> } //<S2SV> x -> gf_active_ptr ++ ; //<S2SV> this_mb_mode_info ++ ; //<S2SV> } //<S2SV> this_mb_mode_info ++ ; //<S2SV> } //<S2SV> } //<S2SV> } //<S2SV> 