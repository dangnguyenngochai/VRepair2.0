int vp8_get_preview_raw_frame ( VP8_COMP * cpi , YV12_BUFFER_CONFIG * dest , vp8_ppflags_t * flags ) //<S2SV> { //<S2SV> if ( cpi -> common . refresh_alt_ref_frame ) //<S2SV> return - 1 ; //<S2SV> else //<S2SV> { //<S2SV> int ret ; //<S2SV> # if CONFIG_MULTITHREAD //<S2SV> if ( cpi -> b_lpf_running ) //<S2SV> { //<S2SV> sem_wait ( & cpi -> h_event_end_lpf ) ; //<S2SV> cpi -> b_lpf_running = 0 ; //<S2SV> } //<S2SV> # endif //<S2SV> # if CONFIG_POSTPROC //<S2SV> cpi -> common . show_frame_mi = cpi -> common . mi ; //<S2SV> ret = vp8_post_proc_frame ( & cpi -> common , dest , flags ) ; //<S2SV> # else //<S2SV> ( void ) flags ; //<S2SV> if ( cpi -> common . frame_to_show ) //<S2SV> { //<S2SV> * dest = * cpi -> common . frame_to_show ; //<S2SV> dest -> y_width = cpi -> common . Width ; //<S2SV> dest -> y_height = cpi -> common . Height ; //<S2SV> dest -> uv_height = cpi -> common . Height / 2 ; //<S2SV> ret = 0 ; //<S2SV> } //<S2SV> else //<S2SV> { //<S2SV> ret = - 1 ; //<S2SV> } //<S2SV> # endif //<S2SV> vp8_clear_system_state ( ) ; //<S2SV> return ret ; //<S2SV> } //<S2SV> } //<S2SV> 