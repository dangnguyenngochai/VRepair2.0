static int check_best_zero_mv ( //<S2SV> const VP9_COMP * cpi , const uint8_t mode_context [ MAX_REF_FRAMES ] , //<S2SV> int_mv frame_mv [ MB_MODE_COUNT ] [ MAX_REF_FRAMES ] , //<S2SV> int disable_inter_mode_mask , int this_mode , int ref_frame , //<S2SV> int second_ref_frame ) { //<S2SV> if ( ! ( disable_inter_mode_mask & ( 1 << INTER_OFFSET ( ZEROMV ) ) ) && //<S2SV> ( this_mode == NEARMV || this_mode == NEARESTMV || this_mode == ZEROMV ) && //<S2SV> frame_mv [ this_mode ] [ ref_frame ] . as_int == 0 && //<S2SV> ( second_ref_frame == NONE || //<S2SV> frame_mv [ this_mode ] [ second_ref_frame ] . as_int == 0 ) ) { //<S2SV> int rfc = mode_context [ ref_frame ] ; //<S2SV> int c1 = cost_mv_ref ( cpi , NEARMV , rfc ) ; //<S2SV> int c2 = cost_mv_ref ( cpi , NEARESTMV , rfc ) ; //<S2SV> int c3 = cost_mv_ref ( cpi , ZEROMV , rfc ) ; //<S2SV> if ( this_mode == NEARMV ) { //<S2SV> if ( c1 > c3 ) return 0 ; //<S2SV> } else if ( this_mode == NEARESTMV ) { //<S2SV> if ( c2 > c3 ) return 0 ; //<S2SV> } else { //<S2SV> assert ( this_mode == ZEROMV ) ; //<S2SV> if ( second_ref_frame == NONE ) { //<S2SV> if ( ( c3 >= c2 && frame_mv [ NEARESTMV ] [ ref_frame ] . as_int == 0 ) || //<S2SV> ( c3 >= c1 && frame_mv [ NEARMV ] [ ref_frame ] . as_int == 0 ) ) //<S2SV> return 0 ; //<S2SV> } else { //<S2SV> if ( ( c3 >= c2 && frame_mv [ NEARESTMV ] [ ref_frame ] . as_int == 0 && //<S2SV> frame_mv [ NEARESTMV ] [ second_ref_frame ] . as_int == 0 ) || //<S2SV> ( c3 >= c1 && frame_mv [ NEARMV ] [ ref_frame ] . as_int == 0 && //<S2SV> frame_mv [ NEARMV ] [ second_ref_frame ] . as_int == 0 ) ) //<S2SV> return 0 ; //<S2SV> } //<S2SV> } //<S2SV> } //<S2SV> return 1 ; //<S2SV> } //<S2SV> 