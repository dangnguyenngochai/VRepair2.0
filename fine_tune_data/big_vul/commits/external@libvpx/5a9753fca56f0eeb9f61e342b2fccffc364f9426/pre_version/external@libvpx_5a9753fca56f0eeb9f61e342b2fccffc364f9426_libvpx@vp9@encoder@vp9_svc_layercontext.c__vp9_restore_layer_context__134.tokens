void vp9_restore_layer_context ( VP9_COMP * const cpi ) { //<S2SV> LAYER_CONTEXT * const lc = get_layer_context ( & cpi -> svc ) ; //<S2SV> const int old_frame_since_key = cpi -> rc . frames_since_key ; //<S2SV> const int old_frame_to_key = cpi -> rc . frames_to_key ; //<S2SV> cpi -> rc = lc -> rc ; //<S2SV> cpi -> twopass = lc -> twopass ; //<S2SV> cpi -> oxcf . target_bandwidth = lc -> target_bandwidth ; //<S2SV> cpi -> oxcf . starting_buffer_level = lc -> starting_buffer_level ; //<S2SV> cpi -> oxcf . optimal_buffer_level = lc -> optimal_buffer_level ; //<S2SV> cpi -> oxcf . maximum_buffer_size = lc -> maximum_buffer_size ; //<S2SV> cpi -> output_framerate = lc -> framerate ; //<S2SV> if ( cpi -> svc . number_temporal_layers > 1 ) { //<S2SV> cpi -> rc . frames_since_key = old_frame_since_key ; //<S2SV> cpi -> rc . frames_to_key = old_frame_to_key ; //<S2SV> } //<S2SV> } //<S2SV> 