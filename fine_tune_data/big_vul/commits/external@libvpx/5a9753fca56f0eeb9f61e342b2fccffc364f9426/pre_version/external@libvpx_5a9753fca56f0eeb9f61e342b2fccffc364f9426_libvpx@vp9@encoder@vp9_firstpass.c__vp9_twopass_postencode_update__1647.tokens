void vp9_twopass_postencode_update ( VP9_COMP * cpi ) { //<S2SV> # ifdef DISABLE_RC_LONG_TERM_MEM //<S2SV> const uint64_t bits_used = cpi -> rc . this_frame_target ; //<S2SV> # else //<S2SV> const uint64_t bits_used = cpi -> rc . projected_frame_size ; //<S2SV> # endif //<S2SV> cpi -> twopass . bits_left -= bits_used ; //<S2SV> cpi -> twopass . bits_left = MAX ( cpi -> twopass . bits_left , 0 ) ; //<S2SV> if ( cpi -> common . frame_type == KEY_FRAME ) { //<S2SV> cpi -> twopass . kf_group_bits += cpi -> rc . this_frame_target - bits_used ; //<S2SV> } else { //<S2SV> cpi -> twopass . kf_group_bits -= bits_used ; //<S2SV> cpi -> twopass . gf_group_bits -= bits_used ; //<S2SV> cpi -> twopass . gf_group_bits = MAX ( cpi -> twopass . gf_group_bits , 0 ) ; //<S2SV> } //<S2SV> cpi -> twopass . kf_group_bits = MAX ( cpi -> twopass . kf_group_bits , 0 ) ; //<S2SV> } //<S2SV> 