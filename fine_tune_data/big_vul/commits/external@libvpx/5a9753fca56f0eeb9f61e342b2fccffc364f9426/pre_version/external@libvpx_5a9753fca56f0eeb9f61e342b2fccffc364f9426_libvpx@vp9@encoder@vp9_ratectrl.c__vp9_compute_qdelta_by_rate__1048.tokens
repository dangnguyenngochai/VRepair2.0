int vp9_compute_qdelta_by_rate ( const RATE_CONTROL * rc , FRAME_TYPE frame_type , //<S2SV> int qindex , double rate_target_ratio ) { //<S2SV> int target_index = rc -> worst_quality ; //<S2SV> int i ; //<S2SV> const int base_bits_per_mb = vp9_rc_bits_per_mb ( frame_type , qindex , 1.0 ) ; //<S2SV> const int target_bits_per_mb = ( int ) ( rate_target_ratio * base_bits_per_mb ) ; //<S2SV> for ( i = rc -> best_quality ; i < rc -> worst_quality ; ++ i ) { //<S2SV> target_index = i ; //<S2SV> if ( vp9_rc_bits_per_mb ( frame_type , i , 1.0 ) <= target_bits_per_mb ) //<S2SV> break ; //<S2SV> } //<S2SV> return target_index - qindex ; //<S2SV> } //<S2SV> 