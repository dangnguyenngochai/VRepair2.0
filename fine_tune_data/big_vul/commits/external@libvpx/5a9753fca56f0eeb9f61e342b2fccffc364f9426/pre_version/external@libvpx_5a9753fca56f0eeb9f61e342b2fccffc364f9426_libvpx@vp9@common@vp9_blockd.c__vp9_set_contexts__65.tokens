void vp9_set_contexts ( const MACROBLOCKD * xd , struct macroblockd_plane * pd , //<S2SV> BLOCK_SIZE plane_bsize , TX_SIZE tx_size , int has_eob , //<S2SV> int aoff , int loff ) { //<S2SV> ENTROPY_CONTEXT * const a = pd -> above_context + aoff ; //<S2SV> ENTROPY_CONTEXT * const l = pd -> left_context + loff ; //<S2SV> const int tx_size_in_blocks = 1 << tx_size ; //<S2SV> if ( has_eob && xd -> mb_to_right_edge < 0 ) { //<S2SV> int i ; //<S2SV> const int blocks_wide = num_4x4_blocks_wide_lookup [ plane_bsize ] + //<S2SV> ( xd -> mb_to_right_edge >> ( 5 + pd -> subsampling_x ) ) ; //<S2SV> int above_contexts = tx_size_in_blocks ; //<S2SV> if ( above_contexts + aoff > blocks_wide ) //<S2SV> above_contexts = blocks_wide - aoff ; //<S2SV> for ( i = 0 ; i < above_contexts ; ++ i ) //<S2SV> a [ i ] = has_eob ; //<S2SV> for ( i = above_contexts ; i < tx_size_in_blocks ; ++ i ) //<S2SV> a [ i ] = 0 ; //<S2SV> } else { //<S2SV> vpx_memset ( a , has_eob , sizeof ( ENTROPY_CONTEXT ) * tx_size_in_blocks ) ; //<S2SV> } //<S2SV> if ( has_eob && xd -> mb_to_bottom_edge < 0 ) { //<S2SV> int i ; //<S2SV> const int blocks_high = num_4x4_blocks_high_lookup [ plane_bsize ] + //<S2SV> ( xd -> mb_to_bottom_edge >> ( 5 + pd -> subsampling_y ) ) ; //<S2SV> int left_contexts = tx_size_in_blocks ; //<S2SV> if ( left_contexts + loff > blocks_high ) //<S2SV> left_contexts = blocks_high - loff ; //<S2SV> for ( i = 0 ; i < left_contexts ; ++ i ) //<S2SV> l [ i ] = has_eob ; //<S2SV> for ( i = left_contexts ; i < tx_size_in_blocks ; ++ i ) //<S2SV> l [ i ] = 0 ; //<S2SV> } else { //<S2SV> vpx_memset ( l , has_eob , sizeof ( ENTROPY_CONTEXT ) * tx_size_in_blocks ) ; //<S2SV> } //<S2SV> } //<S2SV> 