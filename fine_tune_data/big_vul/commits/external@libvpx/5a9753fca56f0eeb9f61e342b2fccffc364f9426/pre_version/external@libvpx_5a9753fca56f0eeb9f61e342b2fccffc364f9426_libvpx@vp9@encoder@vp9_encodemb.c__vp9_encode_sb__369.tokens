void vp9_encode_sb ( MACROBLOCK * x , BLOCK_SIZE bsize ) { //<S2SV> MACROBLOCKD * const xd = & x -> e_mbd ; //<S2SV> struct optimize_ctx ctx ; //<S2SV> MB_MODE_INFO * mbmi = & xd -> mi [ 0 ] -> mbmi ; //<S2SV> struct encode_b_args arg = { x , & ctx , & mbmi -> skip } ; //<S2SV> int plane ; //<S2SV> for ( plane = 0 ; plane < MAX_MB_PLANE ; ++ plane ) { //<S2SV> if ( ! x -> skip_recode ) //<S2SV> vp9_subtract_plane ( x , bsize , plane ) ; //<S2SV> if ( x -> optimize && ( ! x -> skip_recode || ! x -> skip_optimize ) ) { //<S2SV> const struct macroblockd_plane * const pd = & xd -> plane [ plane ] ; //<S2SV> const TX_SIZE tx_size = plane ? get_uv_tx_size ( mbmi ) : mbmi -> tx_size ; //<S2SV> vp9_get_entropy_contexts ( bsize , tx_size , pd , //<S2SV> ctx . ta [ plane ] , ctx . tl [ plane ] ) ; //<S2SV> } //<S2SV> vp9_foreach_transformed_block_in_plane ( xd , bsize , plane , encode_block , //<S2SV> & arg ) ; //<S2SV> } //<S2SV> } //<S2SV> 