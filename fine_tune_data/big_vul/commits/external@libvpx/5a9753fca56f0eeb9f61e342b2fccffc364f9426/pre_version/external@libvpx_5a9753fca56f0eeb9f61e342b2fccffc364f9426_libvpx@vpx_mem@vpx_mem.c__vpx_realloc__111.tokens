void * vpx_realloc ( void * memblk , size_t size ) { //<S2SV> void * addr , //<S2SV> * new_addr = NULL ; //<S2SV> int align = DEFAULT_ALIGNMENT ; //<S2SV> if ( ! memblk ) //<S2SV> new_addr = vpx_malloc ( size ) ; //<S2SV> else if ( ! size ) //<S2SV> vpx_free ( memblk ) ; //<S2SV> else { //<S2SV> addr = ( void * ) ( ( ( size_t * ) memblk ) [ - 1 ] ) ; //<S2SV> memblk = NULL ; //<S2SV> # if CONFIG_MEM_MANAGER //<S2SV> new_addr = vpx_mm_realloc ( addr , size + align + ADDRESS_STORAGE_SIZE ) ; //<S2SV> # else //<S2SV> new_addr = VPX_REALLOC_L ( addr , size + align + ADDRESS_STORAGE_SIZE ) ; //<S2SV> # endif //<S2SV> if ( new_addr ) { //<S2SV> addr = new_addr ; //<S2SV> new_addr = ( void * ) ( ( ( size_t ) //<S2SV> ( ( unsigned char * ) new_addr + ADDRESS_STORAGE_SIZE ) + ( align - 1 ) ) & //<S2SV> ( size_t ) - align ) ; //<S2SV> ( ( size_t * ) new_addr ) [ - 1 ] = ( size_t ) addr ; //<S2SV> } //<S2SV> } //<S2SV> return new_addr ; //<S2SV> } //<S2SV> 