int vp9_rc_drop_frame ( VP9_COMP * cpi ) { //<S2SV> const VP9_CONFIG * oxcf = & cpi -> oxcf ; //<S2SV> RATE_CONTROL * const rc = & cpi -> rc ; //<S2SV> if ( ! oxcf -> drop_frames_water_mark ) { //<S2SV> return 0 ; //<S2SV> } else { //<S2SV> if ( rc -> buffer_level < 0 ) { //<S2SV> return 1 ; //<S2SV> } else { //<S2SV> int drop_mark = ( int ) ( oxcf -> drop_frames_water_mark * //<S2SV> oxcf -> optimal_buffer_level / 100 ) ; //<S2SV> if ( ( rc -> buffer_level > drop_mark ) && //<S2SV> ( rc -> decimation_factor > 0 ) ) { //<S2SV> -- rc -> decimation_factor ; //<S2SV> } else if ( rc -> buffer_level <= drop_mark && //<S2SV> rc -> decimation_factor == 0 ) { //<S2SV> rc -> decimation_factor = 1 ; //<S2SV> } //<S2SV> if ( rc -> decimation_factor > 0 ) { //<S2SV> if ( rc -> decimation_count > 0 ) { //<S2SV> -- rc -> decimation_count ; //<S2SV> return 1 ; //<S2SV> } else { //<S2SV> rc -> decimation_count = rc -> decimation_factor ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> } else { //<S2SV> rc -> decimation_count = 0 ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> } //<S2SV> } //<S2SV> } //<S2SV> 