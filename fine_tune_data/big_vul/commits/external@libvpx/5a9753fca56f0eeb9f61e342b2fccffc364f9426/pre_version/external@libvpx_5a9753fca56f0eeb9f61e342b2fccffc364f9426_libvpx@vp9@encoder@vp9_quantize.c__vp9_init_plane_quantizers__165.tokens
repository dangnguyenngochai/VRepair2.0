void vp9_init_plane_quantizers ( VP9_COMP * cpi , MACROBLOCK * x ) { //<S2SV> const VP9_COMMON * const cm = & cpi -> common ; //<S2SV> MACROBLOCKD * const xd = & x -> e_mbd ; //<S2SV> QUANTS * const quants = & cpi -> quants ; //<S2SV> const int segment_id = xd -> mi [ 0 ] -> mbmi . segment_id ; //<S2SV> const int qindex = vp9_get_qindex ( & cm -> seg , segment_id , cm -> base_qindex ) ; //<S2SV> const int rdmult = vp9_compute_rd_mult ( cpi , qindex + cm -> y_dc_delta_q ) ; //<S2SV> const int zbin = cpi -> zbin_mode_boost + x -> act_zbin_adj ; //<S2SV> int i ; //<S2SV> x -> plane [ 0 ] . quant = quants -> y_quant [ qindex ] ; //<S2SV> x -> plane [ 0 ] . quant_shift = quants -> y_quant_shift [ qindex ] ; //<S2SV> x -> plane [ 0 ] . zbin = quants -> y_zbin [ qindex ] ; //<S2SV> x -> plane [ 0 ] . round = quants -> y_round [ qindex ] ; //<S2SV> x -> plane [ 0 ] . zbin_extra = ( int16_t ) ( ( cm -> y_dequant [ qindex ] [ 1 ] * zbin ) >> 7 ) ; //<S2SV> xd -> plane [ 0 ] . dequant = cm -> y_dequant [ qindex ] ; //<S2SV> for ( i = 1 ; i < 3 ; i ++ ) { //<S2SV> x -> plane [ i ] . quant = quants -> uv_quant [ qindex ] ; //<S2SV> x -> plane [ i ] . quant_shift = quants -> uv_quant_shift [ qindex ] ; //<S2SV> x -> plane [ i ] . zbin = quants -> uv_zbin [ qindex ] ; //<S2SV> x -> plane [ i ] . round = quants -> uv_round [ qindex ] ; //<S2SV> x -> plane [ i ] . zbin_extra = ( int16_t ) ( ( cm -> uv_dequant [ qindex ] [ 1 ] * zbin ) >> 7 ) ; //<S2SV> xd -> plane [ i ] . dequant = cm -> uv_dequant [ qindex ] ; //<S2SV> } //<S2SV> # if CONFIG_ALPHA //<S2SV> x -> plane [ 3 ] . quant = cpi -> a_quant [ qindex ] ; //<S2SV> x -> plane [ 3 ] . quant_shift = cpi -> a_quant_shift [ qindex ] ; //<S2SV> x -> plane [ 3 ] . zbin = cpi -> a_zbin [ qindex ] ; //<S2SV> x -> plane [ 3 ] . round = cpi -> a_round [ qindex ] ; //<S2SV> x -> plane [ 3 ] . zbin_extra = ( int16_t ) ( ( cm -> a_dequant [ qindex ] [ 1 ] * zbin ) >> 7 ) ; //<S2SV> xd -> plane [ 3 ] . dequant = cm -> a_dequant [ qindex ] ; //<S2SV> # endif //<S2SV> x -> skip_block = vp9_segfeature_active ( & cm -> seg , segment_id , SEG_LVL_SKIP ) ; //<S2SV> x -> q_index = qindex ; //<S2SV> x -> errorperbit = rdmult >> 6 ; //<S2SV> x -> errorperbit += ( x -> errorperbit == 0 ) ; //<S2SV> vp9_initialize_me_consts ( cpi , x -> q_index ) ; //<S2SV> } //<S2SV> 