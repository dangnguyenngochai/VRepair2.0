static int detect_flash ( const struct twopass_rc * twopass , int offset ) { //<S2SV> FIRSTPASS_STATS next_frame ; //<S2SV> int flash_detected = 0 ; //<S2SV> if ( read_frame_stats ( twopass , & next_frame , offset ) != EOF ) { //<S2SV> if ( next_frame . pcnt_second_ref > next_frame . pcnt_inter && //<S2SV> next_frame . pcnt_second_ref >= 0.5 ) //<S2SV> flash_detected = 1 ; //<S2SV> } //<S2SV> return flash_detected ; //<S2SV> } //<S2SV> 