static void close_output_file ( struct stream_state * stream , //<S2SV> unsigned int fourcc ) { //<S2SV> const struct vpx_codec_enc_cfg * const cfg = & stream -> config . cfg ; //<S2SV> if ( cfg -> g_pass == VPX_RC_FIRST_PASS ) //<S2SV> return ; //<S2SV> # if CONFIG_WEBM_IO //<S2SV> if ( stream -> config . write_webm ) { //<S2SV> write_webm_file_footer ( & stream -> ebml , stream -> hash ) ; //<S2SV> free ( stream -> ebml . cue_list ) ; //<S2SV> stream -> ebml . cue_list = NULL ; //<S2SV> } //<S2SV> # endif //<S2SV> if ( ! stream -> config . write_webm ) { //<S2SV> if ( ! fseek ( stream -> file , 0 , SEEK_SET ) ) //<S2SV> ivf_write_file_header ( stream -> file , & stream -> config . cfg , //<S2SV> fourcc , //<S2SV> stream -> frames_out ) ; //<S2SV> } //<S2SV> fclose ( stream -> file ) ; //<S2SV> } //<S2SV> 