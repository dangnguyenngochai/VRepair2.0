static void restore_context ( VP9_COMP * cpi , int mi_row , int mi_col , //<S2SV> ENTROPY_CONTEXT a [ 16 * MAX_MB_PLANE ] , //<S2SV> ENTROPY_CONTEXT l [ 16 * MAX_MB_PLANE ] , //<S2SV> PARTITION_CONTEXT sa [ 8 ] , PARTITION_CONTEXT sl [ 8 ] , //<S2SV> BLOCK_SIZE bsize ) { //<S2SV> MACROBLOCK * const x = & cpi -> mb ; //<S2SV> MACROBLOCKD * const xd = & x -> e_mbd ; //<S2SV> int p ; //<S2SV> const int num_4x4_blocks_wide = num_4x4_blocks_wide_lookup [ bsize ] ; //<S2SV> const int num_4x4_blocks_high = num_4x4_blocks_high_lookup [ bsize ] ; //<S2SV> int mi_width = num_8x8_blocks_wide_lookup [ bsize ] ; //<S2SV> int mi_height = num_8x8_blocks_high_lookup [ bsize ] ; //<S2SV> for ( p = 0 ; p < MAX_MB_PLANE ; p ++ ) { //<S2SV> vpx_memcpy ( //<S2SV> xd -> above_context [ p ] + ( ( mi_col * 2 ) >> xd -> plane [ p ] . subsampling_x ) , //<S2SV> a + num_4x4_blocks_wide * p , //<S2SV> ( sizeof ( ENTROPY_CONTEXT ) * num_4x4_blocks_wide ) >> //<S2SV> xd -> plane [ p ] . subsampling_x ) ; //<S2SV> vpx_memcpy ( //<S2SV> xd -> left_context [ p ] //<S2SV> + ( ( mi_row & MI_MASK ) * 2 >> xd -> plane [ p ] . subsampling_y ) , //<S2SV> l + num_4x4_blocks_high * p , //<S2SV> ( sizeof ( ENTROPY_CONTEXT ) * num_4x4_blocks_high ) >> //<S2SV> xd -> plane [ p ] . subsampling_y ) ; //<S2SV> } //<S2SV> vpx_memcpy ( xd -> above_seg_context + mi_col , sa , //<S2SV> sizeof ( * xd -> above_seg_context ) * mi_width ) ; //<S2SV> vpx_memcpy ( xd -> left_seg_context + ( mi_row & MI_MASK ) , sl , //<S2SV> sizeof ( xd -> left_seg_context [ 0 ] ) * mi_height ) ; //<S2SV> } //<S2SV> 