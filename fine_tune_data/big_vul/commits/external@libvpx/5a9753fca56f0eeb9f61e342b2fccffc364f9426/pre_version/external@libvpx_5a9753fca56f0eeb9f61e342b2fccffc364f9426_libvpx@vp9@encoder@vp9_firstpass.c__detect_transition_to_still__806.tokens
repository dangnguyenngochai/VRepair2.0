static int detect_transition_to_still ( struct twopass_rc * twopass , //<S2SV> int frame_interval , int still_interval , //<S2SV> double loop_decay_rate , //<S2SV> double last_decay_rate ) { //<S2SV> int trans_to_still = 0 ; //<S2SV> if ( frame_interval > MIN_GF_INTERVAL && //<S2SV> loop_decay_rate >= 0.999 && //<S2SV> last_decay_rate < 0.9 ) { //<S2SV> int j ; //<S2SV> const FIRSTPASS_STATS * position = twopass -> stats_in ; //<S2SV> FIRSTPASS_STATS tmp_next_frame ; //<S2SV> for ( j = 0 ; j < still_interval ; ++ j ) { //<S2SV> if ( EOF == input_stats ( twopass , & tmp_next_frame ) ) //<S2SV> break ; //<S2SV> if ( tmp_next_frame . pcnt_inter - tmp_next_frame . pcnt_motion < 0.999 ) //<S2SV> break ; //<S2SV> } //<S2SV> reset_fpf_position ( twopass , position ) ; //<S2SV> if ( j == still_interval ) //<S2SV> trans_to_still = 1 ; //<S2SV> } //<S2SV> return trans_to_still ; //<S2SV> } //<S2SV> 