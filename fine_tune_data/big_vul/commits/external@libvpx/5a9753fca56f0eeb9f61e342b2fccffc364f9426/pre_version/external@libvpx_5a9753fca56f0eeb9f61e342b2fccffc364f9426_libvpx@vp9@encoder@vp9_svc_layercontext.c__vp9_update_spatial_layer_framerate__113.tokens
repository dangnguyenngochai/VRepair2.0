void vp9_update_spatial_layer_framerate ( VP9_COMP * const cpi , double framerate ) { //<S2SV> const VP9_CONFIG * const oxcf = & cpi -> oxcf ; //<S2SV> LAYER_CONTEXT * const lc = get_layer_context ( & cpi -> svc ) ; //<S2SV> RATE_CONTROL * const lrc = & lc -> rc ; //<S2SV> lc -> framerate = framerate ; //<S2SV> lrc -> av_per_frame_bandwidth = ( int ) ( lc -> target_bandwidth / lc -> framerate ) ; //<S2SV> lrc -> min_frame_bandwidth = ( int ) ( lrc -> av_per_frame_bandwidth * //<S2SV> oxcf -> two_pass_vbrmin_section / 100 ) ; //<S2SV> lrc -> max_frame_bandwidth = ( int ) ( ( ( int64_t ) lrc -> av_per_frame_bandwidth * //<S2SV> oxcf -> two_pass_vbrmax_section ) / 100 ) ; //<S2SV> lrc -> max_gf_interval = 16 ; //<S2SV> lrc -> static_scene_max_gf_interval = cpi -> key_frame_frequency >> 1 ; //<S2SV> if ( oxcf -> play_alternate && oxcf -> lag_in_frames ) { //<S2SV> if ( lrc -> max_gf_interval > oxcf -> lag_in_frames - 1 ) //<S2SV> lrc -> max_gf_interval = oxcf -> lag_in_frames - 1 ; //<S2SV> if ( lrc -> static_scene_max_gf_interval > oxcf -> lag_in_frames - 1 ) //<S2SV> lrc -> static_scene_max_gf_interval = oxcf -> lag_in_frames - 1 ; //<S2SV> } //<S2SV> if ( lrc -> max_gf_interval > lrc -> static_scene_max_gf_interval ) //<S2SV> lrc -> max_gf_interval = lrc -> static_scene_max_gf_interval ; //<S2SV> } //<S2SV> 