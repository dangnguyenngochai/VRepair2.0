static void count_segs ( VP9_COMP * cpi , const TileInfo * const tile , //<S2SV> MODE_INFO * * mi_8x8 , //<S2SV> int * no_pred_segcounts , //<S2SV> int ( * temporal_predictor_count ) [ 2 ] , //<S2SV> int * t_unpred_seg_counts , //<S2SV> int bw , int bh , int mi_row , int mi_col ) { //<S2SV> VP9_COMMON * const cm = & cpi -> common ; //<S2SV> MACROBLOCKD * const xd = & cpi -> mb . e_mbd ; //<S2SV> int segment_id ; //<S2SV> if ( mi_row >= cm -> mi_rows || mi_col >= cm -> mi_cols ) //<S2SV> return ; //<S2SV> xd -> mi = mi_8x8 ; //<S2SV> segment_id = xd -> mi [ 0 ] -> mbmi . segment_id ; //<S2SV> set_mi_row_col ( xd , tile , mi_row , bh , mi_col , bw , cm -> mi_rows , cm -> mi_cols ) ; //<S2SV> no_pred_segcounts [ segment_id ] ++ ; //<S2SV> if ( cm -> frame_type != KEY_FRAME ) { //<S2SV> const BLOCK_SIZE bsize = mi_8x8 [ 0 ] -> mbmi . sb_type ; //<S2SV> const int pred_segment_id = vp9_get_segment_id ( cm , cm -> last_frame_seg_map , //<S2SV> bsize , mi_row , mi_col ) ; //<S2SV> const int pred_flag = pred_segment_id == segment_id ; //<S2SV> const int pred_context = vp9_get_pred_context_seg_id ( xd ) ; //<S2SV> xd -> mi [ 0 ] -> mbmi . seg_id_predicted = pred_flag ; //<S2SV> temporal_predictor_count [ pred_context ] [ pred_flag ] ++ ; //<S2SV> if ( ! pred_flag ) //<S2SV> t_unpred_seg_counts [ segment_id ] ++ ; //<S2SV> } //<S2SV> } //<S2SV> 