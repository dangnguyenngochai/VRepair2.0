static double calc_frame_boost ( VP9_COMP * cpi , FIRSTPASS_STATS * this_frame , //<S2SV> double this_frame_mv_in_out ) { //<S2SV> double frame_boost ; //<S2SV> if ( this_frame -> intra_error > cpi -> twopass . gf_intra_err_min ) //<S2SV> frame_boost = ( IIFACTOR * this_frame -> intra_error / //<S2SV> DOUBLE_DIVIDE_CHECK ( this_frame -> coded_error ) ) ; //<S2SV> else //<S2SV> frame_boost = ( IIFACTOR * cpi -> twopass . gf_intra_err_min / //<S2SV> DOUBLE_DIVIDE_CHECK ( this_frame -> coded_error ) ) ; //<S2SV> if ( this_frame_mv_in_out > 0.0 ) //<S2SV> frame_boost += frame_boost * ( this_frame_mv_in_out * 2.0 ) ; //<S2SV> else //<S2SV> frame_boost += frame_boost * ( this_frame_mv_in_out / 2.0 ) ; //<S2SV> return MIN ( frame_boost , GF_RMAX ) ; //<S2SV> } //<S2SV> 