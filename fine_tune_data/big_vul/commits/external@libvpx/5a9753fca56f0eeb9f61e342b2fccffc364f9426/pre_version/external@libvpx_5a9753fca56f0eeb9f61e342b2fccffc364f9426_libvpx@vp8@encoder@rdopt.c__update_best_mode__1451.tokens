static void update_best_mode ( BEST_MODE * best_mode , int this_rd , //<S2SV> RATE_DISTORTION * rd , int other_cost , MACROBLOCK * x ) //<S2SV> { //<S2SV> MB_PREDICTION_MODE this_mode = x -> e_mbd . mode_info_context -> mbmi . mode ; //<S2SV> other_cost += //<S2SV> x -> ref_frame_cost [ x -> e_mbd . mode_info_context -> mbmi . ref_frame ] ; //<S2SV> best_mode -> yrd = RDCOST ( x -> rdmult , x -> rddiv , ( rd -> rate2 - rd -> rate_uv - other_cost ) , //<S2SV> ( rd -> distortion2 - rd -> distortion_uv ) ) ; //<S2SV> best_mode -> rd = this_rd ; //<S2SV> vpx_memcpy ( & best_mode -> mbmode , & x -> e_mbd . mode_info_context -> mbmi , sizeof ( MB_MODE_INFO ) ) ; //<S2SV> vpx_memcpy ( & best_mode -> partition , x -> partition_info , sizeof ( PARTITION_INFO ) ) ; //<S2SV> if ( ( this_mode == B_PRED ) || ( this_mode == SPLITMV ) ) //<S2SV> { //<S2SV> int i ; //<S2SV> for ( i = 0 ; i < 16 ; i ++ ) //<S2SV> { //<S2SV> best_mode -> bmodes [ i ] = x -> e_mbd . block [ i ] . bmi ; //<S2SV> } //<S2SV> } //<S2SV> } //<S2SV> 