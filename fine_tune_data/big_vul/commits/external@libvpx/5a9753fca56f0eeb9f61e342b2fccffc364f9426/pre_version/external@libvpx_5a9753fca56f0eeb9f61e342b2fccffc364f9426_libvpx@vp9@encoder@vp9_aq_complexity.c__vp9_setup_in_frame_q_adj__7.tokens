void vp9_setup_in_frame_q_adj ( VP9_COMP * cpi ) { //<S2SV> VP9_COMMON * const cm = & cpi -> common ; //<S2SV> struct segmentation * const seg = & cm -> seg ; //<S2SV> vp9_clear_system_state ( ) ; //<S2SV> if ( cm -> frame_type == KEY_FRAME || //<S2SV> cpi -> refresh_alt_ref_frame || //<S2SV> ( cpi -> refresh_golden_frame && ! cpi -> rc . is_src_frame_alt_ref ) ) { //<S2SV> int segment ; //<S2SV> vpx_memset ( cpi -> segmentation_map , 0 , cm -> mi_rows * cm -> mi_cols ) ; //<S2SV> vpx_memset ( cpi -> complexity_map , 0 , cm -> mi_rows * cm -> mi_cols ) ; //<S2SV> vp9_enable_segmentation ( seg ) ; //<S2SV> vp9_clearall_segfeatures ( seg ) ; //<S2SV> seg -> abs_delta = SEGMENT_DELTADATA ; //<S2SV> vp9_disable_segfeature ( seg , 0 , SEG_LVL_ALT_Q ) ; //<S2SV> for ( segment = 1 ; segment < 2 ; segment ++ ) { //<S2SV> const int qindex_delta = //<S2SV> vp9_compute_qdelta_by_rate ( & cpi -> rc , cm -> frame_type , cm -> base_qindex , //<S2SV> in_frame_q_adj_ratio [ segment ] ) ; //<S2SV> vp9_enable_segfeature ( seg , segment , SEG_LVL_ALT_Q ) ; //<S2SV> vp9_set_segdata ( seg , segment , SEG_LVL_ALT_Q , qindex_delta ) ; //<S2SV> } //<S2SV> } //<S2SV> } //<S2SV> 