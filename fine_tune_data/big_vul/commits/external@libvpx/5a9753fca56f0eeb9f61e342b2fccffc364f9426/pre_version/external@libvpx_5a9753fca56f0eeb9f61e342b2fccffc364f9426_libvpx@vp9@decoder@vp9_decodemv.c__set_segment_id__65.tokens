static void set_segment_id ( VP9_COMMON * cm , BLOCK_SIZE bsize , //<S2SV> int mi_row , int mi_col , int segment_id ) { //<S2SV> const int mi_offset = mi_row * cm -> mi_cols + mi_col ; //<S2SV> const int bw = num_8x8_blocks_wide_lookup [ bsize ] ; //<S2SV> const int bh = num_8x8_blocks_high_lookup [ bsize ] ; //<S2SV> const int xmis = MIN ( cm -> mi_cols - mi_col , bw ) ; //<S2SV> const int ymis = MIN ( cm -> mi_rows - mi_row , bh ) ; //<S2SV> int x , y ; //<S2SV> assert ( segment_id >= 0 && segment_id < MAX_SEGMENTS ) ; //<S2SV> for ( y = 0 ; y < ymis ; y ++ ) //<S2SV> for ( x = 0 ; x < xmis ; x ++ ) //<S2SV> cm -> last_frame_seg_map [ mi_offset + y * cm -> mi_cols + x ] = segment_id ; //<S2SV> } //<S2SV> 