void vp9_rc_get_svc_params ( VP9_COMP * cpi ) { //<S2SV> VP9_COMMON * const cm = & cpi -> common ; //<S2SV> RATE_CONTROL * const rc = & cpi -> rc ; //<S2SV> int target = rc -> av_per_frame_bandwidth ; //<S2SV> if ( ( cm -> current_video_frame == 0 ) || //<S2SV> ( cm -> frame_flags & FRAMEFLAGS_KEY ) || //<S2SV> ( cpi -> oxcf . auto_key && ( rc -> frames_since_key % //<S2SV> cpi -> key_frame_frequency == 0 ) ) ) { //<S2SV> cm -> frame_type = KEY_FRAME ; //<S2SV> rc -> source_alt_ref_active = 0 ; //<S2SV> if ( cpi -> pass == 0 && cpi -> oxcf . end_usage == USAGE_STREAM_FROM_SERVER ) { //<S2SV> target = calc_iframe_target_size_one_pass_cbr ( cpi ) ; //<S2SV> } //<S2SV> } else { //<S2SV> cm -> frame_type = INTER_FRAME ; //<S2SV> if ( cpi -> pass == 0 && cpi -> oxcf . end_usage == USAGE_STREAM_FROM_SERVER ) { //<S2SV> target = calc_pframe_target_size_one_pass_cbr ( cpi ) ; //<S2SV> } //<S2SV> } //<S2SV> vp9_rc_set_frame_target ( cpi , target ) ; //<S2SV> rc -> frames_till_gf_update_due = INT_MAX ; //<S2SV> rc -> baseline_gf_interval = INT_MAX ; //<S2SV> } //<S2SV> 