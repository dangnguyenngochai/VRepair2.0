static INLINE void write_buffer_4x4 ( int16_t * output , __m128i * res ) { //<S2SV> const __m128i kOne = _mm_set1_epi16 ( 1 ) ; //<S2SV> __m128i in01 = _mm_unpacklo_epi64 ( res [ 0 ] , res [ 1 ] ) ; //<S2SV> __m128i in23 = _mm_unpacklo_epi64 ( res [ 2 ] , res [ 3 ] ) ; //<S2SV> __m128i out01 = _mm_add_epi16 ( in01 , kOne ) ; //<S2SV> __m128i out23 = _mm_add_epi16 ( in23 , kOne ) ; //<S2SV> out01 = _mm_srai_epi16 ( out01 , 2 ) ; //<S2SV> out23 = _mm_srai_epi16 ( out23 , 2 ) ; //<S2SV> _mm_store_si128 ( ( __m128i * ) ( output + 0 * 8 ) , out01 ) ; //<S2SV> _mm_store_si128 ( ( __m128i * ) ( output + 1 * 8 ) , out23 ) ; //<S2SV> } //<S2SV> 