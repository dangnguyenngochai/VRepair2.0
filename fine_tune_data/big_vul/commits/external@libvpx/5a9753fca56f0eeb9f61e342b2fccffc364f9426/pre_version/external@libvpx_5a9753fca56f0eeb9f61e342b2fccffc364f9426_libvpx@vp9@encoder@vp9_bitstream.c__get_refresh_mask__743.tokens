static int get_refresh_mask ( VP9_COMP * cpi ) { //<S2SV> # if CONFIG_MULTIPLE_ARF //<S2SV> if ( ! cpi -> multi_arf_enabled && cpi -> refresh_golden_frame && //<S2SV> ! cpi -> refresh_alt_ref_frame ) { //<S2SV> # else //<S2SV> if ( cpi -> refresh_golden_frame && ! cpi -> refresh_alt_ref_frame && //<S2SV> ! cpi -> use_svc ) { //<S2SV> # endif //<S2SV> return ( cpi -> refresh_last_frame << cpi -> lst_fb_idx ) | //<S2SV> ( cpi -> refresh_golden_frame << cpi -> alt_fb_idx ) ; //<S2SV> } else { //<S2SV> int arf_idx = cpi -> alt_fb_idx ; //<S2SV> # if CONFIG_MULTIPLE_ARF //<S2SV> if ( cpi -> multi_arf_enabled ) { //<S2SV> int sn = cpi -> sequence_number ; //<S2SV> arf_idx = ( cpi -> frame_coding_order [ sn ] < 0 ) ? //<S2SV> cpi -> arf_buffer_idx [ sn + 1 ] : //<S2SV> cpi -> arf_buffer_idx [ sn ] ; //<S2SV> } //<S2SV> # endif //<S2SV> return ( cpi -> refresh_last_frame << cpi -> lst_fb_idx ) | //<S2SV> ( cpi -> refresh_golden_frame << cpi -> gld_fb_idx ) | //<S2SV> ( cpi -> refresh_alt_ref_frame << arf_idx ) ; //<S2SV> } //<S2SV> } //<S2SV> 