VP9Decoder * vp9_decoder_create ( const VP9D_CONFIG * oxcf ) { //<S2SV> VP9Decoder * const pbi = vpx_memalign ( 32 , sizeof ( * pbi ) ) ; //<S2SV> VP9_COMMON * const cm = pbi ? & pbi -> common : NULL ; //<S2SV> if ( ! cm ) //<S2SV> return NULL ; //<S2SV> vp9_zero ( * pbi ) ; //<S2SV> if ( setjmp ( cm -> error . jmp ) ) { //<S2SV> cm -> error . setjmp = 0 ; //<S2SV> vp9_decoder_remove ( pbi ) ; //<S2SV> return NULL ; //<S2SV> } //<S2SV> cm -> error . setjmp = 1 ; //<S2SV> vp9_initialize_dec ( ) ; //<S2SV> vp9_rtcd ( ) ; //<S2SV> vpx_memset ( & cm -> ref_frame_map , - 1 , sizeof ( cm -> ref_frame_map ) ) ; //<S2SV> cm -> current_video_frame = 0 ; //<S2SV> pbi -> oxcf = * oxcf ; //<S2SV> pbi -> ready_for_new_data = 1 ; //<S2SV> pbi -> decoded_key_frame = 0 ; //<S2SV> vp9_init_dequantizer ( cm ) ; //<S2SV> vp9_loop_filter_init ( cm ) ; //<S2SV> cm -> error . setjmp = 0 ; //<S2SV> vp9_worker_init ( & pbi -> lf_worker ) ; //<S2SV> return pbi ; //<S2SV> } //<S2SV> 