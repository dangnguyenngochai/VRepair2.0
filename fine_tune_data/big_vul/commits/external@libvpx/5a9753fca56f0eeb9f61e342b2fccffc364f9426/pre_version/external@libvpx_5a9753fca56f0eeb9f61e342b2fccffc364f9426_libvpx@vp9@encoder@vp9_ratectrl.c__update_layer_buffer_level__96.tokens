static void update_layer_buffer_level ( SVC * svc , int encoded_frame_size ) { //<S2SV> int temporal_layer = 0 ; //<S2SV> int current_temporal_layer = svc -> temporal_layer_id ; //<S2SV> for ( temporal_layer = current_temporal_layer + 1 ; //<S2SV> temporal_layer < svc -> number_temporal_layers ; ++ temporal_layer ) { //<S2SV> LAYER_CONTEXT * lc = & svc -> layer_context [ temporal_layer ] ; //<S2SV> RATE_CONTROL * lrc = & lc -> rc ; //<S2SV> int bits_off_for_this_layer = ( int ) ( lc -> target_bandwidth / lc -> framerate - //<S2SV> encoded_frame_size ) ; //<S2SV> lrc -> bits_off_target += bits_off_for_this_layer ; //<S2SV> lrc -> bits_off_target = MIN ( lrc -> bits_off_target , lc -> maximum_buffer_size ) ; //<S2SV> lrc -> buffer_level = lrc -> bits_off_target ; //<S2SV> } //<S2SV> } //<S2SV> 