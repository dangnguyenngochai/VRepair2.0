int file_is_raw ( struct VpxInputContext * input ) { //<S2SV> uint8_t buf [ 32 ] ; //<S2SV> int is_raw = 0 ; //<S2SV> vpx_codec_stream_info_t si ; //<S2SV> si . sz = sizeof ( si ) ; //<S2SV> if ( fread ( buf , 1 , 32 , input -> file ) == 32 ) { //<S2SV> int i ; //<S2SV> if ( mem_get_le32 ( buf ) < 256 * 1024 * 1024 ) { //<S2SV> for ( i = 0 ; i < get_vpx_decoder_count ( ) ; ++ i ) { //<S2SV> const VpxInterface * const decoder = get_vpx_decoder_by_index ( i ) ; //<S2SV> if ( ! vpx_codec_peek_stream_info ( decoder -> interface ( ) , //<S2SV> buf + 4 , 32 - 4 , & si ) ) { //<S2SV> is_raw = 1 ; //<S2SV> input -> fourcc = decoder -> fourcc ; //<S2SV> input -> width = si . w ; //<S2SV> input -> height = si . h ; //<S2SV> input -> framerate . numerator = 30 ; //<S2SV> input -> framerate . denominator = 1 ; //<S2SV> break ; //<S2SV> } //<S2SV> } //<S2SV> } //<S2SV> } //<S2SV> rewind ( input -> file ) ; //<S2SV> return is_raw ; //<S2SV> } //<S2SV> 