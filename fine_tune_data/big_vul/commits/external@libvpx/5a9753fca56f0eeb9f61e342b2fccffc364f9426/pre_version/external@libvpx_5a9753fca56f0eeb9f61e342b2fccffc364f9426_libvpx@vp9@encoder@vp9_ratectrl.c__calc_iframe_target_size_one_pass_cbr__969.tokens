static int calc_iframe_target_size_one_pass_cbr ( const VP9_COMP * cpi ) { //<S2SV> const RATE_CONTROL * rc = & cpi -> rc ; //<S2SV> int target ; //<S2SV> if ( cpi -> common . current_video_frame == 0 ) { //<S2SV> target = ( ( cpi -> oxcf . starting_buffer_level / 2 ) > INT_MAX ) //<S2SV> ? INT_MAX : ( int ) ( cpi -> oxcf . starting_buffer_level / 2 ) ; //<S2SV> } else { //<S2SV> const int initial_boost = 32 ; //<S2SV> int kf_boost = MAX ( initial_boost , ( int ) ( 2 * cpi -> output_framerate - 16 ) ) ; //<S2SV> if ( rc -> frames_since_key < cpi -> output_framerate / 2 ) { //<S2SV> kf_boost = ( int ) ( kf_boost * rc -> frames_since_key / //<S2SV> ( cpi -> output_framerate / 2 ) ) ; //<S2SV> } //<S2SV> target = ( ( 16 + kf_boost ) * rc -> av_per_frame_bandwidth ) >> 4 ; //<S2SV> } //<S2SV> return vp9_rc_clamp_iframe_target_size ( cpi , target ) ; //<S2SV> } //<S2SV> 