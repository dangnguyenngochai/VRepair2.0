static int jp2_cdef_getdata ( jp2_box_t * box , jas_stream_t * in ) //<S2SV> { //<S2SV> jp2_cdef_t * cdef = & box -> data . cdef ; //<S2SV> jp2_cdefchan_t * chan ; //<S2SV> unsigned int channo ; //<S2SV> if ( jp2_getuint16 ( in , & cdef -> numchans ) ) { //<S2SV> return - 1 ; //<S2SV> } //<S2SV> if ( ! ( cdef -> ents = jas_alloc2 ( cdef -> numchans , sizeof ( jp2_cdefchan_t ) ) ) ) { //<S2SV> return - 1 ; //<S2SV> } //<S2SV> for ( channo = 0 ; channo < cdef -> numchans ; ++ channo ) { //<S2SV> chan = & cdef -> ents [ channo ] ; //<S2SV> if ( jp2_getuint16 ( in , & chan -> channo ) || jp2_getuint16 ( in , & chan -> type ) || //<S2SV> jp2_getuint16 ( in , & chan -> assoc ) ) { //<S2SV> return - 1 ; //<S2SV> } //<S2SV> } //<S2SV> return 0 ; //<S2SV> } //<S2SV> 