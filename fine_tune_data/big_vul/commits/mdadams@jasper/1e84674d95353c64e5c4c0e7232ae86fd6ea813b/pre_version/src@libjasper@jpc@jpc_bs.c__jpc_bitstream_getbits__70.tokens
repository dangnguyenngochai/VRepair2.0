long jpc_bitstream_getbits ( jpc_bitstream_t * bitstream , int n ) //<S2SV> { //<S2SV> long v ; //<S2SV> int u ; //<S2SV> assert ( n >= 0 && n < 32 ) ; //<S2SV> v = 0 ; //<S2SV> while ( -- n >= 0 ) { //<S2SV> if ( ( u = jpc_bitstream_getbit ( bitstream ) ) < 0 ) { //<S2SV> return - 1 ; //<S2SV> } //<S2SV> v = ( v << 1 ) | u ; //<S2SV> } //<S2SV> return v ; //<S2SV> } //<S2SV> 