static int mem_resize ( jas_stream_memobj_t * m , size_t bufsize ) //<S2SV> { //<S2SV> unsigned char * buf ; //<S2SV> JAS_DBGLOG ( 100 , ( "mem_resize(%p,<S2SV_blank>%zu)\\n" , m , bufsize ) ) ; //<S2SV> if ( ! bufsize ) { //<S2SV> jas_eprintf ( //<S2SV> "mem_resize<S2SV_blank>was<S2SV_blank>not<S2SV_blank>really<S2SV_blank>designed<S2SV_blank>to<S2SV_blank>handle<S2SV_blank>a<S2SV_blank>buffer<S2SV_blank>of<S2SV_blank>size<S2SV_blank>0\\n" //<S2SV> "This<S2SV_blank>may<S2SV_blank>not<S2SV_blank>work.\\n" //<S2SV> ) ; //<S2SV> } //<S2SV> if ( ! ( buf = jas_realloc2 ( m -> buf_ , bufsize , sizeof ( unsigned char ) ) ) && //<S2SV> bufsize ) { //<S2SV> JAS_DBGLOG ( 100 , ( "mem_resize<S2SV_blank>realloc<S2SV_blank>failed\\n" ) ) ; //<S2SV> return - 1 ; //<S2SV> } //<S2SV> JAS_DBGLOG ( 100 , ( "mem_resize<S2SV_blank>realloc<S2SV_blank>succeeded\\n" ) ) ; //<S2SV> m -> buf_ = buf ; //<S2SV> m -> bufsize_ = bufsize ; //<S2SV> return 0 ; //<S2SV> } //<S2SV> 