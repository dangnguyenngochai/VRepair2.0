void pdf_load_pages_kids ( FILE * fp , pdf_t * pdf ) //<S2SV> { //<S2SV> int i , id , dummy ; //<S2SV> char * buf , * c ; //<S2SV> long start , sz ; //<S2SV> start = ftell ( fp ) ; //<S2SV> for ( i = 0 ; i < pdf -> n_xrefs ; i ++ ) //<S2SV> { //<S2SV> if ( pdf -> xrefs [ i ] . version && ( pdf -> xrefs [ i ] . end != 0 ) ) //<S2SV> { //<S2SV> fseek ( fp , pdf -> xrefs [ i ] . start , SEEK_SET ) ; //<S2SV> while ( SAFE_F ( fp , ( fgetc ( fp ) != 't' ) ) ) //<S2SV> ; //<S2SV> sz = pdf -> xrefs [ i ] . end - ftell ( fp ) ; //<S2SV> buf = malloc ( sz + 1 ) ; //<S2SV> SAFE_E ( fread ( buf , 1 , sz , fp ) , sz , "Failed<S2SV_blank>to<S2SV_blank>load<S2SV_blank>/Root.\\n" ) ; //<S2SV> buf [ sz ] = '\\0' ; //<S2SV> if ( ! ( c = strstr ( buf , "/Root" ) ) ) //<S2SV> { //<S2SV> free ( buf ) ; //<S2SV> continue ; //<S2SV> } //<S2SV> id = atoi ( c + strlen ( "/Root" ) + 1 ) ; //<S2SV> free ( buf ) ; //<S2SV> buf = get_object ( fp , id , & pdf -> xrefs [ i ] , NULL , & dummy ) ; //<S2SV> if ( ! buf || ! ( c = strstr ( buf , "/Pages" ) ) ) //<S2SV> { //<S2SV> free ( buf ) ; //<S2SV> continue ; //<S2SV> } //<S2SV> id = atoi ( c + strlen ( "/Pages" ) + 1 ) ; //<S2SV> load_kids ( fp , id , & pdf -> xrefs [ i ] ) ; //<S2SV> free ( buf ) ; //<S2SV> } //<S2SV> } //<S2SV> fseek ( fp , start , SEEK_SET ) ; //<S2SV> } //<S2SV> 