static void skel ( const char * homedir , uid_t u , gid_t g ) { //<S2SV> char * fname ; //<S2SV> if ( ! arg_shell_none && ( strcmp ( cfg . shell , "/usr/bin/zsh" ) == 0 || strcmp ( cfg . shell , "/bin/zsh" ) == 0 ) ) { //<S2SV> if ( asprintf ( & fname , "%s/.zshrc" , homedir ) == - 1 ) //<S2SV> errExit ( "asprintf" ) ; //<S2SV> struct stat s ; //<S2SV> if ( stat ( fname , & s ) == 0 ) //<S2SV> return ; //<S2SV> if ( stat ( "/etc/skel/.zshrc" , & s ) == 0 ) { //<S2SV> copy_file ( "/etc/skel/.zshrc" , fname , u , g , 0644 ) ; //<S2SV> fs_logger ( "clone<S2SV_blank>/etc/skel/.zshrc" ) ; //<S2SV> } //<S2SV> else { //<S2SV> touch_file_as_user ( fname , u , g , 0644 ) ; //<S2SV> fs_logger2 ( "touch" , fname ) ; //<S2SV> } //<S2SV> free ( fname ) ; //<S2SV> } //<S2SV> else if ( ! arg_shell_none && strcmp ( cfg . shell , "/bin/csh" ) == 0 ) { //<S2SV> if ( asprintf ( & fname , "%s/.cshrc" , homedir ) == - 1 ) //<S2SV> errExit ( "asprintf" ) ; //<S2SV> struct stat s ; //<S2SV> if ( stat ( fname , & s ) == 0 ) //<S2SV> return ; //<S2SV> if ( stat ( "/etc/skel/.cshrc" , & s ) == 0 ) { //<S2SV> copy_file ( "/etc/skel/.cshrc" , fname , u , g , 0644 ) ; //<S2SV> fs_logger ( "clone<S2SV_blank>/etc/skel/.cshrc" ) ; //<S2SV> } //<S2SV> else { //<S2SV> touch_file_as_user ( fname , u , g , 0644 ) ; //<S2SV> fs_logger2 ( "touch" , fname ) ; //<S2SV> } //<S2SV> free ( fname ) ; //<S2SV> } //<S2SV> else { //<S2SV> if ( asprintf ( & fname , "%s/.bashrc" , homedir ) == - 1 ) //<S2SV> errExit ( "asprintf" ) ; //<S2SV> struct stat s ; //<S2SV> if ( stat ( fname , & s ) == 0 ) //<S2SV> return ; //<S2SV> if ( stat ( "/etc/skel/.bashrc" , & s ) == 0 ) { //<S2SV> copy_file ( "/etc/skel/.bashrc" , fname , u , g , 0644 ) ; //<S2SV> fs_logger ( "clone<S2SV_blank>/etc/skel/.bashrc" ) ; //<S2SV> } //<S2SV> free ( fname ) ; //<S2SV> } //<S2SV> } //<S2SV> 