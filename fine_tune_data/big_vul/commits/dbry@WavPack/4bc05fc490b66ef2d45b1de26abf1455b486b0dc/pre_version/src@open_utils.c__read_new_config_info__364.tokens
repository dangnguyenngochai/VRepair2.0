static int read_new_config_info ( WavpackContext * wpc , WavpackMetadata * wpmd ) //<S2SV> { //<S2SV> int bytecnt = wpmd -> byte_length ; //<S2SV> unsigned char * byteptr = wpmd -> data ; //<S2SV> wpc -> version_five = 1 ; //<S2SV> wpc -> file_format = wpc -> config . qmode = wpc -> channel_layout = 0 ; //<S2SV> if ( wpc -> channel_reordering ) { //<S2SV> free ( wpc -> channel_reordering ) ; //<S2SV> wpc -> channel_reordering = NULL ; //<S2SV> } //<S2SV> if ( bytecnt ) { //<S2SV> wpc -> file_format = * byteptr ++ ; //<S2SV> wpc -> config . qmode = ( wpc -> config . qmode & ~ 0xff ) | * byteptr ++ ; //<S2SV> bytecnt -= 2 ; //<S2SV> if ( bytecnt ) { //<S2SV> int nchans , i ; //<S2SV> wpc -> channel_layout = ( int32_t ) * byteptr ++ << 16 ; //<S2SV> bytecnt -- ; //<S2SV> if ( bytecnt ) { //<S2SV> wpc -> channel_layout += nchans = * byteptr ++ ; //<S2SV> bytecnt -- ; //<S2SV> if ( bytecnt ) { //<S2SV> if ( bytecnt > nchans ) //<S2SV> return FALSE ; //<S2SV> wpc -> channel_reordering = malloc ( nchans ) ; //<S2SV> if ( wpc -> channel_reordering ) { //<S2SV> for ( i = 0 ; i < nchans ; ++ i ) //<S2SV> if ( bytecnt ) { //<S2SV> wpc -> channel_reordering [ i ] = * byteptr ++ ; //<S2SV> bytecnt -- ; //<S2SV> } //<S2SV> else //<S2SV> wpc -> channel_reordering [ i ] = i ; //<S2SV> } //<S2SV> } //<S2SV> } //<S2SV> else //<S2SV> wpc -> channel_layout += wpc -> config . num_channels ; //<S2SV> } //<S2SV> } //<S2SV> return TRUE ; //<S2SV> } //<S2SV> 