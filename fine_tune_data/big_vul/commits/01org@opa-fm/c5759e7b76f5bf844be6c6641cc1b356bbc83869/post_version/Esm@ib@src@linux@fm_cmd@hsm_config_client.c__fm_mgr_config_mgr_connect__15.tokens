fm_mgr_config_errno_t //<S2SV> fm_mgr_config_mgr_connect //<S2SV> ( //<S2SV> fm_config_conx_hdl * hdl , //<S2SV> fm_mgr_type_t mgr //<S2SV> ) //<S2SV> { //<S2SV> char s_path [ 256 ] ; //<S2SV> char c_path [ 256 ] ; //<S2SV> char * mgr_prefix ; //<S2SV> p_hsm_com_client_hdl_t * mgr_hdl ; //<S2SV> memset ( s_path , 0 , sizeof ( s_path ) ) ; //<S2SV> memset ( c_path , 0 , sizeof ( c_path ) ) ; //<S2SV> switch ( mgr ) //<S2SV> { //<S2SV> case FM_MGR_SM : //<S2SV> mgr_prefix = HSM_FM_SCK_SM ; //<S2SV> mgr_hdl = & hdl -> sm_hdl ; //<S2SV> break ; //<S2SV> case FM_MGR_PM : //<S2SV> mgr_prefix = HSM_FM_SCK_PM ; //<S2SV> mgr_hdl = & hdl -> pm_hdl ; //<S2SV> break ; //<S2SV> case FM_MGR_FE : //<S2SV> mgr_prefix = HSM_FM_SCK_FE ; //<S2SV> mgr_hdl = & hdl -> fe_hdl ; //<S2SV> break ; //<S2SV> default : //<S2SV> return FM_CONF_INIT_ERR ; //<S2SV> } //<S2SV> sprintf ( s_path , "%s%s%d" , HSM_FM_SCK_PREFIX , mgr_prefix , hdl -> instance ) ; //<S2SV> sprintf ( c_path , "%s%s%d_C_XXXXXX" , HSM_FM_SCK_PREFIX , mgr_prefix , hdl -> instance ) ; //<S2SV> if ( * mgr_hdl == NULL ) //<S2SV> { //<S2SV> if ( hcom_client_init ( mgr_hdl , s_path , c_path , 32768 ) != HSM_COM_OK ) //<S2SV> { //<S2SV> return FM_CONF_INIT_ERR ; //<S2SV> } //<S2SV> } //<S2SV> if ( hcom_client_connect ( * mgr_hdl ) == HSM_COM_OK ) //<S2SV> { //<S2SV> hdl -> conx_mask |= mgr ; //<S2SV> return FM_CONF_OK ; //<S2SV> } //<S2SV> return FM_CONF_CONX_ERR ; //<S2SV> } //<S2SV> 